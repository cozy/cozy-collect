{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/KonnectorInstall.jsx","webpack:///./src/lib/redux-cozy-client/DataAccessFacade.js","webpack:///./src/ducks/apps/index.js","webpack:///crypto (ignored)","webpack:///crypto (ignored)?f68b","webpack:///./src/lib/redux-cozy-client/adapters/CozyStackAdapter.js","webpack:///util (ignored)","webpack:///./src/ducks/accounts/index.js","webpack:///util (ignored)?ea86","webpack:///./src/components/ReactMarkdownWrapper.jsx","webpack:///./src/styles/konnectorSuccess.styl","webpack:///./src/ducks/connections/index.js","webpack:///zlib (ignored)","webpack:///./src/components/KonnectorSuccess.jsx","webpack:///fs (ignored)","webpack:///http (ignored)","webpack:///https (ignored)","webpack:///./src/lib/konnectors.js","webpack:///./src/styles/intents.styl","webpack:///./src/components/TriggerFolderLink.jsx","webpack:///./src/styles/konnectorMaintenance.styl","webpack:///./src/lib/redux-cozy-client/authentication/mobile.js","webpack:///./src/lib/redux-cozy-client/CozyProvider.jsx","webpack:///./src/components/AppIcon.jsx","webpack:///./src/components/DescriptionContent.jsx","webpack:///./src/lib/redux-cozy-client/reducer.js","webpack:///./src/lib/redux-cozy-client/helpers.js","webpack:///./src/components/services/CreateAccountService.jsx","webpack:///./src/styles/konnectorInstall.styl","webpack:///./src/locales sync \\/(en|fr|es)","webpack:///./src/lib/CollectStore.js","webpack:///./src/components/KonnectorMaintenance.jsx","webpack:///./src/styles/descriptionContent.styl","webpack:///./src/styles/triggerFolderLink.styl","webpack:///./src/lib/redux-cozy-client/CozyClient.js","webpack:///./src/lib/middlewares/konnectorsI18n.js","webpack:///./src/lib/triggers.js","webpack:///./src/containers/IntentService.jsx","webpack:///./src/lib/redux-cozy-client/connect.jsx","webpack:///./src/components/Banners/UpdateMessage.jsx","webpack:///./src/store/configureStore.js","webpack:///./src/reducers/index.js","webpack:///./src/targets/intents/index.jsx","webpack:///./src/components/KonnectorHeaderIcon.jsx","webpack:///./src/styles/konnectorHeaderIcon.styl","webpack:///./src/styles/accountConnection.styl","webpack:///./node_modules/moment/locale sync \\/(en|fr|es)","webpack:///./src/lib/redux-cozy-client/adapters/PouchdbAdapter.js","webpack:///./src/containers/IntentHandler.jsx","webpack:///./node_modules/cozy-harvest-lib/dist/locales sync ^\\.\\/.*\\.json$","webpack:///./src/lib/redux-cozy-client/index.js","webpack:///./src/components/appEntryPoint.jsx","webpack:///./src/lib/redux-cozy-client/utils.js","webpack:///./src/lib/redux-cozy-client/slices/sharings.js","webpack:///./src/ducks/triggers/index.js","webpack:///./src/ducks/jobs/index.js","webpack:///./src/lib/redux-cozy-client/slices/synchronization.js","webpack:///./src/components/BanksLink.jsx","webpack:///./src/ducks/konnectors/index.js","webpack:///./src/assets/images/connecting-data-in-progress.svg","webpack:///./src/lib/redux-cozy-client/middleware.js","webpack:///./src/containers/AccountConnection.jsx","webpack:///./node_modules/date-fns/locale sync \\/(en|fr|es)","webpack:///./src/components/intents/CreateAccountIntent.jsx"],"names":["KonnectorInstall","props","state","trigger","success","handleLoginSuccess","bind","handleSuccess","setState","onLoginSuccess","onSuccess","account","konnector","legacySuccess","onDone","successMessage","successMessages","successButtonLabel","t","message","folder_to_save","styles","name","Component","mapStateToProps","ownProps","getKonnector","cozy","connector","slug","translate","connect","DataAccessFacade","stackAdapter","CozyStackAdapter","PouchDB","pouchAdapter","PouchdbAdapter","strategy","PouchFirstStrategy","StackOnlyStrategy","cozyUrl","options","config","cozyURL","client","init","offline","registerDoctypes","doctypes","doctype","getAdapter","dispatch","sync","SYNC_BIDIRECTIONAL","SYNC_TO","SYNC_FROM","getDatabase","undefined","RECEIVE_APPS","reducer","action","type","apps","receiveApps","getApp","find","app","FILES_DOCTYPE","FETCH_LIMIT","SHARED_BY_LINK","SHARED_WITH_ME","SHARED_WITH_OTHERS","skip","fetchJSON","processJSONAPI","data","meta","next","count","resp","rows","filter","row","doc","hasOwnProperty","docs","map","Object","assign","id","_type","total_rows","offset","match","index","fields","sort","f","queryOptions","limit","wholeResponse","files","query","response","_id","attributes","normalized","create","created","job","updateAttributes","updated","_rev","delete","defineIndex","path","statByPath","file","normalizeFile","dirID","trashById","fetchReferencedFiles","included","worker","ids","addReferencedFiles","removeReferencedFiles","fetchPermissions","sharingType","byMe","byLink","withMe","permissions","contactIds","description","desc","recipients","contactId","recipient","sharing_type","sharingId","clientId","permission","DOCTYPE","accountCollectionKey","fetchAccounts","fetchCollection","getAccount","documents","getIds","keys","reactMarkdownRendererOptions","Link","href","children","ReactMarkdownWrapper","source","ACCOUNT_DOCTYPE","TRIGGERS_DOCTYPE","JOBS_DOCTYPE","ENQUEUE_CONNECTION","LAUNCH_TRIGGER","PURGE_QUEUE","RECEIVE_DATA","RECEIVE_NEW_DOCUMENT","RECEIVE_DELETED_DOCUMENT","UPDATE_CONNECTION_RUNNING_STATUS","UPDATE_CONNECTION_ERROR","START_CONNECTION_CREATION","END_CONNECTION_CREATION","getTriggerKonnectorSlug","isKonnectorTrigger","isKonnectorJob","Error","konnectorReducer","length","reduce","newState","isTrigger","isJob","konnectorSlug","triggerId","trigger_id","currentStatus","current_state","status","error","last_error","buildKonnectorError","lastSyncDate","last_execution","queued_at","existingTriggers","get","rawTriggers","push","triggers","hasError","isRunning","includes","isConnected","konnectors","creation","isAccount","combineReducers","triggersReducer","isEnqueued","omit","enqueueConnection","purgeQueue","updateConnectionError","startConnectionCreation","endConnectionCreation","getConnectionsByKonnector","validAccounts","validKonnectors","konnectorIsValid","konnectorHasConnections","values","getFirstError","firstTriggerHavingError","getFirstUserError","firstTriggerHavingUserError","isKonnectorUserError","getLastSyncDate","lastExecutions","dateA","dateB","momentA","moment","utc","momentB","isAfter","isBefore","getTriggerQueueStatus","getQueue","queuedConnections","concat","queuedTriggers","label","getConnectionError","getTriggerState","getCreatedAccount","getTriggerIdByKonnectorAndAccount","getTriggerLastSuccess","lastJob","getTriggerLastJob","lastJobIsSuccess","started_at","last_success","isCreatingConnection","isConnectionConnected","isConnectionEnqueued","isConnectionRunning","SuccessImage","connectingIllu","SuccessLinks","classNames","DriveLink","folderId","SuccessFooter","KonnectorSuccess","handleConnectionSuccess","title","messages","relatedApps","sortBy","predicate","priority","hasLinks","i","successLink","context","footerLink","drive","res","has","event","preventDefault","banks","Array","isArray","data_types","store","banksUrl","contextTypes","PropTypes","object","propTypes","isRequired","string","arrayOf","func","ERROR_TYPES","CHALLENGE_ASKED","LOGIN_FAILED","MAINTENANCE","NOT_EXISTING_DIRECTORY","USER_ACTION_NEEDED","VENDOR_DOWN","DISK_QUOTA_EXCEEDED","UPDATE_NEEDED_ERRORS_TYPES","TERMS_VERSION_MISMATCH","TWO_FA_ERRORS","patchFolderPermission","saveFolder","encodeURIComponent","addFolderPermission","isKonnectorLoginError","isKonnectorTwoFAError","code","isKonnectorKnownError","isKonnectorUpdateNeededError","split","checkLocale","key","hasPendingUpdate","available_version","getMostAccurateErrorKey","getKey","errorSegments","tested","fullKey","join","slice","legacyMessages","terms","getKonnectorMessage","hasDescriptions","providesMessage","providesLegacyMessage","MaybeLink","className","PureComponent","TriggerFolderLink","driveApp","all","disabled","links","related","mapDispatchToProps","withClient","hasCordovaPlugin","window","cordova","InAppBrowser","REGISTRATION_ABORT","authenticateWithCordova","url","Promise","resolve","reject","target","inAppBrowser","open","removeListener","removeEventListener","onLoadStart","onExit","accessCode","test","close","addEventListener","setTimeout","token","prompt","CozyProvider","domain","secure","bool","shape","subscribe","getState","element","AppIcon","otherProps","URL","getStackClient","uri","host","protocol","DescriptionContent","cssClassesObject","centerTitle","m","APPS_DOCTYPE","FETCH_DOCUMENT","FETCH_COLLECTION","RECEIVE_ERROR","CREATE_DOCUMENT","UPDATE_DOCUMENT","DELETE_DOCUMENT","RECEIVE_APP","RECEIVE_UPDATED_DOCUMENT","FETCH_REFERENCED_FILES","ADD_REFERENCED_FILES","REMOVE_REFERENCED_FILES","objectifyDocumentsArray","dataDoctype","getArrayDoctype","deleted","removeObjectProperty","updateFilesReferences","document","removeFilesReferences","obj","updateFileReference","relationships","referenced_by","newlyReferencedIds","removeFileReferences","rel","removedIds","getDoctype","collectionInitialState","fetchStatus","lastFetch","hasMore","collection","Date","now","indexOf","collections","applyUpdate","updateAction","updateCollections","sharings","synchronization","fetchApps","types","promise","fetchDocument","fetchTriggers","fetchKonnectors","createDocument","actionOptions","createTrigger","launchTrigger","updateDocument","deleteDocument","deleteTrigger","createFile","trashFile","makeActionCreator","makeFetchMoreAction","applySelectorForAction","getCollection","getDocument","FETCH_SHARINGS","getSharingDetails","getSharings","enhancePropsForActions","fetchActions","mapValues","propName","dataObject","fetchMore","mapDocumentsToIds","isCollectionFetched","slugify","text","toString","toLowerCase","replace","forceFileDownload","filename","createElement","setAttribute","style","display","body","appendChild","click","removeChild","downloadArchive","notSecureFilename","fileIds","getArchiveLinkByIds","fullpath","downloadFile","downloadById","blob","createObjectURL","CreateAccountService","endCreation","startCreation","React","createdAccount","getCreatedConnectionAccount","getTriggerByKonnectorAndAccount","isCreating","connections","CONNECTION_STATUS","ERRORED","RUNNING","CONNECTED","ACCOUNTS_DOCTYPE","normalize","dbObject","CollectStore","listener","categories","require","updateUnfinishedJob","onAccountCreated","onAccountUpdated","onAccountDeleted","onTriggerCreated","onTriggerDeleted","initializeRealtime","realtime","CozyRealtime","normalizedJob","isDeletedAccountHookJob","account_deleted","onTriggerUpdated","intent","intents","createService","then","forEach","item","catch","err","console","warn","KonnectorMaintenance","maintenance","lang","konnectorName","KONNECTORS_DOCTYPE","SHARINGS_DOCTYPE","CozyClient","indexes","specialDirectories","facade","setup","oauth","onRegistered","authorize","clientInfos","auth","getClient","startSync","startReplicationTo","startReplicationFrom","selector","getCollectionIndex","queryDocuments","fetchDocuments","fetchFile","fetchSharingPermissions","sharingIds","p","source_id","fetchSharing","createSharing","revokeSharing","revokeSharingForClient","createSharingLink","revokeSharingLink","createDirectoryByPath","dir","property","value","getUniqueIndex","existingDocs","createIndex","getIndexFields","arr","extendI18nWithKonnector","langs","locales","hasLangs","providesLang","actualLang","localeKeys","providesLocales","extendI18n","konnectorsI18nMiddleware","fetch","IntentService","receiveKonnector","service","compose","installedKonnector","cancel","appData","onCancel","reason","terminate","receiveInstalledKonnector","mapDocumentsToProps","mapActionsToProps","WrappedComponent","Wrapper","makeMapStateToProps","initialState","initialOwnProps","initialProps","isAction","filterValues","prop","reduxConnect","UpdateMessage","isRedirecting","redirectToStore","redirect","step","isBlocking","configureStore","legacyClient","cozyClient","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE","reduxStore","createStore","getReducers","applyMiddleware","apply","cozyMiddleware","thunkMiddleware","flag","createLogger","Boolean","getInstalledKonnectors","fromKonnectors","fromConnections","fromAccounts","getConnectionsQueue","getKonnectorTriggersCount","fromTriggers","getTriggersByKonnector","triggersInState","acc","getTriggersInError","isInError","getAccountsWithErrors","accountsWithErrorsIds","accounts","documentElement","getAttribute","root","querySelector","dataset","cozyDomain","cozyToken","MostRecentCozyClient","location","schema","Application","master","render","__DEVELOPMENT__","KonnectorHeaderIcon","center","REPLICATION_INTERVAL","plugin","pouchdbFind","instances","credentials","basic","toBasicAuth","_url","info","result","update_seq","direction","getReplicationBaseUrl","baseUrl","getSeqNumber","seqNumber","startDoctypeSync","syncDoctype","replicationUrl","db","syncHandler","replicate","to","from","on","syncDoctypeOk","scheduleNextSync","refreshToken","newToken","saveCredentials","syncDoctypeError","allDocs","include_docs","k","revs_info","post","rev","safeDoc","put","remove","IntentHandler","isInitializing","createIntentService","getData","appEntryPoint","jobs","fetchKonnectorJobs","selectData","cozyConnect","transform","RECEIVE_SHARINGS_DATA","RECEIVE_FETCH_SHARINGS_ERROR","CREATE_SHARING","RECEIVE_NEW_SHARING","CREATE_SHARING_LINK","RECEIVE_NEW_SHARING_LINK","REVOKE_SHARING_LINK","RECEIVE_SHARING_LINK_REVOKE","REVOKE_SHARING","RECEIVE_SHARING_REVOKE","removeRecipient","recipientId","idx","findIndex","r","s","sharing_id","sharing","loneRecipient","revoked","doctypePermsetInitialState","rule0","fetchSharings","share","sharingDesc","createContact","c","recipientIds","trackSharingByEmail","unshare","getSharingForRecipient","Client","client_id","leave","getDocumentActiveSharings","owner","shareByLink","trackSharingByLink","revokeLink","perm","getSharingLinkPermission","getPermissionsFor","fetchContacts","contact","email","address","primary","publicLink","verbs","isFile","getSharing","getContact","getDoctypePermissions","getSharingLink","buildSharingLink","codes","perms","getSharingStatus","shared","some","sharingLink","sharer","readOnly","getSharingRecipients","a","b","sharecode","origin","track","tracker","getTracker","triggersCollectionKey","fromCozyClient","getKonnectorTriggers","existingAccountIds","getTrigger","lastestJob","currentJob","DateFns","isJobRunning","START_SYNC","START_DOCTYPE_SYNC","SYNC_DOCTYPE_OK","SYNC_DOCTYPE_ERROR","doctypeSyncInitialState","syncStatus","lastSync","doctypeSync","infos","isFirstSync","seqNumbers","every","number","isSynced","timestamps","ts","BanksLink","onClick","appName","top","konnectorsCollectionKey","getIndexedKonnectors","indexed","getSlugs","rest","REQUEST","SUCCESS","FAILURE","log","AccountConnection","isFetching","handleError","handleDeleteSuccess","prevProps","queued","connectionError","succeed","loginSucceed","submitting","additionnalSuccessMessage","oAuthError","buildSuccessMessages","konnectorError","withRouter","CreateAccountIntent","isSuccess","fetchUrls","onTerminate"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,0CAA0C;QAC1C;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEO,IAAMA,gBAAb;AAAA;AAAA;AAAA;;AACE,4BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oNAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,aAAO,EAAE,IADE;AAEXC,aAAO,EAAE;AAFE,KAAb;AAIA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,4FAA1B;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,4FAArB;AAPiB;AAQlB;;AATH;AAAA;AAAA,uCAWqBH,OAXrB,EAW8B;AAC1B,WAAKK,QAAL,CAAc;AACZL,eAAO,EAAPA,OADY;AAEZC,eAAO,EAAE;AAFG,OAAd;AAKA,WAAKH,KAAL,CAAWQ,cAAX,CAA0BN,OAA1B;AACD;AAlBH;AAAA;AAAA,kCAoBgBA,OApBhB,EAoByB;AACrB,WAAKK,QAAL,CAAc;AACZL,eAAO,EAAPA,OADY;AAEZC,eAAO,EAAE;AAFG,OAAd;AAKA,WAAKH,KAAL,CAAWS,SAAX,CAAqBP,OAArB;AACD;AA3BH;AAAA;AAAA,6BA6BW;AAAA,wBAUH,KAAKF,KAVF;AAAA,UAELU,OAFK,eAELA,OAFK;AAAA,UAGLC,SAHK,eAGLA,SAHK;AAAA,UAILC,aAJK,eAILA,aAJK;AAAA,UAKLC,MALK,eAKLA,MALK;AAAA,UAMLC,cANK,eAMLA,cANK;AAAA,UAOLC,eAPK,eAOLA,eAPK;AAAA,UAQLC,kBARK,eAQLA,kBARK;AAAA,UASLC,CATK,eASLA,CATK;AAAA,wBAYsB,KAAKhB,KAZ3B;AAAA,UAYCC,OAZD,eAYCA,OAZD;AAAA,UAYUC,OAZV,eAYUA,OAZV;;AAcP,UAAIA,OAAO,IAAIS,aAAf,EAA8B;AAC5B,eACE,2DAAC,oEAAD;AACE,iBAAO,EAAEF,OADX;AAEE,mBAAS,EAAEC,SAFb;AAGE,kBAAQ,EAAET,OAAO,IAAIA,OAAO,CAACgB,OAAR,CAAgBC,cAHvC;AAIE,gBAAM,EAAEN,MAJV;AAKE,eAAK,EAAEC,cALT;AAME,iBAAO,EAAEZ,OANX;AAOE,kBAAQ,EAAEa,eAPZ;AAQE,4BAAkB,EAAEC;AARtB,UADF;AAYD;;AAED,aACE;AAAK,iBAAS,EAAEI,oEAAM,CAAC,gCAAD;AAAtB,SACE;AAAK,iBAAS,EAAEA,oEAAM,CAAC,6BAAD;AAAtB,SACE;AAAI,iBAAS,EAAC;AAAd,SACGH,CAAC,CAAC,sBAAD,EAAyB;AAAEI,YAAI,EAAEV,SAAS,CAACU;AAAlB,OAAzB,CADJ,CADF,EAIE,2DAAC,+DAAD;AACE,eAAO,EAAEX,OADX;AAEE,iBAAS,EAAEC,SAFb;AAGE,sBAAc,EAAE,KAAKP,kBAHvB;AAIE,iBAAS,EAAE,KAAKE,aAJlB;AAKE,qBAAa,EAAE;AALjB,QAJF,CADF,CADF;AAgBD;AA1EH;;AAAA;AAAA,EAAsCgB,+CAAtC;;AA6EA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACtB,KAAD,EAAQuB,QAAR;AAAA,SAAsB;AAC5Cb,aAAS,EAAEc,sEAAY,CAACxB,KAAK,CAACyB,IAAP,EAAaF,QAAQ,CAACG,SAAT,CAAmBC,IAAhC;AADqB,GAAtB;AAAA,CAAxB;;AAIeC,mIAAS,GAAGC,2DAAO,CAACP,eAAD,CAAP,CAAyBxB,gBAAzB,CAAH,CAAxB,E;;;;;;;;;;;;;;;;;;;;;;AC3FA;AACA;CAOA;AACA;;IAEqBgC,gB;;;AACnB,8BAAc;AAAA;;AACZ,SAAKC,YAAL,GAAoB,IAAIC,kEAAJ,EAApB;;AACA,QAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAClC,WAAKC,YAAL,GAAoB,IAAIC,gEAAJ,EAApB,CADkC,CAElC;;AACA,WAAKC,QAAL,GAAgB,IAAIC,kBAAJ,EAAhB;AACD,KAJD,MAIO;AACL,WAAKD,QAAL,GAAgB,IAAIE,iBAAJ,EAAhB;AACD;AACF;;;;0BAEKC,O,EAASC,O,EAAS;AACtB,UAAMC,MAAM,GAAG;AAAEC,eAAO,EAAEH;AAAd,SAA0BC,OAA1B,CAAZ;;AACAf,UAAI,CAACkB,MAAL,CAAYC,IAAZ,CAAiBH,MAAjB,EAFsB,CAEG;;AACzB,WAAKV,YAAL,CAAkBa,IAAlB,CAAuBH,MAAvB;;AACA,UAAIA,MAAM,CAACI,OAAX,EAAoB;AAClB,aAAKX,YAAL,CAAkBY,gBAAlB,CAAmCL,MAAM,CAACI,OAAP,CAAeE,QAAlD;AACD;AACF;;;+BAEUC,O,EAAS;AAClB,aAAO,KAAKZ,QAAL,CAAca,UAAd,CACLD,OADK,EAEL,KAAKjB,YAFA,EAGL,KAAKG,YAHA,CAAP;AAKD;;;8BAESgB,Q,EAAU;AAClB,aAAO,KAAKhB,YAAL,CAAkBiB,IAAlB,CAAuBD,QAAvB,EAAiCE,2EAAjC,CAAP;AACD;;;uCAEkBF,Q,EAAU;AAC3B,aAAO,KAAKhB,YAAL,CAAkBiB,IAAlB,CAAuBD,QAAvB,EAAiCG,gEAAjC,CAAP;AACD;;;yCAEoBH,Q,EAAU;AAC7B,aAAO,KAAKhB,YAAL,CAAkBiB,IAAlB,CAAuBD,QAAvB,EAAiCI,kEAAjC,CAAP;AACD;;;;;;;;IAGGjB,kB;;;;;;;;;+BACOW,O,EAASjB,Y,EAAcG,Y,EAAc;AAC9C,UAAIA,YAAY,CAACqB,WAAb,CAAyBP,OAAzB,MAAsCQ,SAA1C,EAAqD;AACnD,eAAOzB,YAAP;AACD;;AACD,aAAOG,YAAP;AACD;;;;;;IAGGI,iB;;;;;;;;;+BACOU,O,EAASjB,Y,EAAc;AAChC,aAAOA,YAAP;AACD;;;;;;;;;;;;ACjEH;AAAA;AAAA;AAAA,IAAM0B,YAAY,GAAG,cAArB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAwB;AAAA,MAAvB1D,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AACtC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKH,YAAL;AACE,aAAOE,MAAM,CAACE,IAAP,IAAe7D,KAAtB;;AACF;AACE,aAAOA,KAAP;AAJJ;AAMD,CAPD;;AASe0D,sEAAf,E,CAEA;;AACO,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAAAD,IAAI;AAAA,SAAK;AAClCD,QAAI,EAAEH,YAD4B;AAElCI,QAAI,EAAJA;AAFkC,GAAL;AAAA,CAAxB,C,CAKP;;AACO,IAAME,MAAM,GAAG,SAATA,MAAS;AAAA,MAAC/D,KAAD,uEAAS,EAAT;AAAA,MAAa2B,IAAb;AAAA,SAAsB3B,KAAK,CAACgE,IAAN,CAAW,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACtC,IAAJ,KAAaA,IAAjB;AAAA,GAAd,CAAtB;AAAA,CAAf,C;;;;;;;;;;;;;;;;;ACpBP,e;;;;;;;ACAA,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA,IAAMuC,aAAa,GAAG,eAAtB;AACA,IAAMC,WAAW,GAAG,EAApB;AAEO,IAAMC,cAAc,GAAG,cAAvB;AACA,IAAMC,cAAc,GAAG,cAAvB;AACA,IAAMC,kBAAkB,GAAG,kBAA3B;;IAEctC,gB;;;;;;;;;;;;;;;;;;;;;;;AACHuC,oB,2DAAO,C;;uBACQ9C,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,KAAtB,EAA6B,QAA7B,EAAuC,IAAvC,EAA6C;AACxEC,gCAAc,EAAE;AADwD,iBAA7C,C;;;;AAArBC,oB,QAAAA,I;AAAMC,oB,QAAAA,I;iDAIP;AACLD,sBAAI,EAAEA,IAAI,IAAI,EADT;AAELC,sBAAI,EAAEA,IAFD;AAGLJ,sBAAI,EAAJA,IAHK;AAILK,sBAAI,EAAE,CAAC,CAACD,IAAF,IAAUA,IAAI,CAACE,KAAL,GAAaN,IAAI,GAAGJ;AAJ/B,iB;;;;;;;;;;;;;;;;;;;;;+FAQYnB,O;;;;;;;;uBAKEvB,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CACjB,KADiB,kBAERxB,OAFQ,kC;;;AAAb8B,oB;AAIN;AACA;AACA;AACMC,oB,GAAOD,IAAI,CAACC,IAAL,CAAUC,MAAV,CAAiB,UAAAC,GAAG;AAAA,yBAAI,CAACA,GAAG,CAACC,GAAJ,CAAQC,cAAR,CAAuB,OAAvB,CAAL;AAAA,iBAApB,C,EACb;;AACMC,oB,GAAOL,IAAI,CAACM,GAAL,CAAS,UAAAJ,GAAG;AAAA,yBACvBK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,GAAG,CAACC,GAAtB,EAA2B;AAAEM,sBAAE,EAAEP,GAAG,CAACO,EAAV;AAAcC,yBAAK,EAAEzC;AAArB,mBAA3B,CADuB;AAAA,iBAAZ,C,EAGb;;kDACO;AACL0B,sBAAI,EAAEU,IADD;AAELT,sBAAI,EAAE;AAAEE,yBAAK,EAAEC,IAAI,CAACY;AAAd,mBAFD;AAGLnB,sBAAI,EAAEO,IAAI,CAACa,MAHN;AAILf,sBAAI,EAAE;AAJD,iB;;;;;;qBAOH,aAAM3D,OAAN,CAAc2E,KAAd,CAAoB,WAApB,C;;;;;kDACK;AAAElB,sBAAI,EAAE,EAAR;AAAYC,sBAAI,EAAE;AAAEE,yBAAK,EAAE;AAAT,mBAAlB;AAAgCN,sBAAI,EAAE,CAAtC;AAAyCK,sBAAI,EAAE;AAA/C,iB;;;;;;;;;;;;;;;;;;;;;;;;+FAMQ5B,O,EAAS6C,K,EAAOrD,O;;;;;;;AAC7BsD,sB,GAAStD,OAAO,CAACsD,M;AACjBvB,oB,GAAO/B,OAAO,CAAC+B,IAAR,IAAgB,C,EAC7B;;AACMwB,oB,GAAOvD,OAAO,CAACuD,IAAR,GACTF,KAAK,CAACC,MAAN,CAAaT,GAAb,CAAiB,UAAAW,CAAC;AAAA,0GAAQA,CAAR,EAAYxD,OAAO,CAACuD,IAAR,CAAaC,CAAb,KAAmB,MAA/B;AAAA,iBAAlB,CADS,GAETxC,S;AAEEyC,4B;AACJC,uBAAK,EAAE/B,W;AACPgC,+BAAa,EAAE;mBACZ3D,O;AACH;AACAsD,wBAAM,4FAAMA,MAAN,IAAc,KAAd,EAAqB,OAArB,EAA8B,OAA9B,E;AACNvB,sBAAI,EAAJA,I;AACAwB,sBAAI,EAAJA;oBAGF;;sBAEI/C,OAAO,KAAKkB,a;;;;;;uBACSzC,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkBC,KAAlB,CAAwBR,KAAxB,EAA+BI,YAA/B,C;;;AAAjBK,wB;AACN5B,oBAAI,GAAG4B,QAAQ,CAAC5B,IAAT,CAAcW,GAAd,CAAkB,UAAAH,GAAG;AAAA,yBAC1BI,MAAM,CAACC,MAAP,CAAc;AAAEgB,uBAAG,EAAErB,GAAG,CAACM,EAAX;AAAeC,yBAAK,EAAEzC;AAAtB,mBAAd,EAA+CkC,GAA/C,EAAoDA,GAAG,CAACsB,UAAxD,CAD0B;AAAA,iBAArB,CAAP;AAGA7B,oBAAI,GAAG2B,QAAQ,CAAC3B,IAAhB;AACAC,oBAAI,GAAGD,IAAI,CAACE,KAAL,GAAaN,IAAI,GAAGJ,WAA3B;;;;;;uBAEuB1C,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiB2B,KAAjB,CAAuBR,KAAvB,EAA8BI,YAA9B,C;;;AAAjBK,yB;AACN5B,oBAAI,GAAG4B,SAAQ,CAAClB,IAAT,CAAcC,GAAd,CAAkB,UAAAH,GAAG;AAAA,yBAC1BI,MAAM,CAACC,MAAP,CAAc;AAAEC,sBAAE,EAAEN,GAAG,CAACqB,GAAV;AAAed,yBAAK,EAAEzC;AAAtB,mBAAd,EAA+CkC,GAA/C,CAD0B;AAAA,iBAArB,CAAP;AAGAP,oBAAI,GAAG,EAAP;AACAC,oBAAI,GAAG0B,SAAQ,CAAC1B,IAAhB;;;kDAIK;AAAEF,sBAAI,EAAJA,IAAF;AAAQC,sBAAI,EAAJA,IAAR;AAAcC,sBAAI,EAAJA;AAAd,iB;;;;;;;;;;;;;;;;;;;;;+FAGW5B,O,EAASwC,E;;;;;;;uBACT/D,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBV,IAAjB,CAAsBhB,OAAtB,EAA+BwC,EAA/B,C;;;AAAZN,mB;AACN;AACMuB,0B,kFAAkBvB,G;AAAKM,oBAAE,EAAEN,GAAG,CAACqB,G;AAAKd,uBAAK,EAAEP,GAAG,CAACO;;kDAC9C;AAAEf,sBAAI,EAAE,CAAC+B,UAAD;AAAR,iB;;;;;;;;;;;;;;;;;;yBAGJhE,M,EAAQ;AACX,WAAKA,MAAL,kFAAmBA,MAAnB;AACD;;;;;;+FAEoBO,O,EAASkC,G;;;;;;;uBACNzD,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBgC,MAAjB,CAAwB1D,OAAxB,EAAiCkC,GAAjC,C;;;AAAhByB,uB;AACN;AACMF,0B,kFAAkBE,O;AAASnB,oBAAE,EAAEmB,OAAO,CAACJ,G;AAAKd,uBAAK,EAAEzC;;kDAClD;AAAE0B,sBAAI,EAAE,CAAC+B,UAAD;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGWvB,G;;;;;;;uBACIzD,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,MAAtB,EAA8B,gBAA9B,EAAgD;AACpEE,sBAAI,EAAEQ;AAD8D,iBAAhD,C;;;AAAhByB,uB;AAGAF,0B,kFAAkBE,O,EAAYA,OAAO,CAACH,U;AAAYhB,oBAAE,EAAEmB,OAAO,CAACJ;;kDAC7D;AAAE7B,sBAAI,EAAE,CAAC+B,UAAD;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGWvB,G;;;;;;;uBACAzD,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAChB,MADgB,2BAEEU,GAAG,CAACqB,GAFN,a;;;AAAZK,mB;AAKAH,0B,kFAAkBG,G,EAAQA,GAAG,CAACJ,U;AAAYhB,oBAAE,EAAEoB,GAAG,CAACL;;kDACjD;AAAE7B,sBAAI,EAAE,CAAC+B,UAAD;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGYvB,G;;;;;;;uBACGzD,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBmC,gBAAjB,CACpB3B,GAAG,CAACO,KADgB,EAEpBP,GAAG,CAACM,EAFgB,EAGpBN,GAHoB,C;;;AAAhB4B,uB;kDAMC;AAAEpC,sBAAI,EAAE,CAAC,+EAAKQ,GAAN;AAAW6B,wBAAI,EAAED,OAAO,CAACC;AAAzB;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGY7B,G;;;;;;uBACSzD,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBsC,MAAjB,CAAwB9B,GAAG,CAACO,KAA5B,EAAmCP,GAAnC,C;;;kDAErB;AAAER,sBAAI,EAAE,CAACQ,GAAD;AAAR,iB;;;;;;;;;;;;;;;;;;;;;gGAGWA,G;;;;;;uBACZzD,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,QAAtB,2BAAkDU,GAAG,CAACqB,GAAtD,E;;;mDACC;AAAE7B,sBAAI,EAAE,CAACQ,GAAD;AAAR,iB;;;;;;;;;;;;;;;;;;gCAGGlC,O,EAAS8C,M,EAAQ;AAC3B,aAAOrE,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBuC,WAAjB,CAA6BjE,OAA7B,EAAsC8C,MAAtC,CAAP;AACD;;;;;;gGAEqBoB,I;;;;;;;;uBAECzF,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkBe,UAAlB,CAA6BD,IAA7B,C;;;AAAbE,oB;mDAEC;AAAE1C,sBAAI,EAAE,CAAC2C,aAAa,CAACD,IAAD,CAAd;AAAR,iB;;;;;mDAEA,I;;;;;;;;;;;;;;;;;;;;;gGAIMA,I,EAAME,K;;;;;;;uBACC7F,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkBM,MAAlB,CAAyBU,IAAzB,EAA+B;AAAEE,uBAAK,EAALA;AAAF,iBAA/B,C;;;AAAhBX,uB;mDAEC;AAAEjC,sBAAI,EAAE,CAAC2C,aAAa,CAACV,OAAD,CAAd;AAAR,iB;;;;;;;;;;;;;;;;;;;;;gGAGOS,I;;;;;AACd;AAAsB3F,oBAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkBmB,SAAlB,CAA4BH,IAAI,CAAC5B,EAAjC,E,CACtB;;mDACO;AAAEd,sBAAI,EAAE,CAAC0C,IAAD;AAAR,iB;;;;;;;;;;;;;;;;;;;;;gGAGkBlC,G;;;;;;;;;;;;AAAKX,oB,iEAAO,C;AACrC;AACMkC,0B,kFAAkBvB,G;AAAKqB,qBAAG,EAAErB,GAAG,CAACM;oBACtC;AACA;AACA;;;uBACiC/D,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiB8C,oBAAjB,CAC/Bf,UAD+B,EAE/B;AACElC,sBAAI,EAAJA,IADF;AAEE2B,uBAAK,EAAE/B;AAFT,iBAF+B,C;;;;AAAzBsD,wB,SAAAA,Q;AAAU9C,oB,SAAAA,I;mDAQX;AACLD,sBAAI,EAAE,CAAC+C,QAAD,GACF,EADE,GAEFA,QAAQ,CAACpC,GAAT,CAAa,UAAA+B,IAAI;AAAA,0GACZA,IADY,EAEZA,IAAI,CAACZ,UAFO;AAGff,2BAAK,EAAE;AAHQ;AAAA,mBAAjB,CAHC;AAQLd,sBAAI,EAAJA,IARK;AASLC,sBAAI,EAAED,IAAI,CAACE,KAAL,GAAaN,IAAI,GAAGJ,WATrB;AAULI,sBAAI,EAAJA;AAVK,iB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcaA,oB,iEAAO,C;;uBACE9C,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAC3B,KAD2B,kBAG3B,IAH2B,EAI3B;AACEC,gCAAc,EAAE;AADlB,iBAJ2B,C;;;;AAArBC,oB,SAAAA,I;AAAMC,oB,SAAAA,I;mDASP;AACLD,sBAAI,EAAEA,IAAI,GACNA,IAAI,CAACW,GAAL,CAAS,UAAA3E,SAAS;AAAA,0GACbA,SADa,EAEbA,SAAS,CAAC8F,UAFG;AAGhBf,2BAAK,EAAE;AAHS;AAAA,mBAAlB,CADM,GAMN,EAPC;AAQLd,sBAAI,EAAEA,IARD;AASLJ,sBAAI,EAAJA,IATK;AAULK,sBAAI,EAAE,CAAC,CAACD,IAAF,IAAUA,IAAI,CAACE,KAAL,GAAaN,IAAI,GAAGJ;AAV/B,iB;;;;;;;;;;;;;;;;;;;;;gGAcWuD,M;;;;;;;;;;;AAAQnD,oB,iEAAO,C;;uBACJ9C,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAC3B,KAD2B,kCAEFkD,MAFE,GAG3B,IAH2B,EAI3B;AACEjD,gCAAc,EAAE;AADlB,iBAJ2B,C;;;;AAArBC,oB,SAAAA,I;AAAMC,oB,SAAAA,I;mDASP;AACLD,sBAAI,EAAEA,IAAI,GACNA,IAAI,CAACW,GAAL,CAAS,UAAApF,OAAO;AAAA,0GACXA,OADW,EAEXA,OAAO,CAACuG,UAFG;AAGdf,2BAAK,EAAE;AAHO;AAAA,mBAAhB,CADM,GAMN,EAPC;AAQLd,sBAAI,EAAEA,IARD;AASLJ,sBAAI,EAAJA,IATK;AAULK,sBAAI,EAAE,CAAC,CAACD,IAAF,IAAUA,IAAI,CAACE,KAAL,GAAaN,IAAI,GAAGJ;AAV/B,iB;;;;;;;;;;;;;;;;;;;;;gGAcgBe,G,EAAKyC,G;;;;;;uBACtBlG,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBkD,kBAAjB,CAAoC1C,GAApC,EAAyCyC,GAAzC,C;;;mDACCA,G;;;;;;;;;;;;;;;;;;;;;gGAGmBzC,G,EAAKyC,G;;;;;;AAC/B;AACMlB,0B,kFAAkBvB,G;AAAKqB,qBAAG,EAAErB,GAAG,CAACM;;;uBAChC/D,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiBmD,qBAAjB,CAAuCpB,UAAvC,EAAmDkB,GAAnD,C;;;mDACCA,G;;;;;;;;;;;;;;;;;;;;;gGAGqB3E,O;;;;;;AACtB8E,gC,GAAmB,SAAnBA,gBAAmB,CAAC9E,OAAD,EAAU+E,WAAV;AAAA,yBACvBtG,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CACE,KADF,iCAE0BxB,OAF1B,cAEqC+E,WAFrC,EADuB;AAAA,iB;;;uBAMND,gBAAgB,CAAC9E,OAAD,EAAUsB,kBAAV,C;;;AAA7B0D,oB;;uBACeF,gBAAgB,CAAC9E,OAAD,EAAUoB,cAAV,C;;;AAA/B6D,sB;;uBACeH,gBAAgB,CAAC9E,OAAD,EAAUqB,cAAV,C;;;AAA/B6D,sB;mDAEC;AAAEF,sBAAI,EAAJA,IAAF;AAAQC,wBAAM,EAANA,MAAR;AAAgBC,wBAAM,EAANA;AAAhB,iB;;;;;;;;;;;;;;;;;;iCAGI1C,E,EAAI;AACf,aAAO/D,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,KAAtB,sBAA0CgB,EAA1C,EAAP;AACD;;;kCAEa2C,W,EAAaC,U,EAAYL,W,EAAaM,W,EAAa;AAC/D,aAAO5G,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,MAAtB,EAA8B,YAA9B,EAA4C;AACjD8D,YAAI,EAAED,WAD2C;AAEjDF,mBAAW,EAAXA,WAFiD;AAGjDI,kBAAU,EAAEH,UAAU,CAAC/C,GAAX,CAAe,UAAAmD,SAAS;AAAA,iBAAK;AACvCC,qBAAS,EAAE;AACTjD,gBAAE,EAAEgD,SADK;AAET5E,kBAAI,EAAE;AAFG;AAD4B,WAAL;AAAA,SAAxB,CAHqC;AASjD8E,oBAAY,EAAEX;AATmC,OAA5C,CAAP;AAWD;;;kCAEaY,S,EAAW;AACvB,aAAOlH,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,QAAtB,sBAA6CmE,SAA7C,EAAP;AACD;;;2CAEsBA,S,EAAWC,Q,EAAU;AAC1C,aAAOnH,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CACL,QADK,sBAEQmE,SAFR,wBAE+BC,QAF/B,EAAP;AAID;;;sCAEiBT,W,EAAa;AAC7B,aAAO1G,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,MAAtB,8BAA0D;AAC/DE,YAAI,EAAE;AACJd,cAAI,EAAE,qBADF;AAEJ4C,oBAAU,EAAE;AACV2B,uBAAW,EAAXA;AADU;AAFR;AADyD,OAA1D,CAAP;AAQD;;;sCAEiBU,U,EAAY;AAC5B,aAAOpH,IAAI,CAACkB,MAAL,CAAY6B,SAAZ,CAAsB,QAAtB,yBAAgDqE,UAAU,CAACtC,GAA3D,EAAP;AACD;;;;;;;;AAGH,IAAMc,aAAa,GAAG,SAAhBA,aAAgB,CAAAD,IAAI;AAAA,wFAAUA,IAAV,EAAmBA,IAAI,CAACZ,UAAxB;AAAoChB,MAAE,EAAE4B,IAAI,CAACb;AAA7C;AAAA,CAA1B,C;;;;;;;ACpUA,e;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,IAAMuC,OAAO,GAAG,kBAAhB;AACP,IAAMC,oBAAoB,GAAG,UAA7B;AAEO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAC3BC,yEAAe,CAACF,oBAAD,EAAuBD,OAAvB,CADY;AAAA,CAAtB,C,CAGP;;AACO,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAAClJ,KAAD,EAAQwF,EAAR,EAAe;AACvC,MAAI,CAACxF,KAAK,CAACmJ,SAAP,IAAoB,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAzB,EAAmD;AACjD,WAAO,IAAP;AACD;;AAED,SAAO9I,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,EAAyBtD,EAAzB,CAAP;AACD,CANM;AAQA,IAAM4D,MAAM,GAAG,SAATA,MAAS,CAAApJ,KAAK;AAAA,SACzB;AACA;AACA;AACA;AACA;AACA;AACCA,SAAK,CAACmJ,SAAN,IACCnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CADD,IAECxD,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAZ,CAFF,IAGA;AAVyB;AAAA,CAApB,C;;;;;;;ACjBP,e;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEO,IAAMQ,4BAA4B,GAAG;AAC1C;AACAC,MAAI,EAAE,cAAAxJ,KAAK;AAAA,WACT;AAAG,UAAI,EAAEA,KAAK,CAACyJ,IAAf;AAAqB,SAAG,EAAC,qBAAzB;AAA+C,YAAM,EAAC;AAAtD,OACGzJ,KAAK,CAAC0J,QADT,CADS;AAAA;AAF+B,CAArC;AASA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,MAAGC,MAAH,QAAGA,MAAH;AAAA,SAClC,2DAAC,qDAAD;AAAe,UAAM,EAAEA,MAAvB;AAA+B,aAAS,EAAEL;AAA1C,IADkC;AAAA,CAA7B;AAIQI,mFAAf,E;;;;;;;AChBA;AACA,kBAAkB,qqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDlB;AACA;AACA;AACA;AACA;CAIA;;AACA,IAAME,eAAe,GAAG,kBAAxB;AACA,IAAMC,gBAAgB,GAAG,kBAAzB;AACA,IAAMC,YAAY,GAAG,cAArB;AAEO,IAAMC,kBAAkB,GAAG,oBAA3B;AACA,IAAMC,cAAc,GAAG,gBAAvB;AACA,IAAMC,WAAW,GAAG,aAApB;AACA,IAAMC,YAAY,GAAG,cAArB;AACA,IAAMC,oBAAoB,GAAG,sBAA7B;AACA,IAAMC,wBAAwB,GAAG,0BAAjC;AACA,IAAMC,gCAAgC,GAC3C,kCADK;AAEA,IAAMC,uBAAuB,GAAG,yBAAhC;AACA,IAAMC,yBAAyB,GAAG,2BAAlC;AACA,IAAMC,uBAAuB,GAAG,yBAAhC,C,CAEP;;AACA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAxK,OAAO;AAAA,SACpCA,OAAO,IAAIA,OAAO,CAACgB,OAAnB,IAA8BhB,OAAO,CAACgB,OAAR,CAAgBP,SAA/C,IAA6D,IADxB;AAAA,CAAvC;;AAGA,IAAMgK,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAxF,GAAG;AAAA,SAC5BA,GAAG,CAACO,KAAJ,KAAcoE,gBAAd,IAAkC,CAAC,CAAC3E,GAAG,CAACjE,OAAxC,IAAmD,CAAC,CAACiE,GAAG,CAACjE,OAAJ,CAAYP,SADrC;AAAA,CAA9B;;AAGA,IAAMiK,cAAc,GAAG,SAAjBA,cAAiB,CAAAzF,GAAG;AAAA,SACxBA,GAAG,CAACO,KAAJ,KAAcqE,YAAd,IAA8B5E,GAAG,CAACwC,MAAJ,KAAe,WADrB;AAAA,CAA1B,C,CAGA;;;AACA,IAAMhE,OAAO,GAAG,SAAVA,OAAU,GAAwB;AAAA,MAAvB1D,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AACtC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKmG,kBAAL;AACA,SAAKO,uBAAL;AACA,SAAKD,gCAAL;AACA,SAAKL,cAAL;AACE;AACA,UAAI,CAACrG,MAAM,CAAC1D,OAAR,IAAmB,CAAC0D,MAAM,CAAC1D,OAAP,CAAesG,GAAvC,EACE,MAAM,IAAIqE,KAAJ,CAAU,oBAAV,CAAN;AACF,UAAI,CAACjH,MAAM,CAAC1D,OAAP,CAAegB,OAAhB,IAA2B,CAAC0C,MAAM,CAAC1D,OAAP,CAAegB,OAAf,CAAuBP,SAAvD,EACE,MAAM,IAAIkK,KAAJ,CAAU,2BAAV,CAAN;AACF,4FACK5K,KADL,mFAEGyK,uBAAuB,CAAC9G,MAAM,CAAC1D,OAAR,CAF1B,EAE6C4K,gBAAgB,CACzD7K,KAAK,CAACyK,uBAAuB,CAAC9G,MAAM,CAAC1D,OAAR,CAAxB,CADoD,EAEzD0D,MAFyD,CAF7D;;AAQF,SAAKuG,YAAL;AACA,SAAKC,oBAAL;AACE,UACE,CAACxG,MAAM,CAAC2C,QAAR,IACA,CAAC3C,MAAM,CAAC2C,QAAP,CAAgB5B,IADjB,IAEA,CAACf,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqBoG,MAHxB,EAIE;AACA,eAAO9K,KAAP;AACD;;AAED,aAAO2D,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqBqG,MAArB,CAA4B,UAACC,QAAD,EAAW9F,GAAX,EAAmB;AACpD,YAAM+F,SAAS,GAAGP,kBAAkB,CAACxF,GAAD,CAApC;AACA,YAAMgG,KAAK,GAAGP,cAAc,CAACzF,GAAD,CAA5B,CAFoD,CAGpD;;AACA,YAAI,CAAC+F,SAAD,IAAc,CAACC,KAAnB,EAA0B,OAAOF,QAAP;AAC1B,YAAMG,aAAa,GAAGjG,GAAG,CAACjE,OAAJ,CAAYP,SAAlC;AACA,YAAM0K,SAAS,GAAIH,SAAS,IAAI/F,GAAG,CAACqB,GAAlB,IAA2B2E,KAAK,IAAIhG,GAAG,CAACmG,UAA1D;AACA,YAAI,CAACD,SAAL,EAAgB,OAAOJ,QAAP;AAEhB,YAAMvK,OAAO,GAAGwK,SAAS,IAAI,CAAC,CAAC/F,GAAG,CAACjE,OAAnB,IAA8BiE,GAAG,CAACjE,OAAJ,CAAYR,OAA1D;AAEA,YAAM6K,aAAa,GAChBL,SAAS,IAAK/F,GAAG,CAACqG,aAAJ,IAAqBrG,GAAG,CAACqG,aAAJ,CAAkBC,MAAtD,IACCN,KAAK,IAAIhG,GAAG,CAAClF,KAFhB;AAIA,YAAMyL,KAAK,GACRR,SAAS,IACR,CAAC,CAAC/F,GAAG,CAACqG,aADP,IAECrG,GAAG,CAACqG,aAAJ,CAAkBC,MAAlB,KAA6B,MAF9B,IAGC,CAAC,CAACtG,GAAG,CAACqG,aAAJ,CAAkBG,UAHrB,IAICC,0EAAmB,CAACzG,GAAG,CAACqG,aAAJ,CAAkBG,UAAnB,CAJrB,IAKCR,KAAK,IAAI,CAAC,CAAChG,GAAG,CAACuG,KAAf,IAAwBE,0EAAmB,CAACzG,GAAG,CAACuG,KAAL,CAL5C,IAMA,IAPF;AASA,YAAMG,YAAY,GACfX,SAAS,IACR,CAAC,CAAC/F,GAAG,CAACqG,aADP,IAECrG,GAAG,CAACqG,aAAJ,CAAkBM,cAFpB,IAGCX,KAAK,IAAIhG,GAAG,CAAC4G,SAJhB;AAKA,YAAMC,gBAAgB,GAAGC,iDAAG,CAC1BhB,QAD0B,EAE1B,CAACG,aAAD,EAAgB,UAAhB,EAA4B,MAA5B,CAF0B,EAG1B,EAH0B,CAA5B;AAKA,YAAIc,WAAW,GAAGF,gBAAlB;;AAEA,YAAId,SAAJ,EAAe;AACbgB,qBAAW,GAAGF,gBAAgB,CAAC/G,MAAjB,CAAwB;AAAA,gBAAGuB,GAAH,QAAGA,GAAH;AAAA,mBAAaA,GAAG,KAAKrB,GAAG,CAACqB,GAAzB;AAAA,WAAxB,CAAd;AACA0F,qBAAW,CAACC,IAAZ,CAAiBhH,GAAjB;AACD;;AACD,8FACK8F,QADL,mFAEGG,aAFH,EAEmB;AACfgB,kBAAQ,EAAE,+EACLH,iDAAG,CAAChB,QAAD,EAAW,CAACG,aAAD,EAAgB,UAAhB,CAAX,EAAwC,EAAxC,CADA;AAENzG,gBAAI,EAAEuH;AAFA,aAGLb,SAHK,iFAIDY,iDAAG,CAAChB,QAAD,EAAW,CAACG,aAAD,EAAgB,UAAhB,EAA4BC,SAA5B,CAAX,EAAmD,EAAnD,CAJF;AAKJ3K,mBAAO,EACLA,OAAO,IACPuL,iDAAG,CAAChB,QAAD,EAAW,CACZG,aADY,EAEZ,UAFY,EAGZC,SAHY,EAIZ,SAJY,CAAX,CAPD;AAaJK,iBAAK,EAALA,KAbI;AAcJW,oBAAQ,EAAE,CAAC,CAACX,KAAF,IAAWH,aAAa,KAAK,SAdnC;AAeJe,qBAAS,EAAE,CAAC,QAAD,EAAW,SAAX,EAAsBC,QAAtB,CAA+BhB,aAA/B,CAfP;AAgBJiB,uBAAW,EAAE,CAACd,KAAD,IAAUH,aAAa,KAAK,MAhBrC;AAiBJM,wBAAY,EAAEA;AAjBV;AADO,SAFnB;AAyBD,OAjEM,EAiEJ5L,KAjEI,CAAP;;AAmEF,SAAKiK,WAAL;AACA,SAAKG,wBAAL;AACE,aAAO9E,MAAM,CAAC+D,IAAP,CAAYrJ,KAAZ,EAAmB+K,MAAnB,CAA0B,UAACyB,UAAD,EAAa7K,IAAb,EAAsB;AACrD,8FACK6K,UADL,mFAEG7K,IAFH,EAEUkJ,gBAAgB,CAAC7K,KAAK,CAAC2B,IAAD,CAAN,EAAcgC,MAAd,CAF1B;AAID,OALM,EAKJ3D,KALI,CAAP;;AAOF;AACE,aAAOA,KAAP;AAzGJ;AA2GD,CA5GD;;AA8GA,IAAMyM,QAAQ,GAAG,SAAXA,QAAW,GAA0B;AAAA,MAAzBzM,KAAyB,uEAAjB,IAAiB;AAAA,MAAX2D,MAAW;;AACzC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKsG,YAAL;AACA,SAAKC,oBAAL;AAA2B;AACzB,YAAI,CAACnK,KAAL,EAAY,OAAO,IAAP;;AACZ,YACE,CAAC2D,MAAM,CAAC2C,QAAR,IACA,CAAC3C,MAAM,CAAC2C,QAAP,CAAgB5B,IADjB,IAEAf,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqBoG,MAArB,KAAgC,CAHlC,EAIE;AACA,iBAAO9K,KAAP;AACD;;AAED,YAAMkF,GAAG,GAAGvB,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqB,CAArB,CAAZ;AACA,YAAMgI,SAAS,GAAGxH,GAAG,CAACO,KAAJ,KAAcmE,eAAhC;AAEA,YAAI8C,SAAJ,EACE,OAAO,+EACF1M,KADL;AAEES,iBAAO,EAAEyE,GAAG,CAACqB;AAFf;AAKF,YAAM0E,SAAS,GAAGP,kBAAkB,CAACxF,GAAD,CAApC;AACA,YAAI+F,SAAJ,EACE,OAAO,+EACFjL,KADL;AAEEC,iBAAO,EAAEiF,GAAG,CAACqB;AAFf;AAKF,eAAOvG,KAAP;AACD;;AACD,SAAKuK,yBAAL;AACE;AACA;AACA;AACA;AACA,aAAO,EAAP;;AACF,SAAKC,uBAAL;AACE,aAAO,IAAP;;AACF;AACE,aAAOxK,KAAP;AAvCJ;AAyCD,CA1CD;;AA4Ce2M,4HAAe,CAAC;AAC7BF,UAAQ,EAARA,QAD6B;AAE7BD,YAAU,EAAE9I;AAFiB,CAAD,CAA9B,E,CAKA;;AACA,IAAMmH,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAwB;AAAA,MAAvB7K,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKmG,kBAAL;AACA,SAAKC,cAAL;AACA,SAAKE,YAAL;AACA,SAAKC,oBAAL;AACA,SAAKC,wBAAL;AACA,SAAKH,WAAL;AACE;AACA,4FACKjK,KADL;AAEEmM,gBAAQ,EAAES,eAAe,CAAC5M,KAAK,CAACmM,QAAP,EAAiBxI,MAAjB;AAF3B;;AAIF;AACE,aAAO3D,KAAP;AAbJ;AAeD,CAhBD;;AAkBA,IAAM4M,eAAe,GAAG,SAAlBA,eAAkB,GAAwB;AAAA,MAAvB5M,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AAC9C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKmG,kBAAL;AACE,4FACK/J,KADL,mFAEG2D,MAAM,CAAC1D,OAAP,CAAesG,GAFlB,iFAGOvG,KAAK,CAAC2D,MAAM,CAAC1D,OAAP,CAAesG,GAAhB,CAHZ;AAIIsG,kBAAU,EAAE;AAJhB;;AAOF,SAAK7C,cAAL;AACE,4FACKhK,KADL,mFAEG2D,MAAM,CAAC1D,OAAP,CAAesG,GAFlB,iFAGOvG,KAAK,CAAC2D,MAAM,CAAC1D,OAAP,CAAesG,GAAhB,CAHZ;AAII9F,eAAO,EAAEkD,MAAM,CAAC1D,OAAP,CAAegB,OAAf,CAAuBR,OAJpC;AAKI4L,iBAAS,EAAE;AALf;;AAQF,SAAKpC,WAAL;AACE,aAAOjK,KAAK,GACRsF,MAAM,CAAC+D,IAAP,CAAYrJ,KAAZ,EAAmB+K,MAAnB,CAA0B,UAACC,QAAD,EAAWI,SAAX,EAAyB;AACjD,8FACKJ,QADL,mFAEGI,SAFH,iFAGOJ,QAAQ,CAACI,SAAD,CAHf;AAIIyB,oBAAU,EAAE;AAJhB;AAOD,OARD,EAQG7M,KARH,CADQ,GAURA,KAVJ;;AAWF,SAAKoK,wBAAL;AAA+B;AAAA,YACrB1F,IADqB,GACZf,MAAM,CAAC2C,QADK,CACrB5B,IADqB;AAAA,qBAENA,IAAI,CAAC,CAAD,CAFE;AAAA,YAErB6B,GAFqB,UAErBA,GAFqB;AAAA,YAEhBd,KAFgB,UAEhBA,KAFgB;;AAG7B,YAAIA,KAAK,KAAKoE,gBAAd,EAAgC;AAC9B,iBAAOiD,kDAAI,CAAC9M,KAAD,EAAQuG,GAAR,CAAX;AACD,SAFD,MAEO,OAAOvG,KAAP;AACR;;AACD;AACE,aAAOA,KAAP;AAtCJ;AAwCD,CAzCD,C,CA2CA;;;AACO,IAAM+M,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA9M,OAAO;AAAA,SAAK;AAC3C2D,QAAI,EAAEmG,kBADqC;AAE3C9J,WAAO,EAAPA;AAF2C,GAAL;AAAA,CAAjC;AAKA,IAAM+M,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAO;AAC/BpJ,QAAI,EAAEqG;AADyB,GAAP;AAAA,CAAnB;AAIA,IAAMgD,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACvM,SAAD,EAAYD,OAAZ,EAAqBgL,KAArB;AAAA,SAAgC;AACnE7H,QAAI,EAAE0G,uBAD6D;AAEnE5J,aAAS,EAATA,SAFmE;AAGnED,WAAO,EAAPA,OAHmE;AAInEgL,SAAK,EAALA;AAJmE,GAAhC;AAAA,CAA9B;AAOA,IAAMyB,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAxM,SAAS;AAAA,SAAK;AACnDkD,QAAI,EAAE2G,yBAD6C;AAEnD7J,aAAS,EAATA;AAFmD,GAAL;AAAA,CAAzC;AAKA,IAAMyM,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,SAAO;AAC1CvJ,QAAI,EAAE4G;AADoC,GAAP;AAAA,CAA9B,C,CAIP;;AACO,IAAM4C,yBAAyB,GAAG,SAA5BA,yBAA4B,CACvCpN,KADuC,EAEvCmL,aAFuC,EAKpC;AAAA,MAFHkC,aAEG,uEAFa,EAEb;AAAA,MADHC,eACG,uEADe,EACf;AACH,MAAMC,gBAAgB,GACpB,CAACD,eAAe,CAACxC,MAAjB,IAA2BwC,eAAe,CAAChB,QAAhB,CAAyBnB,aAAzB,CAD7B;AAEA,MAAMqC,uBAAuB,GAC3BxN,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,KACA7F,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAA5C,EAAsDrB,MAFxD;AAGA,MAAI,CAACyC,gBAAD,IAAqB,CAACC,uBAA1B,EAAmD,OAAO,EAAP;AAEnD,SAAOlI,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAA9C,EAAwDnH,MAAxD,CACL,UAAA/E,OAAO;AAAA,WAAIoN,aAAa,CAACf,QAAd,CAAuBrM,OAAO,CAACQ,OAA/B,CAAJ;AAAA,GADF,CAAP;AAGD,CAhBM;AAkBA,IAAMiN,aAAa,GAAG,SAAhBA,aAAgB,CAAC1N,KAAD,EAAQmL,aAAR,EAA0B;AACrD,MAAMwC,uBAAuB,GAC3B,CAAC,CAAC3N,KAAK,CAACwM,UAAR,IACA,CAAC,CAACxM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,CADF,IAEA,CAAC,CAACnL,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAFlC,IAGA7G,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAA9C,EAAwDnI,IAAxD,CACE,UAAA/D,OAAO;AAAA,WAAI,CAAC,CAACA,OAAO,CAACwL,KAAd;AAAA,GADT,CAJF;AAOA,SAAOkC,uBAAuB,GAAGA,uBAAuB,CAAClC,KAA3B,GAAmC,IAAjE;AACD,CATM;AAWA,IAAMmC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC5N,KAAD,EAAQmL,aAAR,EAA0B;AACzD,MAAM0C,2BAA2B,GAC/B,CAAC,CAAC7N,KAAK,CAACwM,UAAR,IACA,CAAC,CAACxM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,CADF,IAEA,CAAC,CAACnL,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAFlC,IAGA7G,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAA9C,EAAwDnI,IAAxD,CAA6D,UAAA/D,OAAO;AAAA,WAClE6N,2EAAoB,CAAC7N,OAAO,CAACwL,KAAT,CAD8C;AAAA,GAApE,CAJF;AAOA,SAAOoC,2BAA2B,GAAGA,2BAA2B,CAACpC,KAA/B,GAAuC,IAAzE;AACD,CATM;AAWA,IAAMsC,eAAe,GAAG,SAAlBA,eAAkB,CAAC/N,KAAD,EAAQmL,aAAR,EAA0B;AACvD,MAAM6C,cAAc,GAClB,CAAC,CAAChO,KAAK,CAACwM,UAAR,IACA,CAAC,CAACxM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,CADF,IAEA,CAAC,CAACnL,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAFlC,IAGA7G,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAA9C,EACG9G,GADH,CACO,UAAApF,OAAO;AAAA,WAAIA,OAAO,CAAC2L,YAAZ;AAAA,GADd,EAEG7F,IAFH,CAEQ,UAACkI,KAAD,EAAQC,KAAR,EAAkB;AACtB,QAAMC,OAAO,GAAGC,6CAAM,CAACC,GAAP,CAAWJ,KAAX,CAAhB;AACA,QAAMK,OAAO,GAAGF,6CAAM,CAACC,GAAP,CAAWH,KAAX,CAAhB;AACA,WAAOC,OAAO,CAACI,OAAR,CAAgBD,OAAhB,IAA2B,CAAC,CAA5B,GAAgCH,OAAO,CAACK,QAAR,CAAiBF,OAAjB,IAA4B,CAA5B,GAAgC,CAAvE;AACD,GANH,CAJF;AAWA,SAAON,cAAc,CAAClD,MAAf,IAAyBkD,cAAc,CAAC,CAAD,CAA9C;AACD,CAbM,C,CAeP;;AACA,IAAMS,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAxO,OAAO,EAAI;AACvC,MAAIA,OAAO,CAACoM,SAAZ,EAAuB,OAAO,SAAP;AACvB,MAAIpM,OAAO,CAACmM,QAAZ,EAAsB,OAAO,OAAP;AACtB,MAAInM,OAAO,CAACsM,WAAZ,EAAyB,OAAO,MAAP;AACzB,SAAO,SAAP;AACD,CALD;;AAOO,IAAMmC,QAAQ,GAAG,SAAXA,QAAW,CAAC1O,KAAD,EAAQwM,UAAR;AAAA,SACtB;AACAxM,SAAK,CAACwM,UAAN,GACIlH,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACwM,UAAlB,EAA8BzB,MAA9B,CACE,UAAC4D,iBAAD,EAAoBxD,aAApB,EAAsC;AACpC,UAAMgB,QAAQ,GAAGnM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAAjD;AACA,UAAI,CAACA,QAAL,EAAe,OAAOwC,iBAAP;AACf,UAAMjO,SAAS,GAAG8L,UAAU,CAACrB,aAAD,CAA5B;AACA,aAAOwD,iBAAiB,CAACC,MAAlB,CACLtJ,MAAM,CAAC+D,IAAP,CAAY8C,QAAZ,EAAsBpB,MAAtB,CAA6B,UAAC8D,cAAD,EAAiBzD,SAAjB,EAA+B;AAC1D,YAAIe,QAAQ,CAACf,SAAD,CAAR,CAAoByB,UAAxB,EAAoC;AAClC,cAAMiC,KAAK,GAAGpO,SAAS,CAACU,IAAxB;AACA,cAAMoK,MAAM,GAAGiD,qBAAqB,CAACtC,QAAQ,CAACf,SAAD,CAAT,CAApC;AACA,iBAAOyD,cAAc,CAACD,MAAf,CAAsB;AAC3BlO,qBAAS,EAATA,SAD2B;AAE3BoO,iBAAK,EAALA,KAF2B;AAG3BtD,kBAAM,EAANA,MAH2B;AAI3BJ,qBAAS,EAATA;AAJ2B,WAAtB,CAAP;AAMD;;AAED,eAAOyD,cAAP;AACD,OAbD,EAaG,EAbH,CADK,CAAP;AAgBD,KArBH,EAsBE,EAtBF,CADJ,GAyBI;AA3BkB;AAAA,CAAjB;AA6BA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC/O,KAAD,EAAQC,OAAR;AAAA,SAChC+O,eAAe,CAAChP,KAAD,EAAQC,OAAR,CAAf,CAAgCwL,KADA;AAAA,CAA3B;AAGA,IAAMwD,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAjP,KAAK;AAAA,SACpC,CAAC,CAACA,KAAK,CAACyM,QAAR,IAAoBzM,KAAK,CAACyM,QAAN,CAAehM,OADC;AAAA,CAA/B;AAGA,IAAMyO,iCAAiC,GAAG,SAApCA,iCAAoC,CAC/ClP,KAD+C,EAE/CU,SAF+C,EAG/CD,OAH+C;AAAA,MAI/C4M,aAJ+C,uEAI/B,EAJ+B;AAAA,SAM/C,CAAC,CAAC3M,SAAF,IACA,CAAC,CAACD,OADF,IAEA4M,aAAa,CAACf,QAAd,CAAuB7L,OAAO,CAAC8F,GAA/B,CAFA,IAGA,CAAC,CAACvG,KAAK,CAACwM,UAAN,CAAiB9L,SAAS,CAACiB,IAA3B,CAHF,IAIA2D,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACwM,UAAN,CAAiB9L,SAAS,CAACiB,IAA3B,EAAiCwK,QAA7C,EAAuDnI,IAAvD,CACE,UAAAoH,SAAS;AAAA,WACPpL,KAAK,CAACwM,UAAN,CAAiB9L,SAAS,CAACiB,IAA3B,EAAiCwK,QAAjC,CAA0Cf,SAA1C,EAAqD3K,OAArD,KACAA,OAAO,CAAC8F,GAFD;AAAA,GADX,CAV+C;AAAA,CAA1C;AAgBA,IAAM4I,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACnP,KAAD,EAAQC,OAAR,EAAoB;AACvD,MAAMmP,OAAO,GAAGC,oEAAiB,CAACrP,KAAD,EAAQC,OAAR,CAAjC;AACA,MAAMqP,gBAAgB,GAAGF,OAAO,IAAIA,OAAO,CAACpP,KAAR,KAAkB,MAAtD;AACA,MAAIsP,gBAAJ,EAAsB,OAAOF,OAAO,CAACG,UAAf;AACtB,SACE,CAAC,CAACtP,OAAF,IAAa,CAAC,CAACA,OAAO,CAACsL,aAAvB,IAAwCtL,OAAO,CAACsL,aAAR,CAAsBiE,YADhE;AAGD,CAPM,C,CASP;;AACA,IAAMR,eAAe,GAAG,SAAlBA,eAAkB,CAAChP,KAAD,EAAQC,OAAR,EAAoB;AAC1C,MAAMkL,aAAa,GAAGV,uBAAuB,CAACxK,OAAD,CAA7C;AACA,MAAI,CAACkL,aAAD,IAAkB,CAACnL,KAAK,CAACwM,UAAzB,IAAuC,CAACxM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,CAA5C,EACE,OAAO,KAAP;AACF,MAAMgB,QAAQ,GAAGnM,KAAK,CAACwM,UAAN,CAAiBrB,aAAjB,EAAgCgB,QAAjD;AACA,MAAI,CAACA,QAAL,EAAe,OAAO,KAAP;AACf,SAAQ,CAAC,CAACA,QAAF,IAAc,CAAC,CAACA,QAAQ,CAAClM,OAAO,CAACsG,GAAT,CAAxB,IAAyC4F,QAAQ,CAAClM,OAAO,CAACsG,GAAT,CAAlD,IAAoE,EAA3E;AACD,CAPD;;AASO,IAAMkJ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAzP,KAAK;AAAA,SAAI,CAAC,CAACA,KAAK,CAACyM,QAAZ;AAAA,CAAlC;AAEA,IAAMiD,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC1P,KAAD,EAAQC,OAAR;AAAA,SACnC+O,eAAe,CAAChP,KAAD,EAAQC,OAAR,CAAf,CAAgCsM,WADG;AAAA,CAA9B;AAGA,IAAMoD,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC3P,KAAD,EAAQC,OAAR;AAAA,SAClC+O,eAAe,CAAChP,KAAD,EAAQC,OAAR,CAAf,CAAgC4M,UADE;AAAA,CAA7B;AAGA,IAAM+C,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC5P,KAAD,EAAQC,OAAR;AAAA,SACjC+O,eAAe,CAAChP,KAAD,EAAQC,OAAR,CAAf,CAAgCoM,SADC;AAAA,CAA5B,C;;;;;;;ACzaP,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAMwD,YAAY,GAAG,SAAfA,YAAe;AAAA,SACnB;AAAK,aAAS,EAAE1O,oEAAM,CAAC,kCAAD;AAAtB,KACE;AAAK,OAAG,EAAE2O,qFAAV;AAA0B,aAAS,EAAE3O,oEAAM,CAAC,0BAAD;AAA3C,IADF,CADmB;AAAA,CAArB;;AAMA,IAAM4O,YAAY,GAAG,SAAfA,YAAe;AAAA,MAAGtG,QAAH,QAAGA,QAAH;AAAA,SACnB;AAAG,aAAS,EAAEuG,iDAAU,CAAC7O,oEAAM,CAAC,2BAAD,CAAP,EAAsC,WAAtC;AAAxB,KACGsI,QADH,CADmB;AAAA,CAArB;;AAMA,IAAMwG,SAAS,GAAGrO,qEAAS,GAAG;AAAA,MAAGsO,QAAH,SAAGA,QAAH;AAAA,MAAalP,CAAb,SAAaA,CAAb;AAAA,SAC5B,2DAAC,qEAAD;AACE,YAAQ,EAAEkP,QADZ;AAEE,SAAK,EAAElP,CAAC,CAAC,+BAAD;AAFV,IAD4B;AAAA,CAAH,CAA3B;AAOA,IAAMmP,aAAa,GAAGvO,qEAAS,GAAG;AAAA,MAAG6H,QAAH,SAAGA,QAAH;AAAA,SAChC;AAAK,aAAS,EAAEtI,oEAAM,CAAC,2BAAD;AAAtB,KACE;AAAK,aAAS,EAAEA,oEAAM,CAAC,kCAAD;AAAtB,KAA6DsI,QAA7D,CADF,CADgC;AAAA,CAAH,CAA/B;AAMO,IAAM2G,gBAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wCACsB;AAClB,UAAI,OAAO,KAAKrQ,KAAL,CAAWsQ,uBAAlB,KAA8C,UAAlD,EAA8D;AAC5D,aAAKtQ,KAAL,CAAWsQ,uBAAX;AACD;AACF;AALH;AAAA;AAAA,6BAOW;AAAA;;AAAA,wBACqC,KAAKtQ,KAD1C;AAAA,UACCU,OADD,eACCA,OADD;AAAA,UACUgL,KADV,eACUA,KADV;AAAA,UACiB6E,KADjB,eACiBA,KADjB;AAAA,UACwBC,QADxB,eACwBA,QADxB;AAEP,UAAMC,WAAW,GAAGC,oDAAM,CACxBnL,MAAM,CAACmI,MAAP,CAAc2C,gBAAgB,CAACvM,IAA/B,EAAqCmB,MAArC,CAA4C,UAAAf,GAAG;AAAA,eAC7CA,GAAG,CAACyM,SAAJ,CAAc,KAAI,CAAC3Q,KAAnB,CAD6C;AAAA,OAA/C,CADwB,EAIxB,UAAAkE,GAAG;AAAA,eAAI,CAACA,GAAG,CAAC0M,QAAT;AAAA,OAJqB,CAA1B;AAOA,UAAMC,QAAQ,GAAGJ,WAAW,CAAC1F,MAAZ,GAAqB,CAAtC;AAEA,aACErK,OAAO,IACL;AAAK,iBAAS,EAAEU,oEAAM,CAAC,qBAAD;AAAtB,SACG,CAACsK,KAAD,IAAU,2DAAC,YAAD,OADb,EAEE,2DAAC,sEAAD;AACE,aAAK,EAAE,CAACA,KAAD,IAAU6E,KADnB;AAEE,gBAAQ,EAAE,CAAC7E,KAAD,IAAU8E;AAFtB,SAIGK,QAAQ,IACP,2DAAC,YAAD,QACGJ,WAAW,CAACnL,GAAZ,CAAgB,UAACpB,GAAD,EAAM4M,CAAN;AAAA,eACf;AACA5M,aAAG,CAAC6M,WAAJ,CAAgB,KAAI,CAAC/Q,KAArB,EAA4B,KAAI,CAACgR,OAAjC,EAA0CF,CAA1C;AAFe;AAAA,OAAhB,CADH,CALJ,CAFF,EAgBE,2DAAC,aAAD,QACGL,WAAW,CAAC1F,MAAZ,GAAqB,CAArB,GACG;AACA0F,iBAAW,CAAC,CAAD,CAAX,CAAeQ,UAAf,CAA0B,KAAKjR,KAA/B,EAAsC,KAAKgR,OAA3C,CAFH,GAGG,IAJN,CAhBF,CAFJ;AA2BD;AA7CH;;AAAA;AAAA,EAAsC1P,+CAAtC;AAgDA+O,gBAAgB,CAACvM,IAAjB,GAAwB;AACtBoN,OAAK,EAAE;AACLN,YAAQ,EAAE,CADL;AAEL;AACAD,aAAS,EAAE,mBAAA3Q,KAAK,EAAI;AAClB,UAAME,OAAO,GAAGF,KAAK,CAACE,OAAtB;AACA,UAAMiR,GAAG,GAAGC,iDAAG,CAAClR,OAAD,EAAU,wBAAV,CAAf;AACA,aAAOiR,GAAP;AACD,KAPI;AAQL;AACAJ,eAAW,EAAE,qBAAC/Q,KAAD,EAAQgR,OAAR,EAAiBF,CAAjB,EAAuB;AAClC,aACE,2DAAC,SAAD;AAAW,WAAG,EAAEA,CAAhB;AAAmB,gBAAQ,EAAE9Q,KAAK,CAACE,OAAN,CAAcgB,OAAd,CAAsBC;AAAnD,QADF;AAGD,KAbI;AAcL;AACA8P,cAAU,EAAE,oBAAAjR,KAAK,EAAI;AAAA,UACXiB,CADW,GACgCjB,KADhC,CACXiB,CADW;AAAA,UACRJ,MADQ,GACgCb,KADhC,CACRa,MADQ;AAAA,UACAH,OADA,GACgCV,KADhC,CACAU,OADA;AAAA,UACSM,kBADT,GACgChB,KADhC,CACSgB,kBADT;AAEnB,aACE,2DAAC,6DAAD;AACE,aAAK,EAAEA,kBAAkB,IAAIC,CAAC,CAAC,wBAAD,CADhC;AAEE,eAAO,EAAE,iBAAAoQ,KAAK,EAAI;AAChBA,eAAK,CAACC,cAAN;AACAzQ,gBAAM,CAACH,OAAD,CAAN;AACD;AALH,QADF;AASD;AA1BI,GADe;AA8BtB6Q,OAAK,EAAE;AACLX,YAAQ,EAAE,CADL;AAEL;AACAD,aAAS,EAAE,mBAAA3Q,KAAK,EAAI;AAClB,UAAM2B,SAAS,GAAG3B,KAAK,CAAC2B,SAAxB;AACA,aACE6P,KAAK,CAACC,OAAN,CAAc9P,SAAS,CAAC+P,UAAxB,KACA/P,SAAS,CAAC+P,UAAV,CAAqBnF,QAArB,CAA8B,cAA9B,CAFF;AAID,KATI;AAUL;AACAwE,eAAW,EAAE,qBAAC/Q,KAAD,EAAQgR,OAAR,EAAiBF,CAAjB,EAAuB;AAClC,aAAO,2DAAC,6DAAD;AAAW,WAAG,EAAEA,CAAhB;AAAmB,gBAAQ,EAAEE,OAAO,CAACW,KAAR,CAAcC;AAA3C,QAAP;AACD,KAbI;AAcLX,cAAU,EAAE;AAAA,aAAM,IAAN;AAAA;AAdP;AA9Be,CAAxB;AAgDAZ,gBAAgB,CAACwB,YAAjB,GAAgC;AAC9BF,OAAK,EAAEG,iDAAS,CAACC;AADa,CAAhC;AAIA1B,gBAAgB,CAAC2B,SAAjB,GAA6B;AAC3BtR,SAAO,EAAEoR,iDAAS,CAACC,MAAV,CAAiBE,UADC;AAE3BvG,OAAK,EAAEoG,iDAAS,CAACI,MAFU;AAG3B3B,OAAK,EAAEuB,iDAAS,CAACI,MAAV,CAAiBD,UAHG;AAI3BzB,UAAQ,EAAEsB,iDAAS,CAACK,OAAV,CAAkBL,iDAAS,CAACI,MAA5B,CAJiB;AAK3BrR,QAAM,EAAEiR,iDAAS,CAACM,IAAV,CAAeH,UALI;AAM3BjR,oBAAkB,EAAE8Q,iDAAS,CAACI,MANH;AAO3BhS,SAAO,EAAE4R,iDAAS,CAACC,MAAV,CAAiBE;AAPC,CAA7B;AAUA;AAEepQ,oIAAS,GAAGwO,gBAAH,CAAxB,E;;;;;;;ACxJA,e;;;;;;;ACAA,e;;;;;;;;;;;;;;ACAA,e;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACO,IAAMgC,WAAW,GAAG;AACzBC,iBAAe,EAAE,iBADQ;AAEzBC,cAAY,EAAE,cAFW;AAGzBC,aAAW,EAAE,aAHY;AAIzBC,wBAAsB,EAAE,wBAJC;AAKzBC,oBAAkB,EAAE,oBALK;AAMzBC,aAAW,EAAE,aANY;AAOzBC,qBAAmB,EAAE;AAPI,CAApB;AAUA,IAAMC,0BAA0B,GAAG;AACxCC,wBAAsB,EAAE;AADgB,CAAnC;AAIA,IAAMC,aAAa,GAAG,CAC3B,kCAD2B,EAE3B,qCAF2B,CAAtB;;AAKP,SAASC,qBAAT,CAA+BtR,IAA/B,EAAqCf,SAArC,EAAiE;AAAA,MAAjBwP,QAAiB,uEAAN,IAAM;AAC/D,MAAMvO,IAAI,GAAGjB,SAAS,CAAC8F,UAAV,GAAuB9F,SAAS,CAAC8F,UAAV,CAAqB7E,IAA5C,GAAmDjB,SAAS,CAACiB,IAA1E;AACA,MAAMqR,UAAU,GAAG9C,QAAQ,GACvB;AAAEtM,QAAI,EAAE,eAAR;AAAyB6J,UAAM,EAAE,CAACyC,QAAD;AAAjC,GADuB,GAEvB,EAFJ;AAIA,SAAOzO,IAAI,CAAC+C,SAAL,CACL,OADK,oCAEsByO,kBAAkB,CAACtR,IAAD,CAFxC,GAGL;AACE+C,QAAI,EAAE;AACJ8B,gBAAU,EAAE;AACV2B,mBAAW,EAAE;AACX6K,oBAAU,EAAEA;AADD;AADH;AADR;AADR,GAHK,CAAP;AAaD;;AAEM,SAASE,mBAAT,CAA6BzR,IAA7B,EAAmCf,SAAnC,EAA8CwP,QAA9C,EAAwD;AAC7D,SAAO6C,qBAAqB,CAACtR,IAAD,EAAOf,SAAP,EAAkBwP,QAAlB,CAA5B;AACD;AAEM,SAASiD,qBAAT,CAA+B1H,KAA/B,EAAsC;AAC3C,SAAOA,KAAK,IAAIA,KAAK,CAAC7H,IAAf,IAAuB6H,KAAK,CAAC7H,IAAN,KAAewO,WAAW,CAACE,YAAzD;AACD;AAEM,SAASc,qBAAT,CAA+B3H,KAA/B,EAAsC;AAC3C,SAAOA,KAAK,IAAIA,KAAK,CAAC7H,IAAf,IAAuBkP,aAAa,CAACxG,QAAd,CAAuBb,KAAK,CAAC4H,IAA7B,CAA9B;AACD;AAEM,SAASvF,oBAAT,CAA8BrC,KAA9B,EAAqC;AAC1C,SACEA,KAAK,IACLA,KAAK,CAAC7H,IADN,IAEA,CACEwO,WAAW,CAACC,eADd,EAEED,WAAW,CAACO,mBAFd,EAGEP,WAAW,CAACE,YAHd,EAIEF,WAAW,CAACI,sBAJd,EAKEJ,WAAW,CAACK,kBALd,EAMEnG,QANF,CAMWb,KAAK,CAAC7H,IANjB,CAHF;AAWD;AAEM,SAAS0P,qBAAT,CAA+B7H,KAA/B,EAAsC;AAC3C,SAAOA,KAAK,IAAIA,KAAK,CAAC7H,IAAf,IAAuB0B,MAAM,CAAC+D,IAAP,CAAY+I,WAAZ,EAAyB9F,QAAzB,CAAkCb,KAAK,CAAC7H,IAAxC,CAA9B;AACD;AAEM,SAAS2P,4BAAT,CAAsC9H,KAAtC,EAA6C;AAClD,SACEA,KAAK,IACLA,KAAK,CAAC7H,IADN,IAEA0B,MAAM,CAAC+D,IAAP,CAAYuJ,0BAAZ,EAAwCtG,QAAxC,CAAiDb,KAAK,CAAC7H,IAAvD,CAHF;AAKD;AAEM,SAAS+H,mBAAT,CAA6B1K,OAA7B,EAAsC;AAC3C,MAAIwK,KAAK,GAAG,IAAIb,KAAJ,CAAU3J,OAAV,CAAZ;AACAwK,OAAK,CAAC7H,IAAN,GAAa3C,OAAO,CAACuS,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAb;AACA/H,OAAK,CAAC4H,IAAN,GAAapS,OAAb;AACA,SAAOwK,KAAP;AACD;;AAED,IAAMgI,WAAW,GAAG,SAAdA,WAAc,CAACzS,CAAD,EAAI0S,GAAJ,EAAY;AAC9B,SAAO1S,CAAC,CAAC0S,GAAD,CAAD,KAAWA,GAAlB;AACD,CAFD;;AAIO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAjT,SAAS,EAAI;AAC3C,SAAO,CAAC,CAACA,SAAS,CAACkT,iBAAnB;AACD,CAFM;AAIA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC7S,CAAD,EAAIyK,KAAJ,EAAmC;AAAA,MAAxBqI,MAAwB,uEAAf,UAAAJ,GAAG;AAAA,WAAIA,GAAJ;AAAA,GAAY;AACxE;AACA,MAAI,CAACjI,KAAK,CAAC4H,IAAX,EAAiB,OAAO5H,KAAK,CAACxK,OAAb;AAEjB,MAAM8S,aAAa,GAAGtI,KAAK,CAAC4H,IAAN,CAAWG,KAAX,CAAiB,GAAjB,CAAtB;AAEA,MAAIQ,MAAM,GAAGD,aAAb;AACA,MAAIE,OAAO,GAAGH,MAAM,CAACE,MAAM,CAACE,IAAP,CAAY,GAAZ,CAAD,CAApB;;AAEA,SAAOF,MAAM,CAAClJ,MAAP,IAAiB,CAAC2I,WAAW,CAACzS,CAAD,EAAIiT,OAAJ,CAApC,EAAkD;AAChDD,UAAM,GAAGA,MAAM,CAACG,KAAP,CAAa,CAAb,EAAgBH,MAAM,CAAClJ,MAAP,GAAgB,CAAhC,CAAT;AACAmJ,WAAO,GAAGH,MAAM,CAACE,MAAM,CAACE,IAAP,CAAY,GAAZ,CAAD,CAAhB;AACD;;AAED,SAAOF,MAAM,CAAClJ,MAAP,GAAgBmJ,OAAhB,GAA0BH,MAAM,CAAC,eAAD,CAAvC;AACD,CAfM;AAiBP,IAAMM,cAAc,GAAG;AACrBC,OAAK,EAAE;AADc,CAAvB;AAIO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACtT,CAAD,EAAIN,SAAJ,EAAeO,OAAf,EAA2B;AAAA,MACpDsP,QADoD,GACtB7P,SADsB,CACpD6P,QADoD;AAAA,MAC1CgE,eAD0C,GACtB7T,SADsB,CAC1C6T,eAD0C;AAG5D,MAAMC,eAAe,GACnBjE,QAAQ,IAAIA,QAAQ,CAACzF,MAArB,IAA+ByF,QAAQ,CAACjE,QAAT,CAAkBrL,OAAlB,CADjC;AAEA,MAAIuT,eAAJ,EAAqB,OAAOxT,CAAC,WAAIN,SAAS,CAACiB,IAAd,uBAA+BV,OAA/B,EAAR;AAErB,MAAMwT,qBAAqB,GACzBF,eAAe,IAAIA,eAAe,CAACH,cAAc,CAACnT,OAAD,CAAd,IAA2BA,OAA5B,CADpC;AAEA,MAAIwT,qBAAJ,EACE,OAAOzT,CAAC,qBACON,SAAS,CAACiB,IADjB,0BACqCyS,cAAc,CAACnT,OAAD,CAAd,IACzCA,OAFI,EAAR;AAKF,SAAO,IAAP;AACD,CAhBM,C;;;;;;;ACnHP;AACA,kBAAkB,6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDlB;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;;;;IAGMyT,S;;;;;;;;;;;;;6BACK;AAAA,wBACqB,KAAK3U,KAD1B;AAAA,UACC4U,SADD,eACCA,SADD;AAAA,UACYnL,IADZ,eACYA,IADZ;AAEP,aAAOA,IAAI,GACT;AAAG,iBAAS,EAAEmL,SAAd;AAAyB,YAAI,EAAEnL,IAA/B;AAAqC,cAAM,EAAC;AAA5C,SACG,KAAKzJ,KAAL,CAAW0J,QADd,CADS,GAKT;AAAM,iBAAS,EAAEkL;AAAjB,SAA6B,KAAK5U,KAAL,CAAW0J,QAAxC,CALF;AAOD;;;;EAVqBmL,mD;;AAajB,IAAMC,iBAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,+BAE8C,KAAK9U,KAFnD,EAEY4C,MAFZ,gBAEYA,MAFZ,EAEoBmS,QAFpB,gBAEoBA,QAFpB,EAE8BhR,WAF9B,gBAE8BA,WAF9B;;AAAA,oBAGSgR,QAHT;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAI6BnS,MAAM,CAAC0D,KAAP,CAAa1D,MAAM,CAACoS,GAAP,CAAW,cAAX,CAAb,CAJ7B;;AAAA;AAAA;AAIcrQ,oBAJd,QAIcA,IAJd;AAKMZ,2BAAW,CAACY,IAAD,CAAX;;AALN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BASW;AAAA,yBAC+B,KAAK3E,KADpC;AAAA,UACC+U,QADD,gBACCA,QADD;AAAA,UACWhG,KADX,gBACWA,KADX;AAAA,UACkBoB,QADlB,gBACkBA,QADlB;AAEP,UAAM8E,QAAQ,GAAG,CAACF,QAAlB;AACA,aACE,2DAAC,SAAD;AACE,iBAAS,EAAE9E,iDAAU,CAAC7O,qEAAM,CAAC,yBAAD,CAAP,EAAoC;AACvD,sBAAY6T,QAD2C;AAEvD,6BAAmBA;AAFoC,SAApC,CADvB;AAKE,YAAI,EAAEF,QAAQ,cAAOA,QAAQ,CAACG,KAAT,CAAeC,OAAtB,qBAAwChF,QAAxC;AALhB,SAOE,2DAAC,2DAAD;AAAM,iBAAS,EAAC,WAAhB;AAA4B,YAAI,EAAC;AAAjC,QAPF,EAQGpB,KARH,CADF;AAYD;AAxBH;;AAAA;AAAA,EAAuC8F,mDAAvC;;AA2BA,IAAMtT,eAAe,GAAG,SAAlBA,eAAkB,CAAAtB,KAAK;AAAA,SAAK;AAChC8U,YAAQ,EAAE/Q,0DAAM,CAAC/D,KAAK,CAAC6D,IAAP,EAAa,OAAb;AADgB,GAAL;AAAA,CAA7B;;AAIA,IAAMsR,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAjS,QAAQ,EAAI;AACrC,SAAO;AACLY,eAAW,EAAE,qBAAAD,IAAI;AAAA,aAAIX,QAAQ,CAACY,+DAAW,CAACD,IAAD,CAAZ,CAAZ;AAAA;AADZ,GAAP;AAGD,CAJD;;AAMehC,0HAAO,CACpBP,eADoB,EAEpB6T,kBAFoB,CAAP,CAGbC,+DAAU,CAACP,iBAAD,CAHG,CAAf,E;;;;;;;AC/DA;AACA,kBAAkB,gJ;;;;;;;;;;;;;;;ACDlB;AAAA;AAAA;AAEA,IAAMQ,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,SACEC,MAAM,CAACC,OAAP,KAAmB/R,SAAnB,IAAgC8R,MAAM,CAACC,OAAP,CAAeC,YAAf,KAAgChS,SADlE;AAGD,CAJD;;AAMA,IAAMiS,kBAAkB,GAAG,oBAA3B;AAEO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAC,GAAG,EAAI;AAC5C,MAAIN,gBAAgB,EAApB,EAAwB;AACtB,WAAO,IAAIO,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAMC,MAAM,GAAG,QAAf;AACA,UAAMvT,OAAO,GAAG,wBAAhB;AACA,UAAMwT,YAAY,GAAGV,MAAM,CAACC,OAAP,CAAeC,YAAf,CAA4BS,IAA5B,CACnBN,GADmB,EAEnBI,MAFmB,EAGnBvT,OAHmB,CAArB;;AAMA,UAAM0T,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BF,oBAAY,CAACG,mBAAb,CAAiC,WAAjC,EAA8CC,WAA9C;AACAJ,oBAAY,CAACG,mBAAb,CAAiC,MAAjC,EAAyCE,MAAzC;AACD,OAHD;;AAKA,UAAMD,WAAW,GAAG,SAAdA,WAAc,OAAa;AAAA,YAAVT,GAAU,QAAVA,GAAU;AAC/B,YAAMW,UAAU,GAAG,sBAAsBC,IAAtB,CAA2BZ,GAA3B,CAAnB;AACA,YAAM3V,KAAK,GAAG,gBAAgBuW,IAAhB,CAAqBZ,GAArB,CAAd;;AAEA,YAAIW,UAAU,IAAItW,KAAlB,EAAyB;AACvB6V,iBAAO,CAACF,GAAD,CAAP;AACAO,wBAAc;AACdF,sBAAY,CAACQ,KAAb;AACD;AACF,OATD;;AAWA,UAAMH,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBP,cAAM,CAAC,IAAIlL,KAAJ,CAAU6K,kBAAV,CAAD,CAAN;AACAS,sBAAc;AACdF,oBAAY,CAACQ,KAAb;AACD,OAJD;;AAMAR,kBAAY,CAACS,gBAAb,CAA8B,WAA9B,EAA2CL,WAA3C;AACAJ,kBAAY,CAACS,gBAAb,CAA8B,MAA9B,EAAsCJ,MAAtC;AACD,KAjCM,CAAP;AAkCD,GAnCD,MAmCO;AACL;;;;;;;;;;AAUA,WAAO,IAAIT,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5Ba,gBAAU,CAAC,YAAM;AACf,YAAMC,KAAK,GAAGC,MAAM,CAAC,qBAAD,CAApB;AACAf,eAAO,CAACc,KAAD,CAAP;AACD,OAHS,EAGP,KAHO,CAAV;AAID,KALM,CAAP;AAMD;AACF,CAtDM,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVP;AACA;;IAEqBE,Y;;;;;;;;;;;;;sCAwBD;AAChB,aAAO;AACLC,cAAM,EAAE,KAAK/W,KAAL,CAAW+W,MADd;AAELC,cAAM,EAAE,KAAKhX,KAAL,CAAWgX,MAFd;AAGLrF,aAAK,EAAE,KAAK3R,KAAL,CAAW2R,KAAX,IAAoB,KAAKX,OAAL,CAAaW,KAHnC;AAIL/O,cAAM,EAAE,KAAK5C,KAAL,CAAW4C;AAJd,OAAP;AAMD;;;6BAEQ;AACP,aAAO,KAAK5C,KAAL,CAAW0J,QAAX,IAAuB,IAA9B;AACD;;;;EAnCuCpI,+C;;6EAArBwV,Y,eACA;AACjBC,QAAM,EAAEjF,iDAAS,CAACI,MADD;AAEjB8E,QAAM,EAAElF,iDAAS,CAACmF,IAFD;AAGjBtF,OAAK,EAAEG,iDAAS,CAACoF,KAAV,CAAgB;AACrBC,aAAS,EAAErF,iDAAS,CAACM,IAAV,CAAeH,UADL;AAErB9O,YAAQ,EAAE2O,iDAAS,CAACM,IAAV,CAAeH,UAFJ;AAGrBmF,YAAQ,EAAEtF,iDAAS,CAACM,IAAV,CAAeH;AAHJ,GAAhB,CAHU;AAQjBrP,QAAM,EAAEkP,iDAAS,CAACC,MAAV,CAAiBE,UARR;AASjBvI,UAAQ,EAAEoI,iDAAS,CAACuF,OAAV,CAAkBpF;AATX,C;;6EADA6E,Y,uBAaQ;AACzBC,QAAM,EAAEjF,iDAAS,CAACI,MADO;AAEzB8E,QAAM,EAAElF,iDAAS,CAACmF,IAFO;AAGzBtF,OAAK,EAAEG,iDAAS,CAACC,MAHQ;AAIzBnP,QAAM,EAAEkP,iDAAS,CAACC,MAAV,CAAiBE;AAJA,C;;6EAbR6E,Y,kBAoBG;AACpBnF,OAAK,EAAEG,iDAAS,CAACC;AADG,C;;;;;;;;;;;;;;;;;;;;;;ACvBxB;AACA;CAGA;;AACA,IAAMuF,OAAO,GAAG,SAAVA,OAAU,OAA+B;AAAA,MAA5B1U,MAA4B,QAA5BA,MAA4B;AAAA,MAAjB2U,UAAiB;;AAC7C,MAAM5U,OAAO,GAAG,IAAI6U,GAAJ,CAAQ5U,MAAM,CAAC6U,cAAP,GAAwBC,GAAhC,CAAhB;AACA,MAAMX,MAAM,GAAGpU,OAAO,CAACgV,IAAvB;AACA,MAAMX,MAAM,GAAGrU,OAAO,CAACiV,QAAR,KAAqB,QAApC;AACA,SAAO,2DAAC,6DAAD;AAAe,UAAM,EAAEb,MAAvB;AAA+B,UAAM,EAAEC;AAAvC,KAAmDO,UAAnD,EAAP;AACD,CALD;;AAOelC,6HAAU,CAACiC,OAAD,CAAzB,E;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEO,IAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,OAO5B;AAAA,MANJC,gBAMI,QANJA,gBAMI;AAAA,MALJvH,KAKI,QALJA,KAKI;AAAA,MAJJC,QAII,QAJJA,QAII;AAAA,MAHJ9G,QAGI,QAHJA,QAGI;AAAA,MAFJ2C,QAEI,QAFJA,QAEI;AAAA,MADJ0L,WACI,QADJA,WACI;AACJ,SACE;AAAK,aAAS,EAAE9H,iDAAU,CAAC6H,gBAAD;AAA1B,KACGvH,KAAK,IACJ;AACE,aAAS,EACPwH,WAAW,GACP3W,qEAAM,CAAC,wCAAD,CADC,GAEPA,qEAAM,CAAC,+BAAD;AAJd,KAOGmP,KAPH,CAFJ,EAYGC,QAAQ,IACPA,QAAQ,CAACzF,MAAT,GAAkB,CADnB,IAECyF,QAAQ,CAAClL,GAAT,CAAa,UAAC0S,CAAD,EAAIlH,CAAJ,EAAU;AACrB,WAAOkH,CAAC,GACN;AACE,SAAG,EAAElH,CADP;AAEE,eAAS,EAAEb,iDAAU,CACnB7O,qEAAM,CAAC,iCAAD,CADa,EAEnBiL,QAAQ,IAAI,QAFO;AAFvB,OAOE,2DAAC,uEAAD;AAAsB,YAAM,EAAE2L;AAA9B,MAPF,CADM,GAUJ,IAVJ;AAWD,GAZD,CAdJ,EA2BGtO,QA3BH,CADF;AA+BD,CAvCM;AAyCQmO,iFAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CA;AACA;AACA;AAKA;AAEA,IAAMI,YAAY,GAAG,cAArB;AACA,IAAMC,cAAc,GAAG,gBAAvB;AACA,IAAMC,gBAAgB,GAAG,kBAAzB;AACA,IAAMlO,cAAc,GAAG,gBAAvB;AACA,IAAME,YAAY,GAAG,cAArB;AACA,IAAMiO,aAAa,GAAG,eAAtB;AACO,IAAMC,eAAe,GAAG,iBAAxB;AACP,IAAMC,eAAe,GAAG,iBAAxB;AACA,IAAMC,eAAe,GAAG,iBAAxB;AACA,IAAMC,WAAW,GAAG,aAApB;AACA,IAAMpO,oBAAoB,GAAG,sBAA7B;AACA,IAAMqO,wBAAwB,GAAG,0BAAjC;AACA,IAAMpO,wBAAwB,GAAG,0BAAjC;AACA,IAAMqO,sBAAsB,GAAG,wBAA/B;AACA,IAAMC,oBAAoB,GAAG,sBAA7B;AACA,IAAMC,uBAAuB,GAAG,yBAAhC;;AAEA,IAAMxP,SAAS,GAAG,SAAZA,SAAY,GAAwB;AAAA,MAAvBnJ,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AACxC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK2U,WAAL;AAAkB;AAChB,YAAM1U,IAAI,GAAGF,MAAM,CAAC2C,QAAP,IAAmB3C,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhD;AACA,YAAIb,IAAI,CAACiH,MAAL,KAAgB,CAApB,EAAuB,OAAO9K,KAAP;AACvB,8FACKA,KADL,mFAEGgY,YAFH,iFAGOhY,KAAK,CAACgY,YAAD,CAHZ,EAIOY,uBAAuB,CAAC/U,IAAD,CAJ9B;AAOD;;AACD,SAAKqG,YAAL;AAAmB;AAAA,YACTxF,IADS,GACAf,MAAM,CAAC2C,QADP,CACT5B,IADS;AAEjB,YAAIA,IAAI,CAACoG,MAAL,KAAgB,CAApB,EAAuB,OAAO9K,KAAP;AACvB,YAAM6Y,WAAW,GAAGC,eAAe,CAACpU,IAAD,CAAnC;AACA,8FACK1E,KADL,mFAEG6Y,WAFH,iFAGO7Y,KAAK,CAAC6Y,WAAD,CAHZ,EAIOD,uBAAuB,CAAClU,IAAD,CAJ9B;AAOD;;AACD,SAAKyF,oBAAL;AACA,SAAKqO,wBAAL;AAA+B;AAC7B,YAAMtT,GAAG,GAAGvB,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqB,CAArB,CAAZ;AACA,8FACK1E,KADL,mFAEGkF,GAAG,CAACO,KAFP,iFAGOzF,KAAK,CAACkF,GAAG,CAACO,KAAL,CAHZ,mFAIKP,GAAG,CAACM,EAJT,EAIcN,GAJd;AAOD;;AACD,SAAKkF,wBAAL;AAA+B;AAC7B,YAAM2O,OAAO,GAAGpV,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqB,CAArB,CAAhB;AACA,8FACK1E,KADL,mFAEG+Y,OAAO,CAACtT,KAFX,EAEmBuT,mEAAoB,CAAChZ,KAAK,CAAC+Y,OAAO,CAACtT,KAAT,CAAN,EAAuBsT,OAAO,CAACvT,EAA/B,CAFvC;AAID;;AACD,SAAKkT,oBAAL;AACE,4FACK1Y,KADL;AAEE,wGACKA,KAAK,CAAC,eAAD,CADV,EAEKiZ,qBAAqB,CACtBjZ,KAAK,CAAC,eAAD,CADiB,EAEtB2D,MAAM,CAACgE,GAFe,EAGtBhE,MAAM,CAACuV,QAHe,CAF1B;AAFF;;AAWF,SAAKP,uBAAL;AACE,4FACK3Y,KADL;AAEE,wGACKA,KAAK,CAAC,eAAD,CADV,EAEKmZ,qBAAqB,CACtBnZ,KAAK,CAAC,eAAD,CADiB,EAEtB2D,MAAM,CAACgE,GAFe,EAGtBhE,MAAM,CAACuV,QAHe,CAF1B;AAFF;;AAWF;AACE,aAAOlZ,KAAP;AAnEJ;AAqED,CAtED;;AAwEA,IAAM4Y,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAzP,SAAS;AAAA,SACvCA,SAAS,CAAC4B,MAAV,CAAiB,UAACqO,GAAD,EAAMlU,GAAN;AAAA,0FAAoBkU,GAApB,mFAA0BlU,GAAG,CAACM,EAA9B,EAAmCN,GAAnC;AAAA,GAAjB,EAA4D,EAA5D,CADuC;AAAA,CAAzC;;AAGA,IAAMmU,mBAAmB,GAAG,SAAtBA,mBAAsB;AAC1B;AAD0B,MAG1BnU,GAH0B;AAAA,gCAExBoU,aAFwB;AAAA,MAEPC,aAFO,sBAEPA,aAFO;AAAA,MAEWD,aAFX;AAAA,MAE+BlS,IAF/B;;AAAA,wFAKvBA,IALuB;AAM1BkS,iBAAa,EAAE,+EACVA,aADQ,mFAGVC,aAAa,CAAC7U,IAHJ;AAIT;AACA6U,iBAAa,CAAC7U,IAAd,KAAuB,IAAvB,GACI,CAAC;AAAEc,QAAE,EAAEN,GAAG,CAACM,EAAV;AAAc5B,UAAI,EAAEsB,GAAG,CAACtB;AAAxB,KAAD,CADJ;AAEI;AAFJ,8FAGQ2V,aAAa,CAAC7U,IAHtB,IAG4B;AAAEc,QAAE,EAAEN,GAAG,CAACM,EAAV;AAAc5B,UAAI,EAAEsB,GAAG,CAACtB;AAAxB,KAH5B,EALS;AANa;AAAA,CAA5B;;AAkBA,IAAMqV,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC7S,KAAD,EAAQoT,kBAAR,EAA4BtU,GAA5B;AAAA,SAC5BsU,kBAAkB,CAACzO,MAAnB,CACE,UAACjE,OAAD,EAAUtB,EAAV;AAAA,0FACKsB,OADL,mFAEGtB,EAFH,EAEQ6T,mBAAmB,CAACjT,KAAK,CAACZ,EAAD,CAAN,EAAYN,GAAZ,CAF3B;AAAA,GADF,EAKE,EALF,CAD4B;AAAA,CAA9B;;AASA,IAAMuU,oBAAoB,GAAG,SAAvBA,oBAAuB;AAC3B;AAD2B,OAG3BvU,GAH2B;AAAA,kCAEzBoU,aAFyB;AAAA,MAERC,aAFQ,uBAERA,aAFQ;AAAA,MAEUD,aAFV;AAAA,MAE8BlS,IAF9B;;AAAA,wFAKxBA,IALwB;AAM3BkS,iBAAa,EAAE,+EACVA,aADQ,mFAGVC,aAAa,CAAC7U,IAHJ,EAGW6U,aAAa,CAAC7U,IAAd,CAAmBM,MAAnB,CACpB,UAAA0U,GAAG;AAAA,aAAIA,GAAG,CAAC9V,IAAJ,KAAasB,GAAG,CAACtB,IAAjB,IAAyB8V,GAAG,CAAClU,EAAJ,KAAWN,GAAG,CAACM,EAA5C;AAAA,KADiB,CAHX;AANc;AAAA,CAA7B;;AAeA,IAAM2T,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC/S,KAAD,EAAQuT,UAAR,EAAoBzU,GAApB;AAAA,SAC5ByU,UAAU,CAAC5O,MAAX,CACE,UAACjE,OAAD,EAAUtB,EAAV;AAAA,0FACKsB,OADL,mFAEGtB,EAFH,EAEQiU,oBAAoB,CAACrT,KAAK,CAACZ,EAAD,CAAN,EAAYN,GAAZ,CAF5B;AAAA,GADF,EAKE,EALF,CAD4B;AAAA,CAA9B;;AASA,IAAM0U,UAAU,GAAG,SAAbA,UAAa,QAAwB;AAAA,MAAd5W,OAAc,SAArByC,KAAqB;;AACzC;AACA,MAAIzC,OAAO,KAAK,MAAhB,EAAwB;AACtB,WAAO,eAAP;AACD;;AACD,SAAOA,OAAP;AACD,CAND;;AAQA,IAAM8V,eAAe,GAAG,SAAlBA,eAAkB,CAAA3P,SAAS;AAAA,SAAIyQ,UAAU,CAACzQ,SAAS,CAAC,CAAD,CAAV,CAAd;AAAA,CAAjC,C,CAEA;;;AACA,IAAM0Q,sBAAsB,GAAG;AAC7BjW,MAAI,EAAE,IADuB;AAE7BpB,SAAO,EAAE,EAFoB;AAG7BsX,aAAW,EAAE,SAHgB;AAI7BC,WAAS,EAAE,IAJkB;AAK7BC,SAAO,EAAE,KALoB;AAM7BnV,OAAK,EAAE,CANsB;AAO7B8C,KAAG,EAAE;AAPwB,CAA/B;;AAUA,IAAMsS,UAAU,GAAG,SAAbA,UAAa,GAA4C;AAAA,MAA3Cja,KAA2C,uEAAnC6Z,sBAAmC;AAAA,MAAXlW,MAAW;;AAC7D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKsU,gBAAL;AACA,SAAKO,sBAAL;AACE,4FACKzY,KADL;AAEE4D,YAAI,EAAED,MAAM,CAACX,OAAP,IAAkB,eAF1B;AAGER,eAAO,EAAEmB,MAAM,CAACnB,OAHlB;AAIEsX,mBAAW,EAAEnW,MAAM,CAACY,IAAP,GAAc,CAAd,GAAkB,aAAlB,GAAkC;AAJjD;;AAMF,SAAKgU,WAAL;AACA,SAAKrO,YAAL;AAAmB;AACjB,YAAM5D,QAAQ,GAAG3C,MAAM,CAAC2C,QAAxB;AACA,8FACKtG,KADL;AAEE8Z,qBAAW,EAAE,QAFf;AAGEC,mBAAS,EAAEG,IAAI,CAACC,GAAL,EAHb;AAIEH,iBAAO,EAAE1T,QAAQ,CAAC1B,IAAT,KAAkBpB,SAAlB,GAA8B8C,QAAQ,CAAC1B,IAAvC,GAA8C5E,KAAK,CAACga,OAJ/D;AAKEnV,eAAK,EACHyB,QAAQ,CAAC3B,IAAT,IAAiB2B,QAAQ,CAAC3B,IAAT,CAAcE,KAA/B,GACIyB,QAAQ,CAAC3B,IAAT,CAAcE,KADlB,GAEIyB,QAAQ,CAAC5B,IAAT,CAAcoG,MARtB;AASEnD,aAAG,EAAE,CAAChE,MAAM,CAACY,IAAR,GACD+B,QAAQ,CAAC5B,IAAT,CAAcW,GAAd,CAAkB,UAAAH,GAAG;AAAA,mBAAIA,GAAG,CAACM,EAAR;AAAA,WAArB,CADC,6FAEGxF,KAAK,CAAC2H,GAFT,mFAEiBrB,QAAQ,CAAC5B,IAAT,CAAcW,GAAd,CAAkB,UAAAH,GAAG;AAAA,mBAAIA,GAAG,CAACM,EAAR;AAAA,WAArB,CAFjB;AATP;AAaD;;AACD,SAAKkT,oBAAL;AACE,4FACK1Y,KADL;AAEE4D,YAAI,EAAE,eAFR;AAGEiB,aAAK,EAAE7E,KAAK,CAAC6E,KAAN,GAAclB,MAAM,CAACgE,GAAP,CAAWmD,MAHlC;AAIEnD,WAAG,4FAAM3H,KAAK,CAAC2H,GAAZ,mFAAoBhE,MAAM,CAACgE,GAA3B;AAJL;;AAMF,SAAKgR,uBAAL;AACE,4FACK3Y,KADL;AAEE6E,aAAK,EAAE7E,KAAK,CAAC6E,KAAN,GAAclB,MAAM,CAACgE,GAAP,CAAWmD,MAFlC;AAGEnD,WAAG,EAAE3H,KAAK,CAAC2H,GAAN,CAAU3C,MAAV,CAAiB,UAAAQ,EAAE;AAAA,iBAAI7B,MAAM,CAACgE,GAAP,CAAWyS,OAAX,CAAmB5U,EAAnB,MAA2B,CAAC,CAAhC;AAAA,SAAnB;AAHP;;AAKF,SAAK2S,aAAL;AACE,4FACKnY,KADL;AAEE8Z,mBAAW,EAAE;AAFf;;AAIF,SAAK3P,oBAAL;AACE,4FACKnK,KADL;AAEE2H,WAAG,4FAAM3H,KAAK,CAAC2H,GAAZ,IAAiBhE,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqB,CAArB,EAAwBc,EAAzC;AAFL;;AAIF,SAAK4E,wBAAL;AACE,4FACKpK,KADL;AAEE2H,WAAG,EAAE3H,KAAK,CAAC2H,GAAN,CAAU3C,MAAV,CAAiB,UAAAQ,EAAE;AAAA,iBAAIA,EAAE,KAAK7B,MAAM,CAAC2C,QAAP,CAAgB5B,IAAhB,CAAqB,CAArB,EAAwBc,EAAnC;AAAA,SAAnB;AAFP;;AAIF;AACE,aAAOxF,KAAP;AAvDJ;AAyDD,CA1DD;;AA4DA,IAAMqa,WAAW,GAAG,SAAdA,WAAc,GAAwB;AAAA,MAAvBra,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AAC1C,MAAM2W,WAAW,GAAG,SAAdA,WAAc,CAACD,WAAD,EAAcE,YAAd;AAAA,WAClBA,YAAY,CAACC,iBAAb,CAA+BzP,MAA/B,CACE,UAACjE,OAAD,EAAU1F,IAAV;AAAA,4FACK0F,OADL,mFAEG1F,IAFH,EAEU6Y,UAAU,CAACI,WAAW,CAACjZ,IAAD,CAAZ,EAAoBuC,MAApB,CAFpB;AAAA,KADF,EAKE,EALF,CADkB;AAAA,GAApB;;AASA,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKsU,gBAAL;AACA,SAAKO,sBAAL;AACA,SAAKC,oBAAL;AACA,SAAKC,uBAAL;AACA,SAAKJ,WAAL;AACA,SAAKrO,YAAL;AACA,SAAKiO,aAAL;AACE,UAAI,CAACxU,MAAM,CAACsW,UAAZ,EAAwB;AACtB,eAAOja,KAAP;AACD;;AACD,4FACKA,KADL,mFAEG2D,MAAM,CAACsW,UAFV,EAEuBA,UAAU,CAACja,KAAK,CAAC2D,MAAM,CAACsW,UAAR,CAAN,EAA2BtW,MAA3B,CAFjC;;AAIF,SAAKwG,oBAAL;AACA,SAAKC,wBAAL;AACE,UAAI,CAACzG,MAAM,CAAC6W,iBAAZ,EAA+B;AAC7B,eAAOxa,KAAP;AACD;;AACD,4FACKA,KADL,EAEKsa,WAAW,CAACta,KAAD,EAAQ2D,MAAR,CAFhB;;AAIF;AACE,aAAO3D,KAAP;AAzBJ;AA2BD,CArCD;;AAuCe2M,4HAAe,CAAC;AAC7B0N,aAAW,EAAXA,WAD6B;AAE7BlR,WAAS,EAATA,SAF6B;AAG7BsR,UAAQ,EAARA,wDAH6B;AAI7BC,iBAAe,EAAfA,+DAAeA;AAJc,CAAD,CAA9B;AAOO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACvZ,IAAD;AAAA,MAAOoB,OAAP,uEAAiB,EAAjB;AAAA,MAAqB+B,IAArB,uEAA4B,CAA5B;AAAA,SAAmC;AAC1DqW,SAAK,EAAE,CAAC1C,gBAAD,EAAmBK,WAAnB,EAAgCJ,aAAhC,CADmD;AAE1D8B,cAAU,EAAE7Y,IAF8C;AAG1D4B,WAAO,EAAE,cAHiD;AAI1DR,WAAO,EAAPA,OAJ0D;AAK1D+B,QAAI,EAAJA,IAL0D;AAM1DsW,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACgY,SAAP,CAAiBvZ,IAAjB,EAAuBoB,OAAvB,EAAgC+B,IAAhC,CAAJ;AAAA;AAN2C,GAAnC;AAAA,CAAlB;AASA,IAAM0E,eAAe,GAAG,SAAlBA,eAAkB,CAAC7H,IAAD,EAAO4B,OAAP;AAAA,MAAgBR,OAAhB,uEAA0B,EAA1B;AAAA,MAA8B+B,IAA9B,uEAAqC,CAArC;AAAA,SAA4C;AACzEqW,SAAK,EAAE,CAAC1C,gBAAD,EAAmBhO,YAAnB,EAAiCiO,aAAjC,CADkE;AAEzE8B,cAAU,EAAE7Y,IAF6D;AAGzE4B,WAAO,EAAPA,OAHyE;AAIzER,WAAO,EAAPA,OAJyE;AAKzE+B,QAAI,EAAJA,IALyE;AAMzEsW,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACsG,eAAP,CAAuB7H,IAAvB,EAA6B4B,OAA7B,EAAsCR,OAAtC,EAA+C+B,IAA/C,CAAJ;AAAA;AAN0D,GAA5C;AAAA,CAAxB;AASA,IAAMuW,aAAa,GAAG,SAAhBA,aAAgB,CAAC9X,OAAD,EAAUwC,EAAV;AAAA,MAAchD,OAAd,uEAAwB,EAAxB;AAAA,SAAgC;AAC3DoY,SAAK,EAAE,CAAC3C,cAAD,EAAiB/N,YAAjB,EAA+BiO,aAA/B,CADoD;AAE3DnV,WAAO,EAAPA,OAF2D;AAG3DwC,MAAE,EAAFA,EAH2D;AAI3DhD,WAAO,EAAPA,OAJ2D;AAK3DqY,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACmY,aAAP,CAAqB9X,OAArB,EAA8BwC,EAA9B,CAAJ;AAAA;AAL4C,GAAhC;AAAA,CAAtB;AAQA,IAAMgC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACtC,GAAD;AAAA,MAAMX,IAAN,uEAAa,CAAb;AAAA,SAAoB;AACtDqW,SAAK,EAAE,CAACnC,sBAAD,EAAyBvO,YAAzB,EAAuCiO,aAAvC,CAD+C;AAEtD8B,cAAU,YAAK/U,GAAG,CAACO,KAAT,cAAkBP,GAAG,CAACM,EAAtB,WAF4C;AAGtD0T,YAAQ,EAAEhU,GAH4C;AAItD1C,WAAO,EAAE,EAJ6C;AAKtD+B,QAAI,EAAJA,IALsD;AAMtDsW,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC6E,oBAAP,CAA4BtC,GAA5B,EAAiCX,IAAjC,CAAJ;AAAA;AANuC,GAApB;AAAA,CAA7B;AASA,IAAMwW,aAAa,GAAG,SAAhBA,aAAgB,CAAC3Z,IAAD,EAAOsG,MAAP;AAAA,MAAelF,OAAf,uEAAyB,EAAzB;AAAA,MAA6B+B,IAA7B,uEAAoC,CAApC;AAAA,SAA2C;AACtEqW,SAAK,EAAE,CAAC1C,gBAAD,EAAmBhO,YAAnB,EAAiCiO,aAAjC,CAD+D;AAEtE8B,cAAU,EAAE7Y,IAF0D;AAGtE4B,WAAO,EAAE,kBAH6D;AAItER,WAAO,EAAPA,OAJsE;AAKtE+B,QAAI,EAAJA,IALsE;AAMtEsW,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACoY,aAAP,CAAqB3Z,IAArB,EAA2BsG,MAA3B,EAAmClF,OAAnC,EAA4C+B,IAA5C,CAAJ;AAAA;AANuD,GAA3C;AAAA,CAAtB;AASA,IAAMyW,eAAe,GAAG,SAAlBA,eAAkB,CAAC5Z,IAAD;AAAA,MAAOoB,OAAP,uEAAiB,EAAjB;AAAA,MAAqB+B,IAArB,uEAA4B,CAA5B;AAAA,SAAmC;AAChEqW,SAAK,EAAE,CAAC1C,gBAAD,EAAmBhO,YAAnB,EAAiCiO,aAAjC,CADyD;AAEhE8B,cAAU,EAAE7Y,IAFoD;AAGhE4B,WAAO,EAAE,oBAHuD;AAIhER,WAAO,EAAPA,OAJgE;AAKhE+B,QAAI,EAAJA,IALgE;AAMhEsW,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACqY,eAAP,CAAuB5Z,IAAvB,EAA6BoB,OAA7B,EAAsC+B,IAAtC,CAAJ;AAAA;AANiD,GAAnC;AAAA,CAAxB;AASA,IAAM0W,cAAc,GAAG,SAAjBA,cAAiB,CAACjY,OAAD,EAAUkC,GAAV;AAAA,MAAegW,aAAf,uEAA+B,EAA/B;AAAA;AAC5BN,SAAK,EAAE,CAACxC,eAAD,EAAkBjO,oBAAlB,EAAwCgO,aAAxC,CADqB;AAE5BnV,WAAO,EAAPA,OAF4B;AAG5BkW,YAAQ,EAAEhU,GAHkB;AAI5B2V,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACsY,cAAP,CAAsBjY,OAAtB,EAA+BkC,GAA/B,CAAJ;AAAA;AAJa,KAKzBgW,aALyB;AAAA,CAAvB;AAQA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACjW,GAAD;AAAA,MAAMgW,aAAN,uEAAsB,EAAtB;AAAA;AAC3BN,SAAK,EAAE,CAACxC,eAAD,EAAkBjO,oBAAlB,EAAwCgO,aAAxC,CADoB;AAE3Be,YAAQ,EAAEhU,GAFiB;AAG3B2V,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACwY,aAAP,CAAqBjW,GAArB,CAAJ;AAAA;AAHY,KAIxBgW,aAJwB;AAAA,CAAtB;AAOA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAACnb,OAAD;AAAA,MAAUib,aAAV,uEAA0B,EAA1B;AAAA;AAC3BN,SAAK,EAAE,CAAC5Q,cAAD,EAAiBG,oBAAjB,EAAuCgO,aAAvC,CADoB;AAE3BlY,WAAO,EAAEA,OAFkB;AAG3B4a,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACyY,aAAP,CAAqBnb,OAArB,CAAJ;AAAA;AAHY,KAIxBib,aAJwB;AAAA,CAAtB;AAOA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACnW,GAAD;AAAA,MAAMgW,aAAN,uEAAsB,EAAtB;AAAA;AAC5BN,SAAK,EAAE,CAACvC,eAAD,EAAkBG,wBAAlB,EAA4CL,aAA5C,CADqB;AAE5Be,YAAQ,EAAEhU,GAFkB;AAG5B2V,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC0Y,cAAP,CAAsBnW,GAAtB,CAAJ;AAAA;AAHa,KAIzBgW,aAJyB;AAAA,CAAvB;AAOA,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAACpW,GAAD;AAAA,MAAMgW,aAAN,uEAAsB,EAAtB;AAAA;AAC5BN,SAAK,EAAE,CAACtC,eAAD,EAAkBlO,wBAAlB,EAA4C+N,aAA5C,CADqB;AAE5Be,YAAQ,EAAEhU,GAFkB;AAG5B2V,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC2Y,cAAP,CAAsBpW,GAAtB,CAAJ;AAAA;AAHa,KAIzBgW,aAJyB;AAAA,CAAvB;AAOA,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACrW,GAAD;AAAA,MAAMgW,aAAN,uEAAsB,EAAtB;AAAA;AAC3BN,SAAK,EAAE,CAACtC,eAAD,EAAkBlO,wBAAlB,EAA4C+N,aAA5C,CADoB;AAE3Be,YAAQ,EAAEhU,GAFiB;AAG3B2V,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC4Y,aAAP,CAAqBrW,GAArB,CAAJ;AAAA;AAHY,KAIxBgW,aAJwB;AAAA,CAAtB;AAOA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACpU,IAAD,EAAOE,KAAP;AAAA,MAAc4T,aAAd,uEAA8B,EAA9B;AAAA;AACxBN,SAAK,EAAE,CAACxC,eAAD,EAAkBjO,oBAAlB,EAAwCgO,aAAxC,CADiB;AAExBnV,WAAO,EAAE,eAFe;AAGxB6X,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC6Y,UAAP,CAAkBpU,IAAlB,EAAwBE,KAAxB,CAAJ;AAAA;AAHS,KAIrB4T,aAJqB;AAAA,CAAnB;AAOA,IAAMO,SAAS,GAAG,SAAZA,SAAY,CAACrU,IAAD;AAAA,MAAO8T,aAAP,uEAAuB,EAAvB;AAAA;AACvBN,SAAK,EAAE,CAACtC,eAAD,EAAkBlO,wBAAlB,EAA4C+N,aAA5C,CADgB;AAEvBe,YAAQ,EAAE9R,IAFa;AAGvByT,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC8Y,SAAP,CAAiBrU,IAAjB,CAAJ;AAAA;AAHQ,KAIpB8T,aAJoB;AAAA,CAAlB;AAOA,IAAMtT,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC1C,GAAD,EAAMyC,GAAN;AAAA,SAAe;AAC/C/D,QAAI,EAAE8U,oBADyC;AAE/CuB,cAAU,YAAK/U,GAAG,CAACO,KAAT,cAAkBP,GAAG,CAACqB,GAAtB,WAFqC;AAG/C2S,YAAQ,EAAEhU,GAHqC;AAI/CyC,OAAG,EAAHA,GAJ+C;AAK/CkT,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACiF,kBAAP,CAA0B1C,GAA1B,EAA+ByC,GAA/B,CAAJ;AAAA;AALgC,GAAf;AAAA,CAA3B;AAQA,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC3C,GAAD,EAAMyC,GAAN;AAAA,SAAe;AAClD/D,QAAI,EAAE+U,uBAD4C;AAElDsB,cAAU,YAAK/U,GAAG,CAACO,KAAT,cAAkBP,GAAG,CAACqB,GAAtB,WAFwC;AAGlD2S,YAAQ,EAAEhU,GAHwC;AAIlDyC,OAAG,EAAHA,GAJkD;AAKlDkT,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACkF,qBAAP,CAA6B3C,GAA7B,EAAkCyC,GAAlC,CAAJ;AAAA;AALmC,GAAf;AAAA,CAA9B;AAQA,IAAM+T,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAb,OAAO;AAAA,SAAK;AAAEA,WAAO,EAAPA;AAAF,GAAL;AAAA,CAAjC;AAEA,IAAMc,mBAAmB,GAAG,SAAtBA,mBAAsB,QAEjCpX,IAFiC;AAAA,MAC/BqW,KAD+B,SAC/BA,KAD+B;AAAA,MACxBX,UADwB,SACxBA,UADwB;AAAA,MACZf,QADY,SACZA,QADY;AAAA,MACFlW,OADE,SACFA,OADE;AAAA,MACOR,OADP,SACOA,OADP;AAAA,SAIjCoY,KAAK,CAAC,CAAD,CAAL,KAAanC,sBAAb,GACIjR,oBAAoB,CAAC0R,QAAD,EAAW3U,IAAX,CADxB,GAEI0E,eAAe,CAACgR,UAAD,EAAajX,OAAb,EAAsBR,OAAtB,EAA+B+B,IAA/B,CANc;AAAA,CAA5B;AAQA,IAAMqX,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC5b,KAAD,EAAQ2D,MAAR,EAAmB;AACvD,UAAQA,MAAM,CAACiX,KAAP,CAAa,CAAb,CAAR;AACE,SAAK1C,gBAAL;AACA,SAAKO,sBAAL;AACE,aAAOoD,aAAa,CAAC7b,KAAD,EAAQ2D,MAAM,CAACsW,UAAf,CAApB;;AACF,SAAKhC,cAAL;AACE,aAAO6D,WAAW,CAAC9b,KAAD,EAAQ2D,MAAM,CAACX,OAAf,EAAwBW,MAAM,CAAC6B,EAA/B,CAAlB;;AACF,SAAKuW,+DAAL;AACE,aAAOpY,MAAM,CAAC6B,EAAP,GACHwW,0EAAiB,CAAChc,KAAD,EAAQ2D,MAAM,CAACX,OAAf,EAAwBW,MAAM,CAAC6B,EAA/B,EAAmC7B,MAAM,CAACnB,OAA1C,CADd,GAEHyZ,oEAAW,CAACjc,KAAD,EAAQ2D,MAAM,CAACX,OAAf,EAAwBW,MAAM,CAACnB,OAA/B,CAFf;;AAGF;AACE,aAAO,IAAP;AAXJ;AAaD,CAdM;AAgBA,IAAM0Z,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACnc,KAAD,EAAQoc,YAAR,EAAsBjZ,QAAtB;AAAA,SACpCkZ,wDAAS,CAACD,YAAD,EAAe,UAACxY,MAAD,EAAS0Y,QAAT,EAAsB;AAC5C,QAAMC,UAAU,GAAGvc,KAAK,CAACsc,QAAD,CAAxB;;AACA,YAAQ1Y,MAAM,CAACiX,KAAP,CAAa,CAAb,CAAR;AACE,WAAK1C,gBAAL;AACA,WAAKO,sBAAL;AACE,8FACK6D,UADL;AAEEC,mBAAS,EAAED,UAAU,CAACtC,OAAX,GACP;AAAA,mBACE9W,QAAQ,CAACyY,mBAAmB,CAAChY,MAAD,EAAS2Y,UAAU,CAAC5X,IAAX,CAAgBoG,MAAzB,CAApB,CADV;AAAA,WADO,GAGP;AALN;;AAOF;AACE,eAAOwR,UAAP;AAXJ;AAaD,GAfQ,CAD2B;AAAA,CAA/B,C,CAkBP;;AACA,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAACrT,SAAD,EAAYnG,OAAZ,EAAqB2E,GAArB;AAAA,SACxBA,GAAG,CAACtC,GAAJ,CAAQ,UAAAG,EAAE;AAAA,WAAI2D,SAAS,CAACnG,OAAD,CAAT,CAAmBwC,EAAnB,CAAJ;AAAA,GAAV,CADwB;AAAA,CAA1B;;AAGO,IAAMqW,aAAa,GAAG,SAAhBA,aAAgB,CAAC7b,KAAD,EAAQoB,IAAR,EAAiB;AAC5C,MAAM6Y,UAAU,GAAGja,KAAK,CAACyB,IAAN,CAAW4Y,WAAX,CAAuBjZ,IAAvB,CAAnB;;AACA,MAAI,CAAC6Y,UAAL,EAAiB;AACf,0FAAYJ,sBAAZ;AAAoCnV,UAAI,EAAE;AAA1C;AACD;;AACD,wFACKuV,UADL;AAEEvV,QAAI,EAAE8X,iBAAiB,CACrBxc,KAAK,CAACyB,IAAN,CAAW0H,SADU,EAErB8Q,UAAU,CAACrW,IAFU,EAGrBqW,UAAU,CAACtS,GAHU;AAFzB;AAQD,CAbM;AAeA,IAAMmU,WAAW,GAAG,SAAdA,WAAc,CAAC9b,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AACjD,MAAM2D,SAAS,GAAGnJ,KAAK,CAACyB,IAAN,CAAW0H,SAAX,CAAqBnG,OAArB,CAAlB;;AACA,MAAI,CAACmG,SAAL,EAAgB;AACd,WAAO,IAAP;AACD;;AACD,SAAOA,SAAS,CAAC3D,EAAD,CAAhB;AACD,CANM;AAQA,IAAMiX,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACzc,KAAD,EAAQoB,IAAR;AAAA,SACjCpB,KAAK,CAACyB,IAAN,CAAW4Y,WAAX,CAAuBjZ,IAAvB,KACApB,KAAK,CAACyB,IAAN,CAAW4Y,WAAX,CAAuBjZ,IAAvB,EAA6B0Y,WAA7B,KAA6C,QAFZ;AAAA,CAA5B,C;;;;;;;;;;;;;;;;;;AC5dP;AAEA,IAAM4C,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI;AAAA,SAClBA,IAAI,CACDC,QADH,GAEGC,WAFH,GAGGC,OAHH,CAGW,MAHX,EAGmB,GAHnB,EAGwB;AAHxB,GAIGA,OAJH,CAIW,UAJX,EAIuB,EAJvB,EAI2B;AAJ3B,GAKGA,OALH,CAKW,MALX,EAKmB,GALnB,EAKwB;AALxB,GAMGA,OANH,CAMW,KANX,EAMkB,EANlB,EAMsB;AANtB,GAOGA,OAPH,CAOW,KAPX,EAOkB,EAPlB,CADkB;AAAA,CAApB,C,CAQwB;;;AAExB,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACvT,IAAD,EAAOwT,QAAP,EAAoB;AAC5C,MAAM5F,OAAO,GAAG8B,QAAQ,CAAC+D,aAAT,CAAuB,GAAvB,CAAhB;AACA7F,SAAO,CAAC8F,YAAR,CAAqB,MAArB,EAA6B1T,IAA7B;AACA4N,SAAO,CAAC8F,YAAR,CAAqB,UAArB,EAAiCF,QAAjC;AACA5F,SAAO,CAAC+F,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACAlE,UAAQ,CAACmE,IAAT,CAAcC,WAAd,CAA0BlG,OAA1B;AACAA,SAAO,CAACmG,KAAR;AACArE,UAAQ,CAACmE,IAAT,CAAcG,WAAd,CAA0BpG,OAA1B;AACD,CARD,C,CAUA;;;AACO,IAAMqG,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA,yEAAG,iBAAOC,iBAAP,EAA0BC,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBX,oBADuB,GACZN,OAAO,CAACgB,iBAAD,CADK;AAAA;AAAA,mBAEVjc,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkBwX,mBAAlB,CAAsCD,OAAtC,EAA+CX,QAA/C,CAFU;;AAAA;AAEvBxT,gBAFuB;AAAA;AAAA,mBAGN/H,IAAI,CAACkB,MAAL,CAAYkb,QAAZ,CAAqBrU,IAArB,CAHM;;AAAA;AAGvBqU,oBAHuB;AAI7Bd,6BAAiB,CAACc,QAAD,EAAWb,QAAQ,GAAG,MAAtB,CAAjB;;AAJ6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfS,eAAe;AAAA;AAAA;AAAA,GAArB;AAOA,IAAMK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,yEAAG,kBAAM1W,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACH3F,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkB2X,YAAlB,CAA+B3W,IAAI,CAAC5B,EAApC,CADG;;AAAA;AACpBc,oBADoB;AAAA;AAAA,mBAEPA,QAAQ,CAAC0X,IAAT,EAFO;;AAAA;AAEpBA,gBAFoB;AAG1BjB,6BAAiB,CAACzH,MAAM,CAACiC,GAAP,CAAW0G,eAAX,CAA2BD,IAA3B,CAAD,EAAmC5W,IAAI,CAAChG,IAAxC,CAAjB;;AAH0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZ0c,YAAY;AAAA;AAAA;AAAA,GAAlB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BP;AACA;AAEA;AAEA;AACA;AAMA;;IAKMI,oB;;;;;AACJ,gCAAYne,KAAZ,EAAmBgR,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,wNAAMhR,KAAN,EAAagR,OAAb;;AAD0B,0LAKhB,UAAAtQ,OAAO,EAAI;AACrB,YAAKV,KAAL,CAAWoe,WAAX;;AACA,YAAKpe,KAAL,CAAWS,SAAX,CAAqBC,OAArB;AACD,KAR2B;;AAE1B,UAAKV,KAAL,CAAWqe,aAAX,CAAyB,MAAKre,KAAL,CAAWW,SAApC;;AAF0B;AAG3B;;;;6BAOQ;AAAA,UACCM,CADD,GACO,KAAKjB,KADZ,CACCiB,CADD;AAEP,aACE;AAAK,iBAAS,EAAC;AAAf,SACE,2DAAC,qEAAD;AACE,cAAM,EAAE,KAAKR,SADf;AAEE,0BAAkB,EAAEQ,CAAC,CAAC,qCAAD;AAFvB,SAGM,KAAKjB,KAHX,EADF,CADF;AASD;;;;EAtBgCse,4CAAK,CAAChd,S;;AAyBzC,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACtB,KAAD,EAAQuB,QAAR,EAAqB;AAC3C;AAD2C,MAEnCb,SAFmC,GAErBa,QAFqB,CAEnCb,SAFmC;AAG3C,MAAM4d,cAAc,GAAGC,mFAA2B,CAACve,KAAD,CAAlD;AACA,MAAMC,OAAO,GAAGue,uFAA+B,CAC7Cxe,KAD6C,EAE7CU,SAF6C,EAG7C4d,cAH6C,CAA/C;AAKA,SAAO;AACLA,kBAAc,EAAdA,cADK;AAELG,cAAU,EAAEhP,+EAAoB,CAACzP,KAAK,CAAC0e,WAAP,CAF3B;AAGLrS,aAAS,EAAEuD,8EAAmB,CAAC5P,KAAK,CAAC0e,WAAP,EAAoBze,OAApB,CAHzB;AAILA,WAAO,EAAPA;AAJK,GAAP;AAMD,CAfD;;AAiBA,IAAMkV,kBAAkB,GAAG,SAArBA,kBAAqB,CAACjS,QAAD,EAAW3B,QAAX;AAAA,SAAyB;AAClD6c,iBAAa,EAAE;AAAA,aAAMlb,QAAQ,CAACgK,kFAAuB,CAAC3L,QAAQ,CAACb,SAAV,CAAxB,CAAd;AAAA,KADmC;AAElDyd,eAAW,EAAE;AAAA,aAAMjb,QAAQ,CAACiK,gFAAqB,EAAtB,CAAd;AAAA;AAFqC,GAAzB;AAAA,CAA3B;;AAKetL,0HAAO,CACpBP,eADoB,EAEpB6T,kBAFoB,CAAP,CAGbvT,qEAAS,GAAGsc,oBAAH,CAHI,CAAf,E;;;;;;;AChEA;AACA,kBAAkB,uS;;;;;;;ACDlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;AACA;AAEA;AAEO,IAAMS,iBAAiB,GAAG;AAC/BC,SAAO,EAAE,SADsB;AAE/BC,SAAO,EAAE,SAFsB;AAG/BC,WAAS,EAAE;AAHoB,CAA1B;AAMP,IAAMC,gBAAgB,GAAG,kBAAzB;AACA,IAAMjV,YAAY,GAAG,cAArB;AACA,IAAMD,gBAAgB,GAAG,kBAAzB;;AAEA,IAAMmV,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWjc,OAAX,EAAuB;AACvC,wFACKic,QADL,EAEKA,QAAQ,CAACzY,UAFd;AAGEhB,MAAE,EAAEyZ,QAAQ,CAAC1Y,GAHf;AAIEd,SAAK,EAAEzC,OAAO,IAAIic,QAAQ,CAACxZ;AAJ7B;AAMD,CAPD;;IASqByZ,Y;;;AACnB,wBAAYnO,OAAZ,EAAqBpO,MAArB,EAA2C;AAAA,QAAdH,OAAc,uEAAJ,EAAI;;AAAA;;AACzC,SAAKG,MAAL,GAAcA,MAAd;AACA,SAAKwc,QAAL,GAAgB,IAAhB;AACA,SAAK3c,OAAL,GAAeA,OAAf;AAEA,SAAK4c,UAAL,GAAkBC,mBAAO,CAAC,MAAD,CAAzB;AAEA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBlf,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKmf,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBnf,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKof,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBpf,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKqf,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBrf,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKsf,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBtf,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKuf,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBvf,IAAtB,CAA2B,IAA3B,CAAxB;AAEA,SAAKwf,kBAAL;AACD;;;;yCAEoB;AACnB,WAAKC,QAAL,GAAgB,IAAIC,oDAAJ,CAAiB;AAAEnd,cAAM,EAAE,KAAKA;AAAf,OAAjB,CAAhB;AAEA,WAAKkd,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmCpN,YAAnC,EAAiD,KAAKwV,mBAAtD;AACA,WAAKO,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmCpN,YAAnC,EAAiD,KAAKwV,mBAAtD;AAEA,WAAKO,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmC6H,gBAAnC,EAAqD,KAAKQ,gBAA1D;AACA,WAAKM,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmC6H,gBAAnC,EAAqD,KAAKS,gBAA1D;AACA,WAAKK,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmC6H,gBAAnC,EAAqD,KAAKU,gBAA1D;AAEA,WAAKI,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmCrN,gBAAnC,EAAqD,KAAK6V,gBAA1D;AACA,WAAKG,QAAL,CAAc3I,SAAd,CAAwB,SAAxB,EAAmCrN,gBAAnC,EAAqD,KAAK8V,gBAA1D;AACD;;;;;;8FAEsBlf,O;;;;;AACrB,qBAAKyC,QAAL,CAAc;AACZU,sBAAI,EAAE,sBADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAACve,OAAD,EAAUse,gBAAV,CAAV;AAAR,mBAFE;AAGZvE,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOqB/Z,O;;;;;AACrB,qBAAKyC,QAAL,CAAc;AACZU,sBAAI,EAAE,0BADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAACve,OAAD,EAAUse,gBAAV,CAAV;AAAR,mBAFE;AAGZvE,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOqB/Z,O;;;;;AACrB,qBAAKyC,QAAL,CAAc;AACZU,sBAAI,EAAE,0BADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAACve,OAAD,EAAUse,gBAAV,CAAV;AAAR,mBAFE;AAGZvE,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOqBva,O;;;;;AACrB,qBAAKiD,QAAL,CAAc;AACZU,sBAAI,EAAE,sBADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAAC/e,OAAD,EAAU4J,gBAAV,CAAV;AAAR,mBAFE;AAGZ2Q,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOqBva,O;;;;;AACrB,qBAAKiD,QAAL,CAAc;AACZU,sBAAI,EAAE,0BADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAAC/e,OAAD,EAAU4J,gBAAV,CAAV;AAAR,mBAFE;AAGZ2Q,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOqBva,O;;;;;AACrB,qBAAKiD,QAAL,CAAc;AACZU,sBAAI,EAAE,0BADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACsa,SAAS,CAAC/e,OAAD,EAAU4J,gBAAV,CAAV;AAAR,mBAFE;AAGZ2Q,mCAAiB,EAAE,CAAC,UAAD;AAHP,iBAAd;;;;;;;;;;;;;;;;;;;;;+FAOwB5T,G;;;;;;AAClBmZ,6B,GAAgBf,SAAS,CAACpY,GAAD,EAAMkD,YAAN,C,EAC/B;AACA;;AACMa,8B,GAAiBoV,aAAa,CAACrY,MAAd,KAAyB,W;AAC1CsY,uC,GAA0B,CAAC,CAACD,aAAa,CAACE,e;;sBAC5C,CAACtV,cAAD,IAAmBqV,uB;;;;;;;;AAIvB,qBAAK9c,QAAL,CAAc;AACZU,sBAAI,EAAE,sBADM;AAEZ0C,0BAAQ,EAAE;AAAE5B,wBAAI,EAAE,CAACqb,aAAD;AAAR,mBAFE;AAGZvF,mCAAiB,EAAE,CAAC,MAAD;AAHP,iBAAd;;uBAKsBrO,kDAAA,CAAe1K,IAAI,CAACkB,MAApB,EAA4Bod,aAAa,CAAC1U,UAA1C,C;;;AAAhBpL,uB;AACN,qBAAKigB,gBAAL,CAAsBjgB,OAAtB;;;;;;;;;;;;;;;;;;wCAGkBkgB,M,EAAQ7K,M,EAAQ;AAClC,aAAO7T,IAAI,CAACkB,MAAL,CAAYyd,OAAZ,CAAoBC,aAApB,CAAkCF,MAAlC,EAA0C7K,MAA1C,CAAP;AACD,K,CAED;;;;gCACY;AAAA;;AACV,aAAO7T,IAAI,CAACkB,MAAL,CACJ6B,SADI,CACM,KADN,EACa,QADb,EAEJ8b,IAFI,CAEC,UAAAjD,IAAI,EAAI;AACZA,YAAI,CAACkD,OAAL,CAAa,UAAAC,IAAI,EAAI;AACnB,cAAI,CAACA,IAAI,CAACha,UAAN,IAAoB,CAACga,IAAI,CAACha,UAAL,CAAgB7E,IAArC,IAA6C,CAAC6e,IAAI,CAACvL,KAAvD,EAA8D;;AAC9D,kBAAQuL,IAAI,CAACha,UAAL,CAAgB7E,IAAxB;AACE,iBAAK,OAAL;AACE,mBAAI,CAACgQ,QAAL,aAAmB6O,IAAI,CAACvL,KAAL,CAAWC,OAA9B;AACA;;AACF;AACE;AALJ;AAOD,SATD;AAUD,OAbI,EAcJuL,KAdI,CAcE,UAAAC,GAAG,EAAI;AACZ;AACAC,eAAO,CAACC,IAAR,CAAaF,GAAG,CAACzf,OAAjB;AACA,eAAO,KAAP;AACD,OAlBI,CAAP;AAmBD;;;;;;;;;;;;;;ACpJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;;AAEA,IAAM4f,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,MAAG7f,CAAH,QAAGA,CAAH;AAAA,MAAM8f,WAAN,QAAMA,WAAN;AAAA,MAAmBC,IAAnB,QAAmBA,IAAnB;AAAA,MAAyBC,aAAzB,QAAyBA,aAAzB;AAAA,SAC3B;AAAK,aAAS,EAAE7f,uEAAM,CAAC,aAAD;AAAtB,KACE;AAAK,aAAS,EAAEA,uEAAM,CAAC,mBAAD;AAAtB,KACE;AAAK,aAAS,EAAEA,uEAAM,CAAC,kBAAD;AAAtB,IADF,EAEE;AAAI,aAAS,EAAEA,uEAAM,CAAC,qBAAD;AAArB,KACGH,CAAC,CAAC,qBAAD,CADJ,CAFF,EAKE;AAAG,aAAS,EAAEG,uEAAM,CAAC,qBAAD;AAApB,KACGH,CAAC,CAAC,qBAAD,EAAwB;AAAEggB,iBAAa,EAAbA;AAAF,GAAxB,CADJ,CALF,CADF,EAUE;AAAI,aAAS,EAAE7f,uEAAM,CAAC,mBAAD;AAArB,KAA6CH,CAAC,CAAC,mBAAD,CAA9C,CAVF,EAWE,2DAAC,uEAAD;AACE,aAAS,EAAEG,uEAAM,CAAC,qBAAD,CADnB;AAEE,UAAM,EAAE2f,WAAW,CAAC7f,OAAZ,CAAoB8f,IAApB,KAA6BD,WAAW,CAAC7f,OAAZ,CAAoB,IAApB;AAFvC,IAXF,CAD2B;AAAA,CAA7B;;AAmBeW,mIAAS,GAAGif,oBAAH,CAAxB,E;;;;;;;AC1BA;AACA,kBAAkB,4O;;;;;;;ACDlB;AACA,kBAAkB,6G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDlB;AACA;AACA;AAEA,IAAM7I,YAAY,GAAG,cAArB;AACA,IAAM9T,aAAa,GAAG,eAAtB;AACA,IAAM2F,gBAAgB,GAAG,kBAAzB;AACA,IAAMoX,kBAAkB,GAAG,oBAA3B;AACA,IAAMC,gBAAgB,GAAG,kBAAzB;;IAEqBC,U;;;AACnB,sBAAY1e,MAAZ,EAAoB;AAAA;;AAAA,QACVC,OADU,GACcD,MADd,CACVC,OADU;AAAA,QACEF,OADF,yFACcC,MADd;;AAElB,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAK4e,OAAL,GAAe,EAAf;AACA,SAAKC,kBAAL,GAA0B,EAA1B;AACA,SAAKC,MAAL,GAAc,IAAIxf,yDAAJ,EAAd;;AACA,QAAIY,OAAJ,EAAa;AACX,WAAK4e,MAAL,CAAYC,KAAZ,CAAkB7e,OAAlB,EAA2BF,OAA3B;AACD;AACF;;;;6BAEQD,O,EAAS;AAChB,WAAK+e,MAAL,CAAYC,KAAZ,CAAkBhf,OAAlB,iFACK,KAAKC,OADV;AAEEgf,aAAK,EAAE,+EACF,KAAKhf,OAAL,CAAagf,KADb;AAEHC,sBAAY,EAAE,sBAAC9e,MAAD,EAASgT,GAAT;AAAA,mBAAiBD,sFAAuB,CAACC,GAAD,CAAxC;AAAA;AAFX;AAFP;AAOA,aAAOlU,IAAI,CAACkB,MAAL,CAAY+e,SAAZ,CAAsB,IAAtB,CAAP;AACD;;;;;;8FAEkBC,W;;;;;oBACZA,W;;;;;iDAAoB,K;;;;;uBAEjBlgB,IAAI,CAACkB,MAAL,CAAYif,IAAZ,CAAiBC,SAAjB,CAA2BF,WAA3B,C;;;iDACC,I;;;;;;sBAGH,YAAI1gB,OAAJ,KAAgB,iB;;;;;iDACX,I;;;AAEP0f,uBAAO,CAACC,IAAR,c,CAAkB;;iDACX,K;;;;;;;;;;;;;;;;;;8BAKH1d,Q,EAAU;AAClB,aAAO,KAAKoe,MAAL,CAAYQ,SAAZ,CAAsB5e,QAAtB,CAAP;AACD;;;uCAEkBA,Q,EAAU;AAC3B,aAAO,KAAKoe,MAAL,CAAYS,kBAAZ,CAA+B7e,QAA/B,CAAP;AACD;;;yCAEoBA,Q,EAAU;AAC7B,aAAO,KAAKoe,MAAL,CAAYU,oBAAZ,CAAiC9e,QAAjC,CAAP;AACD;;;+BAEUF,O,EAAS;AAClB,aAAO,KAAKse,MAAL,CAAYre,UAAZ,CAAuBD,OAAvB,CAAP;AACD;;;;;;;;;;;kDAGQ,KAAKC,UAAL,CAAgB+U,YAAhB,EAA8B2C,SAA9B,E;;;;;;;;;;;;;;;;;;;;;+FAGavZ,I,EAAM4B,O;;;;;;;;;AAASR,uB,8DAAU,E;AAAI+B,oB,8DAAO,C;;qBACpD/B,OAAO,CAACyf,Q;;;;;;uBACU,KAAKC,kBAAL,CAAwB9gB,IAAxB,EAA8B4B,OAA9B,EAAuCR,OAAvC,C;;;AAAdqD,qB;kDACC,KAAK5C,UAAL,CAAgBD,OAAhB,EAAyBmf,cAAzB,CAAwCnf,OAAxC,EAAiD6C,KAAjD,iFACFrD,OADE;AAEL+B,sBAAI,EAAJA;AAFK,mB;;;kDAKF,KAAKtB,UAAL,CAAgBD,OAAhB,EAAyBof,cAAzB,CAAwCpf,OAAxC,C;;;;;;;;;;;;;;;;;;kCAGKA,O,EAASwC,E,EAAI;AACzB,aAAO,KAAKvC,UAAL,CAAgBD,OAAhB,EAAyB8X,aAAzB,CAAuC9X,OAAvC,EAAgDwC,EAAhD,CAAP;AACD;;;8BAESA,E,EAAI;AACZ,aAAO,KAAKvC,UAAL,CAAgBiB,aAAhB,EAA+Bme,SAA/B,CAAyC7c,EAAzC,CAAP;AACD;;;yCAEoBN,G,EAAe;AAAA,UAAVX,IAAU,uEAAH,CAAG;AAClC,aAAO,KAAKtB,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B+B,oBAA3B,CAAgDtC,GAAhD,EAAqDX,IAArD,CAAP;AACD;;;kCAEanD,I,EAAMsG,M,EAAQ;AAC1B,aAAO,KAAKzE,UAAL,CAAgB4G,gBAAhB,EAAkCkR,aAAlC,CAAgDrT,MAAhD,CAAP;AACD;;;sCAEiB;AAChB,aAAO,KAAKzE,UAAL,CAAgBge,kBAAhB,EAAoCjG,eAApC,EAAP;AACD;;;uCAEkB9V,G,EAAKyC,G,EAAK;AAC3B,aAAO,KAAK1E,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2BmC,kBAA3B,CAA8C1C,GAA9C,EAAmDyC,GAAnD,CAAP;AACD;;;0CAEqBzC,G,EAAKyC,G,EAAK;AAC9B,aAAO,KAAK1E,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2BoC,qBAA3B,CAAiD3C,GAAjD,EAAsDyC,GAAtD,CAAP;AACD;;;mCAEc3E,O,EAASkC,G,EAAK;AAC3B,aAAO,KAAKjC,UAAL,CAAgBD,OAAhB,EAAyBiY,cAAzB,CAAwCjY,OAAxC,EAAiDkC,GAAjD,CAAP;AACD;;;kCAEaA,G,EAAK;AACjB,aAAO,KAAKjC,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B0V,aAA3B,CAAyCjW,GAAzC,CAAP;AACD;;;kCAEaA,G,EAAK;AACjB,aAAO,KAAKjC,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B2V,aAA3B,CAAyClW,GAAzC,CAAP;AACD;;;mCAEcA,G,EAAK;AAClB,aAAO,KAAKjC,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B4V,cAA3B,CAA0CnW,GAA1C,CAAP;AACD;;;mCAEcA,G,EAAK;AAClB,aAAO,KAAKjC,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B6V,cAA3B,CAA0CpW,GAA1C,CAAP;AACD;;;kCAEaA,G,EAAK;AACjB,aAAO,KAAKjC,UAAL,CAAgBiC,GAAG,CAACO,KAApB,EAA2B8V,aAA3B,CAAyCrW,GAAzC,CAAP;AACD;;;;;;+FAEmBlC,O;;;;;;;;;uBACQ,KAAKC,UAAL,CAAgBD,OAAhB,EAAyBsf,uBAAzB,CACxBtf,OADwB,C;;;AAApBmF,2B;AAGAoa,0B,6FACDpa,WAAW,CAACH,IAAZ,CAAiB3C,GAAjB,CAAqB,UAAAmd,CAAC;AAAA,yBAAIA,CAAC,CAAChc,UAAF,CAAaic,SAAjB;AAAA,iBAAtB,C,mFACAta,WAAW,CAACD,MAAZ,CAAmB7C,GAAnB,CAAuB,UAAAmd,CAAC;AAAA,yBAAIA,CAAC,CAAChc,UAAF,CAAaic,SAAjB;AAAA,iBAAxB,C;;uBAEkB7M,OAAO,CAACb,GAAR,CACrBwN,UAAU,CAACld,GAAX,CAAe,UAAAG,EAAE;AAAA,yBAAI,KAAI,CAACvC,UAAL,CAAgBie,gBAAhB,EAAkCwB,YAAlC,CAA+Cld,EAA/C,CAAJ;AAAA,iBAAjB,CADqB,C;;;AAAjBiV,wB;kDAGC;AAAEtS,6BAAW,EAAXA,WAAF;AAAesS,0BAAQ,EAARA;AAAf,iB;;;;;;;;;;;;;;;;;;kCAGKtS,W,EAAaC,U,EAAYL,W,EAAaM,W,EAAa;AAC/D,aAAO,KAAKpF,UAAL,CAAgBie,gBAAhB,EAAkCyB,aAAlC,CACLxa,WADK,EAELC,UAFK,EAGLL,WAHK,EAILM,WAJK,CAAP;AAMD;;;kCAEaM,S,EAAW;AACvB,aAAO,KAAK1F,UAAL,CAAgBie,gBAAhB,EAAkC0B,aAAlC,CAAgDja,SAAhD,CAAP;AACD;;;2CAEsBA,S,EAAWC,Q,EAAU;AAC1C,aAAO,KAAK3F,UAAL,CAAgBie,gBAAhB,EAAkC2B,sBAAlC,CACLla,SADK,EAELC,QAFK,CAAP;AAID;;;sCAEiBT,W,EAAa;AAC7B,aAAO,KAAKlF,UAAL,CAAgBie,gBAAhB,EAAkC4B,iBAAlC,CAAoD3a,WAApD,CAAP;AACD;;;sCAEiBU,U,EAAY;AAC5B,aAAO,KAAK5F,UAAL,CAAgBie,gBAAhB,EAAkC6B,iBAAlC,CAAoDla,UAApD,CAAP;AACD;;;+BAEUzB,I,EAAME,K,EAAO;AACtB,aAAO,KAAKrE,UAAL,CAAgBiB,aAAhB,EAA+BsX,UAA/B,CAA0CpU,IAA1C,EAAgDE,KAAhD,CAAP;AACD;;;8BAESF,I,EAAM;AACd,aAAO,KAAKnE,UAAL,CAAgBiB,aAAhB,EAA+BuX,SAA/B,CAAyCrU,IAAzC,CAAP;AACD;;;;;;+FAE2BF,I;;;;;;oBACrB,KAAKma,kBAAL,CAAwBna,IAAxB,C;;;;;;uBACezF,IAAI,CAACkB,MAAL,CAAYyD,KAAZ,CAAkB4c,qBAAlB,CAAwC9b,IAAxC,C;;;AAAZ+b,mB;AACN,qBAAK5B,kBAAL,CAAwBna,IAAxB,IAAgC+b,GAAG,CAAC1c,GAApC;;;kDAEK,KAAK8a,kBAAL,CAAwBna,IAAxB,C;;;;;;;;;;;;;;;;;;;;;+FAGelE,O,EAASkgB,Q,EAAUC,K;;;;;;;uBACrB,KAAKC,cAAL,CAAoBpgB,OAApB,EAA6BkgB,QAA7B,C;;;AAAdrd,qB;;uBACqBpE,IAAI,CAACkB,MAAL,CAAY+B,IAAZ,CAAiB2B,KAAjB,CAAuBR,KAAvB,EAA8B;AACvDoc,0BAAQ,EAAE,iFAAGiB,QAAL,EAAgBC,KAAhB,CAD+C;AAEvDrd,wBAAM,EAAE,CAAC,KAAD;AAF+C,iBAA9B,C;;;AAArBud,4B;kDAICA,YAAY,CAACvY,MAAb,KAAwB,C;;;;;;;;;;;;;;;;;;;;;+FAGR1J,I,EAAM4B,O,EAASR,O;;;;;oBACjC,KAAK4e,OAAL,CAAahgB,IAAb,C;;;;;;uBACwB,KAAK6B,UAAL,CAAgBD,OAAhB,EAAyBsgB,WAAzB,CACzBtgB,OADyB,EAEzB,KAAKugB,cAAL,CAAoB/gB,OAApB,CAFyB,C;;;AAA3B,qBAAK4e,OAAL,CAAahgB,IAAb,C;;;kDAKK,KAAKggB,OAAL,CAAahgB,IAAb,C;;;;;;;;;;;;;;;;;;;;;+FAGY4B,O,EAASkgB,Q;;;;;;AACtB9hB,oB,aAAU4B,O,cAAWkgB,Q;;oBACtB,KAAK9B,OAAL,CAAahgB,IAAb,C;;;;;;uBACwB,KAAK6B,UAAL,CAAgBD,OAAhB,EAAyBsgB,WAAzB,CAAqCtgB,OAArC,EAA8C,CACvEkgB,QADuE,CAA9C,C;;;AAA3B,qBAAK9B,OAAL,CAAahgB,IAAb,C;;;kDAIK,KAAKggB,OAAL,CAAahgB,IAAb,C;;;;;;;;;;;;;;;;;;mCAGMoB,O,EAAS;AAAA,UACdyf,QADc,GACKzf,OADL,CACdyf,QADc;AAAA,UACJlc,IADI,GACKvD,OADL,CACJuD,IADI;;AAEtB,UAAIA,IAAJ,EAAU;AACR;AACA,eAAO,0FAAIT,MAAM,CAAC+D,IAAP,CAAY4Y,QAAZ,CAAJ,mFAA8B3c,MAAM,CAAC+D,IAAP,CAAYtD,IAAZ,CAA9B,GAAiDf,MAAjD,CACL,UAACgB,CAAD,EAAI6K,CAAJ,EAAO2S,GAAP;AAAA,iBAAeA,GAAG,CAACpJ,OAAJ,CAAYpU,CAAZ,MAAmB6K,CAAlC;AAAA,SADK,CAAP;AAGD;;AACD,aAAOvL,MAAM,CAAC+D,IAAP,CAAY4Y,QAAZ,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpOH;AAEA,IAAMhB,kBAAkB,GAAG,oBAA3B;;AAEA,IAAMwC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAA1C,IAAI;AAAA,SAAI,UAAArgB,SAAS,EAAI;AAAA,QAC3CgjB,KAD2C,GACxBhjB,SADwB,CAC3CgjB,KAD2C;AAAA,QACpCC,OADoC,GACxBjjB,SADwB,CACpCijB,OADoC;AAGnD,QAAMC,QAAQ,GAAGF,KAAK,IAAIA,KAAK,CAAC5Y,MAAhC;;AACA,QAAI,CAAC8Y,QAAL,EAAe;AACb;AACAjD,aAAO,CAACC,IAAR,qBAA0BlgB,SAAS,CAACU,IAApC;AACA,aAAOV,SAAP;AACD;;AAED,QAAMmjB,YAAY,GAAGD,QAAQ,IAAIF,KAAK,CAACpX,QAAN,CAAeyU,IAAf,CAAjC;AACA,QAAM+C,UAAU,GAAGD,YAAY,GAAG9C,IAAH,GAAU2C,KAAK,CAAC,CAAD,CAA9C;AAEA,QAAMK,UAAU,GAAGJ,OAAO,IAAIre,MAAM,CAAC+D,IAAP,CAAYsa,OAAZ,CAA9B;AACA,QAAMK,eAAe,GACnBD,UAAU,IAAIA,UAAU,CAACjZ,MAAzB,IAAmCiZ,UAAU,CAACzX,QAAX,CAAoBwX,UAApB,CADrC;;AAGA,QAAI,CAACE,eAAL,EAAsB;AACpB;AACArD,aAAO,CAACC,IAAR,qBAEIlgB,SAAS,CAACU,IAFd,mDAG2C0iB,UAH3C;AAKA,aAAOpjB,SAAP;AACD;;AAEDujB,qEAAU,CAAC,iFAAGvjB,SAAS,CAACiB,IAAd,EAAqBgiB,OAAO,CAACG,UAAD,CAA5B,EAAV;AACA,WAAOpjB,SAAP;AACD,GA7BmC;AAAA,CAApC;;AA+BO,IAAMwjB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAAnD,IAAI;AAAA,SAAI;AAAA,WAAM,UAAAnc,IAAI;AAAA,aAAI,UAAAjB,MAAM,EAAI;AAAA,YAC9D2C,QAD8D,GACjD3C,MADiD,CAC9D2C,QAD8D;;AAEtE,gBAAQ3C,MAAM,CAACC,IAAf;AACE,eAAK,cAAL;AACA,eAAK,sBAAL;AACE,gBAAI0C,QAAQ,IAAI3C,MAAM,CAACX,OAAP,KAAmBie,kBAAnC,EAAuD;AACrD,kBAAMzU,UAAU,GAAGlG,QAAQ,CAAC5B,IAA5B;AACA8H,wBAAU,IACRA,UAAU,CAAC1B,MADb,IAEE0B,UAAU,CAAC+T,OAAX,CAAmBkD,uBAAuB,CAAC1C,IAAD,CAA1C,CAFF;AAGD;;AACD;AATJ;;AAYA,eAAOnc,IAAI,CAACjB,MAAD,CAAX;AACD,OAfyD;AAAA,KAAV;AAAA,GAAJ;AAAA,CAArC;AAiBQugB,uFAAf,E;;;;;;;;;;;;;;;;ACpDO,SAAeC,KAAtB;AAAA;AAAA;;;;;yEAAO,iBAAqB1iB,IAArB,EAA2B2J,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,6CACE3J,IAAI,CAAC+C,SAAL,CAAe,KAAf,2BAAwC4G,SAAxC,EADF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AAEA;AACA;AACA;;IAEMgZ,a;;;;;AACJ,yBAAYrkB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iNAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AAAEyL,WAAK,EAAE;AAAT,KAAb;AAFiB;AAGlB;;;;8CAEyB/K,S,EAAW;AACnC,WAAKX,KAAL,CAAWskB,gBAAX,CAA4B3jB,SAA5B;AACD;;;;;;;;;;;;;8BAGwD,KAAKX,K,EAApD2E,I,eAAAA,I,EAAMhE,S,eAAAA,S,EAAW2jB,gB,eAAAA,gB,EAAkBC,O,eAAAA,O;;sBACvCA,OAAO,IAAI,CAAC5jB,S;;;;;;uBACmB4jB,OAAO,CAACC,OAAR,CAC/B,SAD+B,EAE/B,cAF+B,EAG/B7f,IAH+B,C;;;AAA3B8f,kC;;oBAQDA,kB;;;;;iDACIF,OAAO,CAACG,MAAR,E;;;AAGTJ,gCAAgB,CAACG,kBAAD,CAAhB;;;;;;;;;;;;;;;;;;4BAII/Y,K,EAAO;AACb,WAAKnL,QAAL,CAAc;AACZmL,aAAK,EAAEA;AADK,OAAd;AAGD;;;6BAEQ;AAAA,yBAC8C,KAAK1L,KADnD;AAAA,UACC2kB,OADD,gBACCA,OADD;AAAA,UACUhkB,SADV,gBACUA,SADV;AAAA,UACqBikB,QADrB,gBACqBA,QADrB;AAAA,UAC+BL,OAD/B,gBAC+BA,OAD/B;AAAA,UACwCtjB,CADxC,gBACwCA,CADxC;AAAA,UAECyK,KAFD,GAEW,KAAKzL,KAFhB,CAECyL,KAFD;AAIP,aACE;AAAK,iBAAS,EAAC;AAAf,SACGA,KAAK,IACJ;AAAK,iBAAS,EAAC;AAAf,SACE,sEAAIzK,CAAC,CAACyK,KAAK,CAACxK,OAAP,CAAL,CADF,EAEGwK,KAAK,CAACmZ,MAAN,IACC,sEAAI5jB,CAAC,CAAC,4BAAD,EAA+B;AAAEyK,aAAK,EAAEA,KAAK,CAACmZ;AAAf,OAA/B,CAAL,CAHJ,CAFJ,EASG,CAACnZ,KAAD,IACC/K,SADD,IAEG,2DAAC,+EAAD;AACE,eAAO,EAAEgkB,OADX;AAEE,iBAAS,EAAEhkB,SAFb;AAGE,gBAAQ,EAAEikB,QAHZ;AAIE,mBAAW,EAAEL,OAAO,CAACO;AAJvB,QAXN,CADF;AAqBD;;;;EA5DyBxjB,+C;;AA+D5B,IAAM8T,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAjS,QAAQ;AAAA,SAAK;AACtCmhB,oBAAgB,EAAE,0BAAA3jB,SAAS;AAAA,aAAIwC,QAAQ,CAAC4hB,mFAAyB,CAACpkB,SAAD,CAA1B,CAAZ;AAAA;AADW,GAAL;AAAA,CAAnC;;AAIA,IAAMY,eAAe,GAAG,SAAlBA,eAAkB,CAACtB,KAAD,EAAQuB,QAAR,EAAqB;AAAA,MACnCmD,IADmC,GAC1BnD,QAD0B,CACnCmD,IADmC;AAAA,MAEnC/C,IAFmC,GAE1B+C,IAF0B,CAEnC/C,IAFmC;AAG3C,SAAO;AACLjB,aAAS,EAAEiB,IAAI,IAAIH,sEAAY,CAACxB,KAAK,CAACyB,IAAP,EAAaE,IAAb;AAD1B,GAAP;AAGD,CAND;;AAQeE,0HAAO,CACpBP,eADoB,EAEpB6T,kBAFoB,CAAP,CAGbvT,oEAAS,GAAGwiB,aAAH,CAHI,CAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AAEA;AACA;;AAEA,IAAMviB,OAAO,GAAG,SAAVA,OAAU,CACdkjB,mBADc;AAAA,MAEdC,iBAFc,uEAEM,IAFN;AAAA,SAGX,UAAAC,gBAAgB,EAAI;AAAA,QACjBC,OADiB;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAED;AAAA,cACV/I,YADU,GACO,KAAKpc,KADZ,CACVoc,YADU;AAElB,cAAMjZ,QAAQ,GAAG,KAAK6N,OAAL,CAAaW,KAAb,CAAmBxO,QAApC;;AACA,eAAK,IAAMmZ,QAAX,IAAuBF,YAAvB,EAAqC;AACnCjZ,oBAAQ,CAACiZ,YAAY,CAACE,QAAD,CAAb,CAAR;AACD;AACF;AARoB;AAAA;AAAA,iCAcZ;AAAA,cACC3K,KADD,GACW,KAAKX,OADhB,CACCW,KADD;AAAA,cAECyK,YAFD,GAEkB,KAAKpc,KAFvB,CAECoc,YAFD;;AAGP,cAAMpc,KAAK,GAAG,+EACT,KAAKA,KADC,EAENmc,iEAAsB,CAAC,KAAKnc,KAAN,EAAaoc,YAAb,EAA2BzK,KAAK,CAACxO,QAAjC,CAFhB,CAAX;;AAIA,iBAAO,2DAAC,gBAAD,EAAsBnD,KAAtB,CAAP;AACD;AAtBoB;;AAAA;AAAA,MACDsB,+CADC;;AAAA,iFACjB6jB,OADiB,kBAUC;AACpBxT,WAAK,EAAEG,iDAAS,CAACC;AADG,KAVD;;AAyBvB,QAAMqT,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,YAAD,EAAeC,eAAf,EAAmC;AAC7D,UAAMC,YAAY,GAAGP,mBAAmB,CAACM,eAAD,CAAxC;;AAEA,UAAME,QAAQ,GAAG,SAAXA,QAAW,CAAA5hB,MAAM;AAAA,eAAIA,MAAM,IAAIA,MAAM,CAACiX,KAAjB,IAA0BjX,MAAM,CAACkX,OAArC;AAAA,OAAvB;;AACA,UAAMsB,YAAY,GAAGqJ,4DAAY,CAACF,YAAD,EAAe,UAAAG,IAAI;AAAA,eAAIF,QAAQ,CAACE,IAAD,CAAZ;AAAA,OAAnB,CAAjC;AACA,UAAMnO,UAAU,GAAGkO,4DAAY,CAACF,YAAD,EAAe,UAAAG,IAAI;AAAA,eAAI,CAACF,QAAQ,CAACE,IAAD,CAAb;AAAA,OAAnB,CAA/B;;AAEA,UAAMnkB,eAAe,GAAG,SAAlBA,eAAkB,CAAAtB,KAAK;AAAA,8FACxBoc,yDAAS,CACVD,YADU,EAEV,UAAAxY,MAAM;AAAA,iBACJ4hB,QAAQ,CAAC5hB,MAAD,CAAR,GAAmBiY,iEAAsB,CAAC5b,KAAD,EAAQ2D,MAAR,CAAzC,GAA2DA,MADvD;AAAA,SAFI,CADe;AAM3BwY,sBAAY,EAAZA;AAN2B,WAOxB7E,UAPwB;AAAA,OAA7B;;AASA,aAAOhW,eAAP;AACD,KAjBD;;AAmBA,WAAOokB,2DAAY,CAACP,mBAAD,EAAsBH,iBAAtB,CAAZ,CAAqDE,OAArD,CAAP;AACD,GAhDe;AAAA,CAAhB;;AAkDerjB,sEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDA;AAEA;AACA;AACA;AACA;AACA;AAEO,IAAM8jB,aAAb;AAAA;AAAA;AAAA;;AACE,yBAAY5lB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iNAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACX4lB,mBAAa,EAAE;AADJ,KAAb;AAGA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBzlB,IAArB,4FAAvB;AALiB;AAMlB;;AAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUI,qBAAKE,QAAL,CAAc;AAAEslB,+BAAa,EAAE;AAAjB,iBAAd;AACQllB,yBAXZ,GAW0B,KAAKX,KAX/B,CAWYW,SAXZ;AAAA;AAAA;AAAA,uBAaYe,IAAI,CAACkB,MAAL,CAAYyd,OAAZ,CAAoB0F,QAApB,CAA6B,cAA7B,EAA6C;AACjDnkB,sBAAI,EAAEjB,SAAS,CAACiB,IADiC;AAEjDokB,sBAAI,EAAE;AAF2C,iBAA7C,CAbZ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAkBM;AACApF,uBAAO,CAAClV,KAAR;AACA,qBAAKnL,QAAL,CAAc;AAAEslB,+BAAa,EAAE;AAAjB,iBAAd;;AApBN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BAwBW;AAAA,wBACmB,KAAK7lB,KADxB;AAAA,UACCiB,CADD,eACCA,CADD;AAAA,UACIglB,UADJ,eACIA,UADJ;AAAA,UAECJ,aAFD,GAEmB,KAAK5lB,KAFxB,CAEC4lB,aAFD;AAIP,aACE,2DAAC,4DAAD;AACE,oBAAY,EACV,2DAAC,6DAAD;AACE,eAAK,EAAE5kB,CAAC,CAAC,YAAD,CADV;AAEE,eAAK,EAAC,QAFR;AAGE,mBAAS,EAAC,OAHZ;AAIE,iBAAO,EAAE,KAAK6kB,eAJhB;AAKE,kBAAQ,EAAED;AALZ,UAFJ;AAUE,iBAAS,EAAC,YAVZ;AAWE,YAAI,EAAEI,UAAU,GAAGhlB,CAAC,CAAC,iBAAD,CAAJ,GAA0BA,CAAC,CAAC,gBAAD,CAX7C;AAYE,mBAAW,EAAEglB,UAZf;AAaE,aAAK,EAAEhlB,CAAC,CAAC,cAAD;AAbV,QADF;AAiBD;AA7CH;;AAAA;AAAA,EAAmCK,+CAAnC;AAgDAskB,aAAa,CAAC5T,SAAd,GAA0B;AACxBrR,WAAS,EAAEmR,kDAAS,CAACC,MAAV,CAAiBE,UADJ;AAExBgU,YAAU,EAAEnU,kDAAS,CAACmF,IAFE;AAGxBhW,GAAC,EAAE6Q,kDAAS,CAACM,IAAV,CAAeH;AAHM,CAA1B;AAMepQ,mIAAS,GAAG+jB,aAAH,CAAxB,E;;;;;;;;;;;;;;;;;;;;;AC9DA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAACC,YAAD,EAAeC,UAAf,EAA2BpV,OAA3B,EAAqD;AAAA,MAAjBvO,OAAiB,uEAAP,EAAO;AAC1E;AACA,MAAM4jB,gBAAgB,GAAG9Q,MAAM,CAAC+Q,kCAAP,IAA6C9B,6CAAtE;AAEA,MAAM+B,UAAU,GAAGC,yDAAW,CAC5BC,wDAAW,EADiB,EAE5BJ,gBAAgB,CACdK,qDAAe,CAACC,KAAhB,CACE,KADF,EAEE,CACEC,wEAAc,CAACT,YAAD,CADhB,EAEEhC,8EAAwB,CAAC1hB,OAAO,CAACue,IAAT,CAF1B,EAGE6F,mDAHF,EAIEC,iDAAI,CAAC,cAAD,CAAJ,GAAuBC,iEAAY,EAAnC,GAAwC,IAJ1C,EAKE9hB,MALF,CAKS+hB,OALT,CAFF,CADc,CAFY,CAA9B;AAeA,SAAOzhB,MAAM,CAACC,MAAP,CACL,IAAI2Z,wDAAJ,CAAiBnO,OAAjB,EAA0BoV,UAA1B,EAAsC3jB,OAAtC,CADK,EAEL8jB,UAFK,CAAP;AAID,CAvBD;;AAyBeL,6EAAf,E;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEe;AAAA,SACbtZ,6DAAe,CAAC;AACd9I,QAAI,EAAJA,kDADc;AAEd6a,eAAW,EAAXA,yDAFc;AAGdjd,QAAI,EAAEiC,yDAAOA;AAHC,GAAD,CADF;AAAA,CAAf,E,CAOA;;AACO,IAAMsjB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAhnB,KAAK;AAAA,SACzCinB,uEAAA,CAAsCjnB,KAAK,CAACyB,IAA5C,CADyC;AAAA,CAApC;AAGA,IAAM2L,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACpN,KAAD,EAAQmL,aAAR;AAAA,SACvC+b,2EAAA,CACElnB,KAAK,CAAC0e,WADR,EAEEvT,aAFF,EAGEgc,qDAAA,CAAoBnnB,KAAK,CAACyB,IAA1B,CAHF,EAIEwlB,yDAAA,CAAwBjnB,KAAK,CAACyB,IAA9B,CAJF,CADuC;AAAA,CAAlC;AAQA,IAAM2lB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAApnB,KAAK;AAAA,SACtCknB,0DAAA,CACElnB,KAAK,CAAC0e,WADR,EAEEuI,qEAAA,CAAoCjnB,KAAK,CAACyB,IAA1C,CAFF,CADsC;AAAA,CAAjC;AAMA,IAAM8c,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAAve,KAAK;AAAA,SAC9CmnB,yDAAA,CACEnnB,KAAK,CAACyB,IADR,EAEEylB,mEAAA,CAAkClnB,KAAK,CAAC0e,WAAxC,CAFF,CAD8C;AAAA,CAAzC;AAMA,IAAM2I,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACrnB,KAAD,EAAQU,SAAR;AAAA,SACvC4mB,mEAAA,CACEtnB,KAAK,CAACyB,IADR,EAEEf,SAFF,EAGEymB,qDAAA,CAAoBnnB,KAAK,CAACyB,IAA1B,CAHF,EAIEqJ,MALqC;AAAA,CAAlC;AAOA,IAAM0T,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACxe,KAAD,EAAQU,SAAR,EAAmBD,OAAnB,EAA+B;AAC5E,MAAM2K,SAAS,GAAG8b,mFAAA,CAChBlnB,KAAK,CAAC0e,WADU,EAEhBhe,SAFgB,EAGhBD,OAHgB,EAIhB0mB,qDAAA,CAAoBnnB,KAAK,CAACyB,IAA1B,CAJgB,CAAlB;AAMA,SAAO6lB,yDAAA,CAAwBtnB,KAAK,CAACyB,IAA9B,EAAoC2J,SAApC,CAAP;AACD,CARM;AAUA,IAAMmc,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACvnB,KAAD,EAAQmL,aAAR,EAA0B;AAC9D,MAAMqc,eAAe,GAAGxnB,KAAK,CAACyB,IAAN,CAAW0H,SAAX,CAAqB,kBAArB,KAA4C,EAApE;AACA,MAAMgD,QAAQ,GAAG7G,MAAM,CAAC+D,IAAP,CAAYme,eAAZ,EAA6Bzc,MAA7B,CAAoC,UAAC0c,GAAD,EAAM/T,GAAN,EAAc;AACjE,QAAMwF,QAAQ,GAAGlZ,KAAK,CAACyB,IAAN,CAAW0H,SAAX,CAAqB,kBAArB,EAAyCuK,GAAzC,CAAjB;;AACA,QACEwF,QAAQ,CAACxR,MAAT,KAAoB,WAApB,IACAsE,iDAAG,CAACkN,QAAD,EAAW,mBAAX,CAAH,KAAuC/N,aAFzC,EAGE;AACAsc,SAAG,CAACvb,IAAJ,CAASgN,QAAT;AACD;;AACD,WAAOuO,GAAP;AACD,GATgB,EASd,EATc,CAAjB;AAUA,SAAOtb,QAAP;AACD,CAbM;AAeA,IAAMub,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA1nB,KAAK,EAAI;AACzC,MAAMmM,QAAQ,GAAGH,iDAAG,CAAChM,KAAD,EAAQ,CAAC,MAAD,EAAS,WAAT,EAAsB,kBAAtB,CAAR,EAAmD,EAAnD,CAApB;AAEA,SAAOsF,MAAM,CAACmI,MAAP,CAActB,QAAd,EAAwBnH,MAAxB,CAA+B,UAAA/E,OAAO,EAAI;AAC/C,QAAM0nB,SAAS,GAAG3b,iDAAG,CAAC/L,OAAD,EAAU,sBAAV,CAAH,KAAyC,SAA3D;AAEA,WAAO0nB,SAAP;AACD,GAJM,CAAP;AAKD,CARM;AAUA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA5nB,KAAK,EAAI;AAC5C,MAAM6nB,qBAAqB,GAAGH,kBAAkB,CAAC1nB,KAAD,CAAlB,CAA0BqF,GAA1B,CAA8B,UAAApF,OAAO;AAAA,WACjE+L,iDAAG,CAAC/L,OAAD,EAAU,iBAAV,CAD8D;AAAA,GAArC,CAA9B;AAGA,MAAM6nB,QAAQ,GAAG9b,iDAAG,CAAChM,KAAD,EAAQ,CAAC,MAAD,EAAS,WAAT,EAAsB,kBAAtB,CAAR,EAAmD,EAAnD,CAApB;AAEA,SAAOsF,MAAM,CAACmI,MAAP,CAAcqa,QAAd,EAAwB9iB,MAAxB,CAA+B;AAAA,QAAGuB,GAAH,QAAGA,GAAH;AAAA,WACpCshB,qBAAqB,CAACvb,QAAtB,CAA+B/F,GAA/B,CADoC;AAAA,GAA/B,CAAP;AAGD,CATM,C;;;;;;;;ACnFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAEA;AAEA;AAEA;AAEA,IAAMwa,IAAI,GAAG7H,QAAQ,CAAC6O,eAAT,CAAyBC,YAAzB,CAAsC,MAAtC,KAAiD,IAA9D;AACA,IAAMjX,OAAO,GAAGuE,MAAM,CAACvE,OAAP,IAAkB,MAAlC;AAEA,IAAMgO,gBAAgB,GAAG,kBAAzB;AAEA7F,QAAQ,CAACzC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAMwR,IAAI,GAAG/O,QAAQ,CAACgP,aAAT,CAAuB,oBAAvB,CAAb;AACA,MAAMxD,OAAO,GAAGuD,IAAI,CAACE,OAArB;AAEA,MAAMjC,YAAY,GAAG,IAAI/E,4DAAJ,CAAe;AAClCze,WAAO,cAAOgiB,OAAO,CAAC0D,UAAf,CAD2B;AAElCzR,SAAK,EAAE+N,OAAO,CAAC2D;AAFmB,GAAf,CAArB,CAJkD,CASlD;;AACA,MAAMlC,UAAU,GAAG,IAAImC,kDAAJ,CAAyB;AAC1C7Q,OAAG,YAAKnC,MAAM,CAACiT,QAAP,CAAgB5Q,QAArB,eAAkC+M,OAAO,CAAC0D,UAA1C,CADuC;AAE1CI,UAAM,EAAE;AACNvkB,SAAG,EAAEwkB,yDAAW,CAACD,MADX;AAENV,cAAQ,EAAE;AACR9kB,eAAO,EAAE+b,gBADD;AAERvY,kBAAU,EAAE,EAFJ;AAGR8S,qBAAa,EAAE;AACboP,gBAAM,EAAE;AACN9kB,gBAAI,EAAE,SADA;AAENZ,mBAAO,EAAE+b;AAFH;AADK;AAHP,OAFJ;AAYN5W,iBAAW,EAAE;AACXnF,eAAO,EAAE,qBADE;AAEXwD,kBAAU,EAAE;AAFD,OAZP;AAgBN2F,cAAQ,EAAE;AACRnJ,eAAO,EAAE;AADD;AAhBJ,KAFkC;AAsB1C2T,SAAK,EAAE+N,OAAO,CAAC2D;AAtB2B,GAAzB,CAAnB,CAVkD,CAmClD;;AACA,MAAM3W,KAAK,GAAGuU,oEAAc,CAACC,YAAD,EAAeC,UAAf,EAA2BpV,OAA3B,EAAoC;AAC9DgQ,QAAI,EAAJA;AAD8D,GAApC,CAA5B;AAIA4H,0DAAM,CACJ,2DAAC,wDAAD;AAA8B,UAAM,EAAExC;AAAtC,KACE,2DAAC,8DAAD;AACE,UAAM,EAAEzB,OAAO,CAAC0D,UADlB;AAEE,SAAK,EAAE1W,KAFT;AAGE,UAAM,EAAEyU,UAHV;AAIE,UAAM,EAAE,CAACyC,IAAeA;AAJ1B,KAME,2DAAC,uDAAD;AACE,QAAI,EAAE7H,IADR;AAEE,eAAW,EAAE,qBAAAA,IAAI;AAAA,aAAI1B,4BAAQ,YAAW0B,IAAZ,EAAX;AAAA,KAFnB;AAGE,WAAO,EAAEhQ;AAHX,KAKE,2DAAC,2DAAD,QACE,2DAAC,iEAAD;AAAe,WAAO,EAAE2T;AAAxB,IADF,CALF,CANF,CADF,CADI,EAmBJxL,QAAQ,CAACgP,aAAT,CAAuB,oBAAvB,CAnBI,CAAN;AAqBD,CA7DD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AAEA;AAEO,IAAMW,mBAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BACW;AAAA,wBAC0B,KAAK9oB,KAD/B;AAAA,UACC+oB,MADD,eACCA,MADD;AAAA,UACSpoB,SADT,eACSA,SADT;AAAA,UACoBM,CADpB,eACoBA,CADpB;AAEP,aACE;AACE,iBAAS,EACPG,sEAAM,4CAAqC2nB,MAAM,GAAG,UAAH,GAAgB,EAA3D;AAFV,SAKE,2DAAC,0DAAD;AACE,WAAG,EAAE9nB,CAAC,CAAC,cAAD,EAAiB;AAAEI,cAAI,EAAEV,SAAS,CAACU;AAAlB,SAAjB,CADR;AAEE,WAAG,EAAEV,SAFP;AAGE,iBAAS,EACPS,sEAAM,oCAA6B2nB,MAAM,GAAG,UAAH,GAAgB,EAAnD;AAJV,QALF,CADF;AAeD;AAlBH;;AAAA;AAAA,EAAyCznB,+CAAzC;AAqBAwnB,mBAAmB,CAAC9W,SAApB,GAAgC;AAC9B+W,QAAM,EAAEjX,iDAAS,CAACmF,IADY;AAE9BtW,WAAS,EAAEmR,iDAAS,CAACC,MAAV,CAAiBE,UAFE;AAG9BhR,GAAC,EAAE6Q,iDAAS,CAACM,IAAV,CAAeH;AAHY,CAAhC;AAMepQ,mIAAS,GAAGinB,mBAAH,CAAxB,E;;;;;;;AClCA;AACA,kBAAkB,6T;;;;;;;ACDlB;AACA,kBAAkB,0D;;;;;;;ACDlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CA;AACA;AAMA,IAAME,oBAAoB,GAAG,KAA7B;AACO,IAAM3lB,kBAAkB,GAAG,oBAA3B;AACA,IAAMC,OAAO,GAAG,SAAhB;AACA,IAAMC,SAAS,GAAG,WAAlB;;IAEcnB,c;;;AACnB,4BAAc;AAAA;;AACZF,WAAO,CAAC+mB,MAAR,CAAeC,WAAf;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKnmB,QAAL,GAAgB,EAAhB;AACD;;;;qCAEgBA,Q,EAAU;AACzB,WAAKA,QAAL,GAAgBA,QAAhB;AACD;;;gCAEWC,O,EAAS;AACnB,aAAOvB,IAAI,CAACkB,MAAL,CAAYE,OAAZ,CAAoBU,WAApB,CAAgCP,OAAhC,CAAP,CADmB,CAC6B;AACjD;;;4CAEuB;AACtB,aAAOvB,IAAI,CAACkB,MAAL,CAAY+e,SAAZ,GAAwBpB,IAAxB,CAA6B,UAAA6I,WAAW,EAAI;AACjD,YAAMC,KAAK,GAAGD,WAAW,CAACxS,KAAZ,CAAkB0S,WAAlB,EAAd;AACA,eAAO,UAAG5nB,IAAI,CAACkB,MAAL,CAAY2mB,IAAf,YAA4BxM,OAA5B,CAAoC,IAApC,cAA+CsM,KAA/C,EAAP;AACD,OAHM,CAAP;AAID;;;iCAEYpmB,O,EAAS;AACpB,aAAO,KAAKO,WAAL,CAAiBP,OAAjB,EACJumB,IADI,GAEJjJ,IAFI,CAEC,UAAAkJ,MAAM;AAAA,eAAIA,MAAM,CAACC,UAAX;AAAA,OAFP,CAAP;AAGD;;;;;;8FAEUvmB,Q;;;;;;;;;;;;;;;;AAAUwmB,yB,2DAAYtmB,kB;;uBACT,KAAKumB,qBAAL,E;;;AAAhBC,uB;;;;;4BACc,KAAK7mB,Q;;;;;;;;AAAhBC,uB;;uBACiB,KAAK6mB,YAAL,CAAkB7mB,OAAlB,C;;;AAAlB8mB,yB;;uBACA5mB,QAAQ,CAAC6mB,gFAAgB,CAAC/mB,OAAD,EAAU8mB,SAAV,CAAjB,C;;;AACd,qBAAKE,WAAL,CAAiBhnB,OAAjB,YAA6B4mB,OAA7B,SAAuC5mB,OAAvC,GAAkDE,QAAlD,EAA4DwmB,SAA5D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAKF1mB,O,EACAinB,c,EACA/mB,Q,EAEA;AAAA;;AAAA,UADAwmB,SACA,uEADYtmB,kBACZ;AACA,aAAO,IAAIwS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAMoU,EAAE,GAAG,KAAI,CAAC3mB,WAAL,CAAiBP,OAAjB,CAAX;;AAEA,YAAImnB,WAAJ;AACA,YAAIT,SAAS,KAAKrmB,OAAlB,EAA2B8mB,WAAW,GAAGD,EAAE,CAACE,SAAH,CAAaC,EAAb,CAAgBJ,cAAhB,CAAd,CAA3B,KACK,IAAIP,SAAS,KAAKpmB,SAAlB,EACH6mB,WAAW,GAAGD,EAAE,CAACE,SAAH,CAAaE,IAAb,CAAkBL,cAAlB,CAAd,CADG,KAEAE,WAAW,GAAGD,EAAE,CAAC/mB,IAAH,CAAQ8mB,cAAR,CAAd;AAELE,mBAAW,CACRI,EADH,CACM,UADN,EACkB,UAAAhB,IAAI,EAAI;AACtBrmB,kBAAQ,CAACsnB,6EAAa,CAACxnB,OAAD,EAAUumB,IAAV,CAAd,CAAR;;AACA,eAAI,CAACkB,gBAAL,CAAsBznB,OAAtB,EAA+BinB,cAA/B,EAA+C/mB,QAA/C,EAAyDwmB,SAAzD;;AACA7T,iBAAO,CAAC0T,IAAD,CAAP;AACD,SALH,EAMGgB,EANH,CAMM,OANN,EAMe,UAAA7J,GAAG,EAAI;AAClB,cAAIA,GAAG,CAACjV,KAAJ,KAAc,iCAAlB,EAAqD;AACnD,mBAAOhK,IAAI,CAACkB,MAAL,CAAY+e,SAAZ,GAAwBpB,IAAxB,CAA6B,gBAAuB;AAAA,kBAApB3d,MAAoB,QAApBA,MAAoB;AAAA,kBAAZgU,KAAY,QAAZA,KAAY;AACzDlV,kBAAI,CAACkB,MAAL,CAAYif,IAAZ,CACG8I,YADH,CACgBjpB,IADhB,EACsBkB,MADtB,EAC8BgU,KAD9B,EAEG2J,IAFH,CAEQ,UAAAqK,QAAQ;AAAA,uBAAIlpB,IAAI,CAACkB,MAAL,CAAYioB,eAAZ,CAA4BjoB,MAA5B,EAAoCgoB,QAApC,CAAJ;AAAA,eAFhB,EAGGrK,IAHH,CAGQ;AAAA,uBAAM,KAAI,CAAC0J,WAAL,CAAiBhnB,OAAjB,EAA0BinB,cAA1B,CAAN;AAAA,eAHR;AAID,aALM,CAAP;AAMD,WAPD,MAOO,IAAIvJ,GAAG,CAAClV,MAAJ,KAAe,GAAnB,EAAwB;AAC7B;AACAtI,oBAAQ,CAAC2nB,gFAAgB,CAAC7nB,OAAD,EAAU0d,GAAV,CAAjB,CAAR;;AACA,iBAAI,CAAC+J,gBAAL,CAAsBznB,OAAtB,EAA+BinB,cAA/B,EAA+C/mB,QAA/C;;AACA4S,kBAAM,CAAC4K,GAAD,CAAN;AACD;AACF,SApBH;AAqBD,OA9BM,CAAP;AA+BD;;;qCAEgB1d,O,EAASinB,c,EAAgB/mB,Q,EAAUwmB,S,EAAW;AAAA;;AAC7DhT,gBAAU,CAAC,YAAM;AACf,cAAI,CAACsT,WAAL,CAAiBhnB,OAAjB,EAA0BinB,cAA1B,EAA0C/mB,QAA1C,EAAoDwmB,SAApD;AACD,OAFS,EAEPX,oBAFO,CAAV;AAGD;;;;;;+FAEoB/lB,O;;;;;;;uBACA,KAAKO,WAAL,CAAiBP,OAAjB,EAA0B8nB,OAA1B,CAAkC;AAAEC,8BAAY,EAAE;AAAhB,iBAAlC,C;;;AAAbjmB,oB;kDACC;AACLJ,sBAAI,EAAEI,IAAI,CAACC,IAAL,CACHC,MADG,CACI,UAAAC,GAAG;AAAA,2BAAI,CAACA,GAAG,CAACC,GAAJ,CAAQC,cAAR,CAAuB,OAAvB,CAAL;AAAA,mBADP,EAEHE,GAFG,CAEC,UAAAJ,GAAG;AAAA,0GAAUA,GAAG,CAACC,GAAd;AAAmBM,wBAAE,EAAEP,GAAG,CAACO,EAA3B;AAA+BC,2BAAK,EAAEzC;AAAtC;AAAA,mBAFJ,CADD;AAIL2B,sBAAI,EAAE;AAAEE,yBAAK,EAAEC,IAAI,CAACY;AAAd,mBAJD;AAKLnB,sBAAI,EAAEO,IAAI,CAACa,MALN;AAMLf,sBAAI,EAAE;AAND,iB;;;;;;;;;;;;;;;;;;;;;+FAUY5B,O,EAAS6C,K,EAAOrD,O;;;;;;AAC7ByD,4B,kFACDzD,O;AACHsD,wBAAM,4FAAMtD,OAAO,CAACsD,MAAd,IAAsB,KAAtB,E;AACNC,sBAAI,EAAEvD,OAAO,CAACuD,IAAR,GACFT,MAAM,CAAC+D,IAAP,CAAY7G,OAAO,CAACuD,IAApB,EAA0BV,GAA1B,CAA8B,UAAA2lB,CAAC;AAAA,4GAAQA,CAAR,EAAYxoB,OAAO,CAACuD,IAAR,CAAailB,CAAb,CAAZ;AAAA,mBAA/B,CADE,GAEFxnB;;;uBAEa,KAAKD,WAAL,CAAiBP,OAAjB,EAA0BgB,IAA1B,CAA+BiC,YAA/B,C;;;AAAbnB,oB;kDAEC;AACLJ,sBAAI,EAAEI,IAAI,CAACM,IAAL,CAAUC,GAAV,CAAc,UAAAH,GAAG;AAAA,0GAAUA,GAAV;AAAeM,wBAAE,EAAEN,GAAG,CAACqB,GAAvB;AAA4Bd,2BAAK,EAAEzC;AAAnC;AAAA,mBAAjB,CADD;AAEL2B,sBAAI,EAAE;AAAEE,yBAAK,EAAEC,IAAI,CAACM,IAAL,CAAU0F;AAAnB,mBAFD;AAGLvG,sBAAI,EAAE,CAHD;AAILK,sBAAI,EAAE;AAJD,iB;;;;;;;;;;;;;;;;;;;;;+FAQW5B,O,EAASwC,E;;;;;;;uBACR,KAAKjC,WAAL,CAAiBP,OAAjB,EAA0BgJ,GAA1B,CAA8BxG,EAA9B,EAAkC;AAAEylB,2BAAS,EAAE;AAAb,iBAAlC,C;;;AAAbnmB,oB;kDACC;AAAEJ,sBAAI,EAAE,CAAC,+EAAKI,IAAN;AAAYU,sBAAE,EAAEV,IAAI,CAACU,EAArB;AAAyBe,uBAAG,EAAEzB,IAAI,CAACU,EAAnC;AAAuCC,yBAAK,EAAEzC;AAA9C;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGYA,O,EAASkC,G;;;;;;;uBACT,KAAK3B,WAAL,CAAiBP,OAAjB,EAA0BkoB,IAA1B,CAA+BhmB,GAA/B,C;;;AAAbJ,oB;kDACC;AACLJ,sBAAI,EAAE,CAAC,+EACAQ,GADD;AACMM,sBAAE,EAAEV,IAAI,CAACU,EADf;AACmBe,uBAAG,EAAEzB,IAAI,CAACU,EAD7B;AACiCC,yBAAK,EAAEzC,OADxC;AACiD+D,wBAAI,EAAEjC,IAAI,CAACqmB;AAD5D;AADD,iB;;;;;;;;;;;;;;;;;;;;;+FAOYjmB,G;;;;;;;AACnB;AACQO,qB,GAAsBP,G,CAAtBO,K,EAAU2lB,O,yFAAYlmB,G;;uBACX,KAAK3B,WAAL,CAAiBkC,KAAjB,EAAwB4lB,GAAxB,CAA4BD,OAA5B,C;;;AAAbtmB,oB;kDACC;AAAEJ,sBAAI,EAAE,CAAC,+EAAKQ,GAAN;AAAW6B,wBAAI,EAAEjC,IAAI,CAACqmB;AAAtB;AAAR,iB;;;;;;;;;;;;;;;;;;;;;+FAGYjmB,G;;;;;;uBACb,KAAK3B,WAAL,CAAiB2B,GAAG,CAACO,KAArB,EAA4B6lB,MAA5B,CAAmCpmB,GAAnC,C;;;kDACC;AAAER,sBAAI,EAAE,CAACQ,GAAD;AAAR,iB;;;;;;;;;;;;;;;;;;gCAGGlC,O,EAAS8C,M,EAAQ;AAC3B,aAAO,KAAKvC,WAAL,CAAiBP,OAAjB,EAA0BsgB,WAA1B,CAAsC;AAAEzd,aAAK,EAAE;AAAEC,gBAAM,EAANA;AAAF;AAAT,OAAtC,CAAP;AACD;;;sCAEiB;AAChB,YAAM,IAAI8E,KAAJ,CAAU,iBAAV,CAAN;AACD;;;iCAEY;AACX,YAAM,IAAIA,KAAJ,CAAU,iBAAV,CAAN;AACD;;;gCAEW;AACV,YAAM,IAAIA,KAAJ,CAAU,iBAAV,CAAN;AACD;;;2CAEsB;AACrB,YAAM,IAAIA,KAAJ,CAAU,iBAAV,CAAN;AACD;;;yCAEoB;AACnB,YAAM,IAAIA,KAAJ,CAAU,iBAAV,CAAN;AACD;;;4CAEuB;AACtB,YAAM,IAAIA,KAAJ,CAAU,iBAAV,CAAN;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLH;AACA;AAEA;AACA;AACA;AAEA;AACA;;IAEM2gB,a;;;;;AACJ,yBAAYxrB,KAAZ,EAAmBgR,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,iNAAMhR,KAAN,EAAagR,OAAb;AACA,UAAKW,KAAL,GAAaX,OAAO,CAACW,KAArB;AAEA,UAAK1R,KAAL,GAAa;AACXwrB,oBAAc,EAAE;AADL,KAAb;;AAIA,UAAK9Z,KAAL,CACG+Z,mBADH,GAEGnL,IAFH,CAEQ,UAAAgE,OAAO,EAAI;AACf,YAAKhkB,QAAL,CAAc;AACZkrB,sBAAc,EAAE,KADJ;AAEZlH,eAAO,EAAEA;AAFG,OAAd;AAID,KAPH,EAQG7D,KARH,CAQS,UAAAhV,KAAK,EAAI;AACd,YAAKnL,QAAL,CAAc;AACZkrB,sBAAc,EAAE,KADJ;AAEZ/f,aAAK,EAAE;AACLxK,iBAAO,EAAE,qCADJ;AAEL2jB,gBAAM,EAAEnZ,KAAK,CAACxK;AAFT;AAFK,OAAd;AAOD,KAhBH;;AAR0B;AAyB3B;;;;8BAESR,O,EAAS;AAAA,UACT6jB,OADS,GACG,KAAKtkB,KADR,CACTskB,OADS;AAEjBA,aAAO,CAACO,SAAR,CAAkBpkB,OAAlB;AACD;;;6BAEQ;AAAA,UACC6jB,OADD,GACa,KAAKtkB,KADlB,CACCskB,OADD;AAEPA,aAAO,CAACG,MAAR;AACD;;;gCAEWhZ,K,EAAO;AACjB,WAAKnL,QAAL,CAAc;AACZmL,aAAK,EAAE;AACLxK,iBAAO,EAAE,+BADJ;AAEL2jB,gBAAM,EAAEnZ,KAAK,CAACxK;AAFT;AADK,OAAd;AAOA,YAAMwK,KAAN;AACD;;;6BAEQ;AAAA;;AACP;AADO,wBAEgD,KAAK1L,KAFrD;AAAA,UAEC2kB,OAFD,eAECA,OAFD;AAAA,UAEUoD,QAFV,eAEUA,QAFV;AAAA,UAEoBtb,UAFpB,eAEoBA,UAFpB;AAAA,UAEgCL,QAFhC,eAEgCA,QAFhC;AAAA,UAE0CnL,CAF1C,eAE0CA,CAF1C;AAAA,wBAGoB,KAAKhB,KAHzB;AAAA,UAGCyL,KAHD,eAGCA,KAHD;AAAA,UAGQ6Y,OAHR,eAGQA,OAHR;AAAA,UAIDkH,cAJC,GAIkB,KAAKxrB,KAJvB,CAIDwrB,cAJC;AAMPA,oBAAc,GACZA,cAAc,IACd,CAAC1D,QAAD,EAAWtb,UAAX,EAAuBL,QAAvB,EAAiCnI,IAAjC,CAAsC,UAAAiW,UAAU;AAAA,eAC9C,CAAC,SAAD,EAAY,SAAZ,EAAuB3N,QAAvB,CAAgC2N,UAAU,CAACH,WAA3C,CAD8C;AAAA,OAAhD,CAFF;AAMA,aACE;AAAK,iBAAS,EAAC;AAAf,SACG0R,cAAc,IACb;AAAK,iBAAS,EAAC;AAAf,SACE,2DAAC,6DAAD;AAAS,YAAI,EAAC;AAAd,QADF,CAFJ,EAMG/f,KAAK,IACJ;AAAK,iBAAS,EAAC;AAAf,SACE,sEAAIzK,CAAC,CAACyK,KAAK,CAACxK,OAAP,CAAL,CADF,EAEE,sEAAID,CAAC,CAAC,4BAAD,EAA+B;AAAEyK,aAAK,EAAEA,KAAK,CAACmZ;AAAf,OAA/B,CAAL,CAFF,CAPJ,EAYG,CAAC4G,cAAD,IACC,CAAC/f,KADF,IAEG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAC,iEAAD;AACE,eAAO,EAAEiZ,OADX;AAEE,YAAI,EAAEJ,OAAO,CAACoH,OAAR,EAFR;AAGE,mBAAW,EAAE,qBAAAjrB,OAAO;AAAA,iBAAI,MAAI,CAACokB,SAAL,CAAepkB,OAAf,CAAJ;AAAA,SAHtB;AAIE,gBAAQ,EAAE;AAAA,iBAAM,MAAI,CAACgkB,MAAL,EAAN;AAAA,SAJZ;AAKE,eAAO,EAAEH;AALX,QArBN,EA6BE,2DAAC,yDAAD,OA7BF,CADF;AAiCD;;;;EA9FyBjjB,+C;;AAiG5BkqB,aAAa,CAAC3Z,YAAd,GAA6B;AAC3BF,OAAK,EAAEG,iDAAS,CAACC;AADU,CAA7B;AAIe6Z,wIAAa,CAAC/pB,oEAAS,GAAG2pB,aAAH,CAAV,CAA5B,E;;;;;;;AC/GA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAyBA;AAUA;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;;AAEA,IAAMxG,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,SAAO;AACjC+C,YAAQ,EAAE9e,oEAAa,EADU;AAEjC4iB,QAAI,EAAEC,qEAAkB,EAFS;AAGjCrf,cAAU,EAAEwO,wEAAe,EAHM;AAIjC7O,YAAQ,EAAE4O,oEAAa;AAJU,GAAP;AAAA,CAA5B;;AAOA,IAAM4Q,aAAa,GAAG,SAAhBA,aAAgB,CAAC1G,gBAAD,EAAmB6G,UAAnB;AAAA,SACpBC,qEAAW,CAAChH,mBAAD,CAAX,CAAiCE,gBAAjC,EAAmD6G,UAAnD,CADoB;AAAA,CAAtB;;AAGeH,4EAAf,E;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAO,IAAMvP,SAAS,GAAG,SAAZA,SAAY,CAACtK,MAAD,EAASka,SAAT,EAAuB;AAC9C,MAAIxC,MAAM,GAAG,EAAb;;AACA,OAAK,IAAM9V,GAAX,IAAkB5B,MAAlB,EAA0B;AACxB0X,UAAM,CAAC9V,GAAD,CAAN,GAAcsY,SAAS,CAACla,MAAM,CAAC4B,GAAD,CAAP,EAAcA,GAAd,CAAvB;AACD;;AACD,SAAO8V,MAAP;AACD,CANM;AAQA,IAAMhE,YAAY,GAAG,SAAfA,YAAe,CAAC1T,MAAD,EAAS9M,MAAT,EAAoB;AAC9C,MAAIwkB,MAAM,GAAG,EAAb;;AACA,OAAK,IAAM9V,GAAX,IAAkB5B,MAAlB,EAA0B;AACxB,QAAI9M,MAAM,CAAC8M,MAAM,CAAC4B,GAAD,CAAP,EAAcA,GAAd,CAAV,EAA8B;AAC5B8V,YAAM,CAAC9V,GAAD,CAAN,GAAc5B,MAAM,CAAC4B,GAAD,CAApB;AACD;AACF;;AACD,SAAO8V,MAAP;AACD,CARM;AAUA,IAAMxQ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACI,GAAD,EAAMqM,IAAN,EAAe;AACjD,SAAOngB,MAAM,CAAC+D,IAAP,CAAY+P,GAAZ,EAAiBrO,MAAjB,CAAwB,UAACye,MAAD,EAAS9V,GAAT,EAAiB;AAC9C,QAAIA,GAAG,KAAK+R,IAAZ,EAAkB;AAChB+D,YAAM,CAAC9V,GAAD,CAAN,GAAc0F,GAAG,CAAC1F,GAAD,CAAjB;AACD;;AACD,WAAO8V,MAAP;AACD,GALM,EAKJ,EALI,CAAP;AAMD,CAPM,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBP;AACA;AACA;AAEO,IAAMzN,cAAc,GAAG,gBAAvB;AACP,IAAMkQ,qBAAqB,GAAG,uBAA9B;AACA,IAAMC,4BAA4B,GAAG,8BAArC;AACA,IAAMC,cAAc,GAAG,gBAAvB;AACA,IAAMC,mBAAmB,GAAG,qBAA5B;AACA,IAAMC,mBAAmB,GAAG,qBAA5B;AACA,IAAMC,wBAAwB,GAAG,0BAAjC;AACA,IAAMC,mBAAmB,GAAG,qBAA5B;AACA,IAAMC,2BAA2B,GAAG,6BAApC;AACA,IAAMC,cAAc,GAAG,gBAAvB;AACA,IAAMC,sBAAsB,GAAG,wBAA/B;AACA,IAAMvU,aAAa,GAAG,eAAtB;;AAEA,IAAMwU,eAAe,GAAG,SAAlBA,eAAkB,CAACpkB,UAAD,EAAaqkB,WAAb,EAA6B;AACnD,MAAMC,GAAG,GAAGtkB,UAAU,CAACukB,SAAX,CAAqB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACtkB,SAAF,CAAYjD,EAAZ,KAAmBonB,WAAvB;AAAA,GAAtB,CAAZ;AACA,mGAAWrkB,UAAU,CAAC4L,KAAX,CAAiB,CAAjB,EAAoB0Y,GAApB,CAAX,mFAAwCtkB,UAAU,CAAC4L,KAAX,CAAiB0Y,GAAG,GAAG,CAAvB,CAAxC;AACD,CAHD;;AAKA,IAAM1jB,SAAS,GAAG,SAAZA,SAAY,GAAwB;AAAA,MAAvBnJ,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AACxC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKqoB,qBAAL;AACE,aAAOtoB,MAAM,CAAC2C,QAAP,CAAgBmU,QAAvB;;AACF,SAAK2R,mBAAL;AACE,uGAAWpsB,KAAX,IAAkB2D,MAAM,CAAC2C,QAAzB;;AACF,SAAKomB,sBAAL;AAA6B;AAC3B,YAAMG,GAAG,GAAG7sB,KAAK,CAAC8sB,SAAN,CACV,UAAAE,CAAC;AAAA,iBAAIA,CAAC,CAACxmB,UAAF,CAAaymB,UAAb,KAA4BtpB,MAAM,CAACgF,SAAvC;AAAA,SADS,CAAZ;AAGA,YAAIkkB,GAAG,KAAK,CAAC,CAAb,EAAgB,OAAO7sB,KAAP;AAChB,YAAMktB,OAAO,GAAGltB,KAAK,CAAC6sB,GAAD,CAArB;AACA,YAAMM,aAAa,GACjBD,OAAO,CAAC1mB,UAAR,CAAmB+B,UAAnB,KAAkC/E,SAAlC,IAA+C;AAC/C0pB,eAAO,CAAC1mB,UAAR,CAAmB+B,UAAnB,CAA8BuC,MAA9B,KAAyC,CAF3C;AAGA,YAAME,QAAQ,GAAGmiB,aAAa,kFACrBD,OADqB;AACZ1mB,oBAAU,EAAE,+EAAK0mB,OAAO,CAAC1mB,UAAf;AAA2B4mB,mBAAO,EAAE;AAApC;AADE,4FAGrBF,OAHqB;AAIxB1mB,oBAAU,EAAE,+EACP0mB,OAAO,CAAC1mB,UADH;AAER+B,sBAAU,EAAEokB,eAAe,CACzBO,OAAO,CAAC1mB,UAAR,CAAmB+B,UADM,EAEzB5E,MAAM,CAACipB,WAFkB;AAFnB;AAJc,UAA9B;AAYA,yGAAW5sB,KAAK,CAACmU,KAAN,CAAY,CAAZ,EAAe0Y,GAAf,CAAX,IAAgC7hB,QAAhC,mFAA6ChL,KAAK,CAACmU,KAAN,CAAY0Y,GAAG,GAAG,CAAlB,CAA7C;AACD;;AACD;AACE,aAAO7sB,KAAP;AA7BJ;AA+BD,CAhCD;;AAkCA,IAAMqtB,0BAA0B,GAAG;AACjCvT,aAAW,EAAE,SADoB;AAEjC9R,MAAI,EAAE,EAF2B;AAGjCC,QAAM,EAAE,EAHyB;AAIjCC,QAAM,EAAE;AAJyB,CAAnC;;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAwB;AAAA,MAAvBnI,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;AAC1C,MAAIkpB,GAAJ;;AACA,UAAQlpB,MAAM,CAACC,IAAf;AACE,SAAKmY,cAAL;AACE,UAAI/b,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAT,EAA2B;AACzB,8FACKhD,KADL,mFAEG2D,MAAM,CAACX,OAFV,iFAEyBhD,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAF9B;AAEgD8W,qBAAW,EAAE;AAF7D;AAID;;AACD,4FAAY9Z,KAAZ,mFAAoB2D,MAAM,CAACX,OAA3B,EAAqCqqB,0BAArC;;AACF,SAAKpB,qBAAL;AACE,4FACKjsB,KADL,mFAEG2D,MAAM,CAACX,OAFV;AAGI8W,mBAAW,EAAE;AAHjB,SAIOnW,MAAM,CAAC2C,QAAP,CAAgB6B,WAJvB;;AAOF,SAAK+jB,4BAAL;AACE,4FAAYlsB,KAAZ,mFAAoB2D,MAAM,CAACX,OAA3B,EAAqC;AAAE8W,mBAAW,EAAE;AAAf,OAArC;;AACF,SAAKsS,mBAAL;AACE,4FACKpsB,KADL,mFAEG2D,MAAM,CAACX,OAFV,iFAGOhD,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAHZ;AAIIgF,YAAI,4FACChI,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAL,CAAsBgF,IADvB,IAEF;AACExB,oBAAU,EAAE;AACV2B,uBAAW,EAAE;AACXmlB,mBAAK,EAAE;AAAE1pB,oBAAI,EAAED,MAAM,CAACX,OAAf;AAAwByK,sBAAM,EAAE,CAAC9J,MAAM,CAAC6B,EAAR;AAAhC;AADI,aADH;AAIVid,qBAAS,EAAE9e,MAAM,CAAC2C,QAAP,CAAgBE,UAAhB,CAA2BymB,UAJ5B;AAKVrpB,gBAAI,EAAE;AALI;AADd,SAFE;AAJR;;AAkBF,SAAK0oB,wBAAL;AACE,4FACKtsB,KADL,mFAEG2D,MAAM,CAACX,OAFV,iFAGOhD,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAHZ;AAIIiF,cAAM,4FAAMjI,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAL,CAAsBiF,MAA5B,IAAoCtE,MAAM,CAAC2C,QAA3C;AAJV;;AAOF,SAAKimB,mBAAL;AACEM,SAAG,GAAG7sB,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAL,CAAsBiF,MAAtB,CAA6B6kB,SAA7B,CACJ,UAAAtK,CAAC;AAAA,eAAI7e,MAAM,CAACkF,UAAP,CAAkBtC,GAAlB,KAA0Bic,CAAC,CAACjc,GAAhC;AAAA,OADG,CAAN;AAGA,UAAIsmB,GAAG,KAAK,CAAC,CAAb,EAAgB,OAAO7sB,KAAP;AAChB,4FACKA,KADL,mFAEG2D,MAAM,CAACX,OAFV,iFAGOhD,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAHZ;AAIIiF,cAAM,4FACDjI,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAL,CAAsBiF,MAAtB,CAA6BkM,KAA7B,CAAmC,CAAnC,EAAsC0Y,GAAtC,CADC,mFAED7sB,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAL,CAAsBiF,MAAtB,CAA6BkM,KAA7B,CAAmC0Y,GAAG,GAAG,CAAzC,CAFC;AAJV;;AAUF;AACE,aAAO7sB,KAAP;AA9DJ;AAgED,CAlED;;AAoEe2M,4HAAe,CAAC;AAAExD,WAAS,EAATA,SAAF;AAAahB,aAAW,EAAXA;AAAb,CAAD,CAA9B,E,CAEA;;AACO,IAAMolB,aAAa,GAAG,SAAhBA,aAAgB,CAACvqB,OAAD;AAAA,MAAUwC,EAAV,uEAAe,IAAf;AAAA,MAAqBhD,OAArB,uEAA+B,EAA/B;AAAA,SAAuC;AAClEoY,SAAK,EAAE,CAACmB,cAAD,EAAiBkQ,qBAAjB,EAAwCC,4BAAxC,CAD2D;AAElElpB,WAAO,EAAPA,OAFkE;AAGlEwC,MAAE,EAAFA,EAHkE;AAIlEhD,WAAO,EAAPA,OAJkE;AAKlEqY,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAAC4qB,aAAP,CAAqBvqB,OAArB,CAAJ;AAAA;AALmD,GAAvC;AAAA,CAAtB;AAQA,IAAMwqB,KAAK,GAAG,SAARA,KAAQ,CACnBtU,QADmB,EAEnB3Q,UAFmB,EAGnBR,WAHmB,EAInB0lB,WAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAKhB,iBAAMvqB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwB0S,OAAO,CAACb,GAAR,CACzBxM,UAAU,CAAClD,GAAX,CACE,UAAAoD,SAAS;AAAA,yBACPA,SAAS,CAACjD,EAAV,IACAtC,QAAQ,CAACwqB,aAAa,CAACjlB,SAAD,CAAd,CAAR,CAAmC6X,IAAnC,CAAwC,UAAAqN,CAAC;AAAA,2BAAIA,CAAC,CAACjpB,IAAF,CAAO,CAAP,EAAUc,EAAd;AAAA,mBAAzC,CAFO;AAAA,iBADX,CADyB,CADxB;;AAAA;AACGooB,4BADH;AAQHC,mCAAmB,CAAC3U,QAAD,CAAnB;AARG,iDASIhW,QAAQ,CACbyf,aAAa,CAACzJ,QAAD,EAAW0U,YAAX,EAAyB7lB,WAAzB,EAAsC0lB,WAAtC,CADA,CATZ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;AAmBA,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAAC5U,QAAD,EAAWzQ,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAAyB,kBAAOvF,QAAP,EAAiBiU,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACxC+V,uBADwC,GAC9Ba,sBAAsB,CAAC5W,QAAQ,EAAT,EAAa+B,QAAb,EAAuBzQ,SAAvB,CADQ;AAExC0kB,6BAFwC,GAExBD,OAAO,CAAC1mB,UAAR,CAAmB+B,UAAnB,CAA8BuC,MAA9B,KAAyC,CAFjB;AAAA,kDAGvC5H,QAAQ,CAAC;AACd0X,uBAAK,EAAE,CAAC6R,cAAD,EAAiBC,sBAAjB,EAAyCvU,aAAzC,CADO;AAEdnV,yBAAO,EAAEkW,QAAQ,CAACzT,KAFJ;AAGdD,oBAAE,EAAE0T,QAAQ,CAAC3S,GAHC;AAIdoC,2BAAS,EAAEukB,OAAO,CAAC1mB,UAAR,CAAmBymB,UAJhB;AAKdL,6BAAW,EAAEnkB,SAAS,CAAClC,GALT;AAMdsU,yBAAO,EAAE,iBAAAlY,MAAM;AAAA,2BACbwqB,aAAa,GACTxqB,MAAM,CAACigB,aAAP,CAAqBsK,OAAO,CAAC1mB,UAAR,CAAmBymB,UAAxC,CADS,GAETtqB,MAAM,CAACkgB,sBAAP,CACEqK,OAAO,CAAC1mB,UAAR,CAAmBymB,UADrB,EAEEC,OAAO,CAAC1mB,UAAR,CAAmB+B,UAAnB,CAA8BvE,IAA9B,CACE,UAAA+oB,CAAC;AAAA,6BAAIA,CAAC,CAACtkB,SAAF,CAAYjD,EAAZ,KAAmBiD,SAAS,CAAClC,GAAjC;AAAA,qBADH,EAEEynB,MAFF,CAESC,SAJX,CAHS;AAAA;AAND,iBAAD,CAH+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAzB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;AAqBA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAhV,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAAI,kBAAOhW,QAAP,EAAiBiU,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBsD,wBADyB,GACd0T,yBAAyB,CACxChX,QAAQ,EADgC,EAExC+B,QAAQ,CAACzT,KAF+B,EAGxCyT,QAAQ,CAAC3S,GAH+B,CADX;AAMzB2mB,uBANyB,GAMfzS,QAAQ,CAACzW,IAAT,CAAc,UAAAgpB,CAAC;AAAA,yBAAIA,CAAC,CAACxmB,UAAF,CAAa4nB,KAAb,KAAuB,KAA3B;AAAA,iBAAf,CANe;AAAA,kDAOxBlrB,QAAQ,CAAC;AACd0X,uBAAK,EAAE,CAAC6R,cAAD,EAAiBC,sBAAjB,EAAyCvU,aAAzC,CADO;AAEdnV,yBAAO,EAAEkW,QAAQ,CAACzT,KAFJ;AAGdD,oBAAE,EAAE0T,QAAQ,CAAC3S,GAHC;AAIdoC,2BAAS,EAAEukB,OAAO,CAAC1mB,UAAR,CAAmBymB,UAJhB;AAKdpS,yBAAO,EAAE,iBAAAlY,MAAM;AAAA,2BAAIA,MAAM,CAACigB,aAAP,CAAqBsK,OAAO,CAAC1mB,UAAR,CAAmBymB,UAAxC,CAAJ;AAAA;AALD,iBAAD,CAPgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB;AAgBA,IAAMoB,WAAW,GAAG,SAAdA,WAAc,CAAAnV,QAAQ,EAAI;AACrCoV,oBAAkB,CAACpV,QAAD,CAAlB;AACA,SAAO4J,iBAAiB,CAAC5J,QAAD,CAAxB;AACD,CAHM;AAKA,IAAMqV,UAAU,GAAG,SAAbA,UAAa,CAAArV,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAAI,kBAAOhW,QAAP,EAAiBiU,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9BqX,oBAD8B,GACvBC,wBAAwB,CACnCtX,QAAQ,EAD2B,EAEnC+B,QAAQ,CAACzT,KAF0B,EAGnCyT,QAAQ,CAAC3S,GAH0B,CADD;AAAA,kDAM7BrD,QAAQ,CAAC;AACd0X,uBAAK,EAAE,CAAC2R,mBAAD,EAAsBC,2BAAtB,EAAmDrU,aAAnD,CADO;AAEdnV,yBAAO,EAAEkW,QAAQ,CAACzT,KAFJ;AAGdD,oBAAE,EAAE0T,QAAQ,CAAC3S,GAHC;AAIdsC,4BAAU,EAAE2lB,IAJE;AAKd3T,yBAAO,EAAE,iBAAAlY,MAAM;AAAA,2BAAIA,MAAM,CAACogB,iBAAP,CAAyByL,IAAzB,CAAJ;AAAA;AALD,iBAAD,CANqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAeP,IAAM7L,aAAa,GAAG,SAAhBA,aAAgB,CACpBzJ,QADoB,EAEpB9Q,UAFoB;AAAA,MAGpBL,WAHoB,uEAGN,cAHM;AAAA,MAIpBM,WAJoB,uEAIN,EAJM;AAAA,SAKhB;AACJuS,SAAK,EAAE,CAACuR,cAAD,EAAiBC,mBAAjB,EAAsCjU,aAAtC,CADH;AAEJnV,WAAO,EAAEkW,QAAQ,CAACzT,KAFd;AAGJD,MAAE,EAAE0T,QAAQ,CAAC3S,GAHT;AAIJsU,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aACbA,MAAM,CAACggB,aAAP,CACE+L,iBAAiB,CAACxV,QAAD,CADnB,EAEE9Q,UAFF,EAGEL,WAHF,EAIEM,WAJF,CADa;AAAA;AAJX,GALgB;AAAA,CAAtB;;AAkBA,IAAMya,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA5J,QAAQ;AAAA,SAAK;AACrC0B,SAAK,EAAE,CAACyR,mBAAD,EAAsBC,wBAAtB,EAAgDnU,aAAhD,CAD8B;AAErCnV,WAAO,EAAEkW,QAAQ,CAACzT,KAFmB;AAGrCD,MAAE,EAAE0T,QAAQ,CAAC3S,GAHwB;AAIrCsU,WAAO,EAAE,iBAAAlY,MAAM;AAAA,aAAIA,MAAM,CAACmgB,iBAAP,CAAyB4L,iBAAiB,CAACxV,QAAD,EAAW,IAAX,CAA1C,CAAJ;AAAA;AAJsB,GAAL;AAAA,CAAlC,C,CAOA;AACA;AACA;AACA;AACA;;;AACO,IAAMyV,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACjC,MAAMhrB,MAAM,GAAGsF,gEAAe,CAAC,UAAD,EAAa,kBAAb,CAA9B;;AACAtF,QAAM,CAACkX,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,2EAAiB,kBAAMlY,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACQA,MAAM,CAACsG,eAAP,CACrB,UADqB,EAErB,kBAFqB,CADR;;AAAA;AACT3C,sBADS;AAAA;AAAA,qBAKIsP,OAAO,CAACb,GAAR,CACjBzO,QAAQ,CAAC5B,IAAT,CAAcW,GAAd,CAAkB,UAAAupB,OAAO,EAAI;AAC3B,uBAAO,OAAOA,OAAO,CAACC,KAAf,KAAyB,QAAzB,GACHD,OADG,GAEHjsB,MAAM,CACH0Y,cADH,gFAEOuT,OAFP;AAGIC,uBAAK,EAAE,CACL;AACEC,2BAAO,EAAEF,OAAO,CAACC,KADnB;AAEEE,2BAAO,EAAE;AAFX,mBADK;AAHX,oBAUGzO,IAVH,CAUQ,UAAAxb,IAAI;AAAA,yBAAIA,IAAI,CAACJ,IAAL,CAAU,CAAV,CAAJ;AAAA,iBAVZ,CAFJ;AAaD,eAdD,CADiB,CALJ;;AAAA;AAKTA,kBALS;AAAA,+HAuBH4B,QAvBG;AAuBO5B,oBAAI,EAAJA;AAvBP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB;;AAAA;AAAA;AAAA;AAAA;;AAyBA,SAAOf,MAAP;AACD,CA5BM;;AA8BP,IAAM+pB,aAAa,GAAG,SAAhBA,aAAgB;AAAA,MAAGmB,KAAH,SAAGA,KAAH;AAAA,SACpB5T,+DAAc,CAAC,kBAAD,EAAqB;AACjC4T,SAAK,EAAE,CAAC;AAAEC,aAAO,EAAED,KAAX;AAAkBE,aAAO,EAAE;AAA3B,KAAD;AAD0B,GAArB,CADM;AAAA,CAAtB;;AAKA,IAAML,iBAAiB,GAAG,SAApBA,iBAAoB,CAACxV,QAAD,EAAkC;AAAA,MAAvB8V,UAAuB,uEAAV,KAAU;AAAA,MAClDzoB,GADkD,GACnC2S,QADmC,CAClD3S,GADkD;AAAA,MAC7Cd,KAD6C,GACnCyT,QADmC,CAC7CzT,KAD6C;AAE1D,MAAMwpB,KAAK,GAAGD,UAAU,GAAG,CAAC,KAAD,CAAH,GAAa,CAAC,KAAD,CAArC,CAF0D,CAG1D;AACA;;AACA,SAAOE,MAAM,CAAChW,QAAD,CAAN,GACH;AACE9S,SAAK,EAAE;AACLxC,UAAI,EAAE,eADD;AAELqrB,WAAK,EAALA,KAFK;AAGLxhB,YAAM,EAAE,CAAClH,GAAD;AAHH;AADT,GADG,GAQH;AACE0T,cAAU,EAAE;AACVrW,UAAI,EAAE6B,KADI;AAEVwpB,WAAK,EAALA,KAFU;AAGVxhB,YAAM,EAAE,CAAClH,GAAD;AAHE,KADd;AAMEH,SAAK,EAAE;AACLxC,UAAI,EAAE,eADD;AAELqrB,WAAK,EAALA,KAFK;AAGLxhB,YAAM,EAAE,WAAIhI,KAAJ,cAAac,GAAb,EAHH;AAIL0b,cAAQ,EAAE;AAJL;AANT,GARJ;AAqBD,CA1BD,C,CA4BA;;;AACA,IAAMkN,UAAU,GAAG,SAAbA,UAAa,CAACnvB,KAAD,EAAQwF,EAAR;AAAA,SACjBxF,KAAK,CAACyB,IAAN,CAAWgZ,QAAX,CAAoBtR,SAApB,CAA8BnF,IAA9B,CAAmC,UAAAgpB,CAAC;AAAA,WAAIA,CAAC,CAACxmB,UAAF,CAAaymB,UAAb,KAA4BznB,EAAhC;AAAA,GAApC,CADiB;AAAA,CAAnB;;AAEA,IAAM4pB,UAAU,GAAG,SAAbA,UAAa,CAACpvB,KAAD,EAAQwF,EAAR;AAAA,SAAesW,4DAAW,CAAC9b,KAAD,EAAQ,kBAAR,EAA4BwF,EAA5B,CAA1B;AAAA,CAAnB;;AACA,IAAM6pB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACrvB,KAAD,EAAQgD,OAAR,EAAoB;AAChD,MAAIhD,KAAK,CAACyB,IAAN,CAAWgZ,QAAX,CAAoBtS,WAApB,CAAgCnF,OAAhC,CAAJ,EAA8C;AAC5C,WAAOhD,KAAK,CAACyB,IAAN,CAAWgZ,QAAX,CAAoBtS,WAApB,CAAgCnF,OAAhC,CAAP;AACD;;AACD,SAAOqqB,0BAAP;AACD,CALD;;AAOA,IAAMiC,cAAc,GAAG,SAAjBA,cAAiB,CAACtvB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AAC7C,MAAMgpB,IAAI,GAAGC,wBAAwB,CAACzuB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,CAArC;AACA,SAAOgpB,IAAI,GACPe,gBAAgB,CAAC/pB,EAAD,EAAKxC,OAAL,EAAcwrB,IAAI,CAAChoB,UAAL,CAAgBgpB,KAAhB,CAAsBX,KAApC,CADT,GAEP,IAFJ;AAGD,CALD;;AAOA,IAAMJ,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACzuB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AACvD,MAAMiqB,KAAK,GAAGJ,qBAAqB,CAACrvB,KAAD,EAAQgD,OAAR,CAAnC;AACA,MAAMY,IAAI,GAAGsrB,MAAM,CAAC;AAAEzpB,SAAK,EAAEzC;AAAT,GAAD,CAAN,GAA6B,OAA7B,GAAuC,YAApD;AACA,SAAOysB,KAAK,CAACxnB,MAAN,CAAajE,IAAb,CACL,UAAAwe,CAAC;AAAA,WAAIA,CAAC,CAAChc,UAAF,CAAa2B,WAAb,CAAyBvE,IAAzB,EAA+B6J,MAA/B,CAAsC2M,OAAtC,CAA8C5U,EAA9C,MAAsD,CAAC,CAA3D;AAAA,GADI,CAAP;AAGD,CAND;;AAQA,IAAMuoB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC/tB,KAAD,EAAQkZ,QAAR,EAAkBzQ,SAAlB,EAAgC;AAC7D,MAAMgS,QAAQ,GAAG0T,yBAAyB,CACxCnuB,KADwC,EAExCkZ,QAAQ,CAACzT,KAF+B,EAGxCyT,QAAQ,CAAC3S,GAH+B,CAA1C;AAKA,SAAOkU,QAAQ,CAACzW,IAAT,CAAc,UAAAgpB,CAAC;AAAA,WACpBA,CAAC,CAACxmB,UAAF,CAAa+B,UAAb,CAAwBvE,IAAxB,CAA6B,UAAA+oB,CAAC;AAAA,aAAIA,CAAC,CAACtkB,SAAF,CAAYjD,EAAZ,KAAmBiD,SAAS,CAAClC,GAAjC;AAAA,KAA9B,CADoB;AAAA,GAAf,CAAP;AAGD,CATD;;AAWA,IAAM4nB,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACnuB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AACxD,MAAMiqB,KAAK,GAAGJ,qBAAqB,CAACrvB,KAAD,EAAQgD,OAAR,CAAnC;AACA,SAAO,0FACFysB,KAAK,CAACznB,IAAN,CAAWhD,MAAX,CACD,UAAAwpB,IAAI;AAAA,WAAIA,IAAI,CAAChoB,UAAL,CAAgB2B,WAAhB,CAA4B,OAA5B,EAAqCsF,MAArC,CAA4C2M,OAA5C,CAAoD5U,EAApD,MAA4D,CAAC,CAAjE;AAAA,GADH,CADE,mFAIFiqB,KAAK,CAACvnB,MAAN,CAAalD,MAAb,CACD,UAAAwpB,IAAI;AAAA,WAAIA,IAAI,CAAChoB,UAAL,CAAgB2B,WAAhB,CAA4B,OAA5B,EAAqCsF,MAArC,CAA4C2M,OAA5C,CAAoD5U,EAApD,MAA4D,CAAC,CAAjE;AAAA,GADH,CAJE,GAQJH,GARI,CAQA,UAAAmd,CAAC;AAAA,WAAI2M,UAAU,CAACnvB,KAAD,EAAQwiB,CAAC,CAAChc,UAAF,CAAaic,SAArB,CAAd;AAAA,GARD,EASJzd,MATI,CASG,UAAAgoB,CAAC;AAAA,WAAI,CAACA,CAAC,CAACxmB,UAAF,CAAa4mB,OAAlB;AAAA,GATJ,CAAP;AAUD,CAZD;;AAcO,IAAMnR,WAAW,GAAG,SAAdA,WAAc,CAACjc,KAAD,EAAQgD,OAAR,EAAoB;AAC7C,MAAMysB,KAAK,GAAGJ,qBAAqB,CAACrvB,KAAD,EAAQgD,OAAR,CAAnC;AACA,MAAMY,IAAI,GAAGZ,OAAO,KAAK,eAAZ,GAA8B,OAA9B,GAAwC,YAArD;AACA,SAAO;AACLgF,QAAI,EAAEynB,KAAK,CAACznB,IAAN,CAAW3C,GAAX,CAAe,UAAAmd,CAAC;AAAA,aAAIA,CAAC,CAAChc,UAAF,CAAa2B,WAAb,CAAyB,OAAzB,EAAkCsF,MAAlC,CAAyC,CAAzC,CAAJ;AAAA,KAAhB,CADD;AAELvF,UAAM,EAAEunB,KAAK,CAACvnB,MAAN,CAAa7C,GAAb,CAAiB,UAAAmd,CAAC;AAAA,aAAIA,CAAC,CAAChc,UAAF,CAAa2B,WAAb,CAAyB,OAAzB,EAAkCsF,MAAlC,CAAyC,CAAzC,CAAJ;AAAA,KAAlB,CAFH;AAGLxF,UAAM,EAAEwnB,KAAK,CAACxnB,MAAN,CAAa5C,GAAb,CAAiB,UAAAmd,CAAC;AAAA,aAAIA,CAAC,CAAChc,UAAF,CAAa2B,WAAb,CAAyBvE,IAAzB,EAA+B6J,MAA/B,CAAsC,CAAtC,CAAJ;AAAA,KAAlB;AAHH,GAAP;AAKD,CARM;AAUA,IAAMiiB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC1vB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AACtD,MAAMiV,QAAQ,GAAG0T,yBAAyB,CAACnuB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,CAA1C;AACA,SAAO;AACLmqB,UAAM,EAAElV,QAAQ,CAAC3P,MAAT,KAAoB,CADvB;AAELsjB,SAAK,EACH3T,QAAQ,CAAC3P,MAAT,KAAoB,CAApB,IAAyB2P,QAAQ,CAACmV,IAAT,CAAc,UAAA5C,CAAC;AAAA,aAAIA,CAAC,CAACxmB,UAAF,CAAa4nB,KAAb,KAAuB,IAA3B;AAAA,KAAf,CAHtB;AAILrmB,eAAW,EAAE0S,QAAQ,CAACmV,IAAT,CACX,UAAA5C,CAAC;AAAA,aAAIA,CAAC,CAACxmB,UAAF,CAAakC,YAAb,KAA8B,eAAlC;AAAA,KADU,IAGT,eAHS,GAIT,cARC;AASL+R,YAAQ,EAARA;AATK,GAAP;AAWD,CAbM;AAeA,IAAMuB,iBAAiB,GAAG,SAApBA,iBAAoB,CAAChc,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,EAAwB;AAAA,0BACNkqB,gBAAgB,CAC/D1vB,KAD+D,EAE/DgD,OAF+D,EAG/DwC,EAH+D,CADV;AAAA,MAC/CmqB,MAD+C,qBAC/CA,MAD+C;AAAA,MACvCvB,KADuC,qBACvCA,KADuC;AAAA,MAChCrmB,WADgC,qBAChCA,WADgC;AAAA,MACnB0S,QADmB,qBACnBA,QADmB;;AAMvD,MAAMoV,WAAW,GAAGP,cAAc,CAACtvB,KAAD,EAAQgD,OAAR,EAAiBwC,EAAjB,CAAlC;AACA,SAAO;AACLmqB,UAAM,EAANA,MADK;AAELvB,SAAK,EAALA,KAFK;AAGLrmB,eAAW,EAAXA,WAHK;AAIL8nB,eAAW,EAAXA,WAJK;AAKLC,UAAM,EACJH,MAAM,IAAI,CAACvB,KAAX,GACI;AAAEhtB,UAAI,EAAE,UAAR;AAAoBuU,SAAG,EAAE8E,QAAQ,CAAC,CAAD,CAAR,CAAYjU,UAAZ,CAAuBspB,MAAvB,CAA8Bna;AAAvD,KADJ,GAEI,IARD;AASLoa,YAAQ,EAAE,CAAC3B,KAAD,IAAUrmB,WAAW,KAAK,cAT/B;AAULQ,cAAU,EAAEonB,MAAM,IAAIvB,KAAV,GAAkB4B,oBAAoB,CAAChwB,KAAD,EAAQya,QAAR,CAAtC,GAA0D,EAVjE;AAWLzS,QAAI,EAAE2nB,MAAM,IAAIvB,KAAK,KAAK,IAXrB;AAYLlmB,UAAM,EAAEynB,MAAM,IAAI,CAACvB,KAZd;AAaLnmB,UAAM,EAAE,CAAC,CAAC4nB;AAbL,GAAP;AAeD,CAtBM;;AAwBP,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAChwB,KAAD,EAAQya,QAAR;AAAA,SAC3BA,QAAQ,CACLzV,MADH,CACU,UAAAkoB,OAAO;AAAA,WAAIA,OAAO,CAAC1mB,UAAR,CAAmB+B,UAAvB;AAAA,GADjB,EAEGlD,GAFH,CAEO,UAAA6nB,OAAO;AAAA,WACVA,OAAO,CAAC1mB,UAAR,CAAmB+B,UAAnB,CAA8BlD,GAA9B,CAAkC,UAAAkkB,IAAI;AAAA,aAAK;AACzCqF,eAAO,EAAEQ,UAAU,CAACpvB,KAAD,EAAQupB,IAAI,CAAC9gB,SAAL,CAAejD,EAAvB,CADsB;AAEzCgG,cAAM,EAAE+d,IAAI,CAAC/d,MAF4B;AAGzC5H,YAAI,EAAEspB,OAAO,CAAC1mB,UAAR,CAAmBkC;AAHgB,OAAL;AAAA,KAAtC,CADU;AAAA,GAFd,EASGqC,MATH,CASU,UAACklB,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,CAACrhB,MAAF,CAASshB,CAAT,CAAV;AAAA,GATV,EASiC,EATjC,CAD2B;AAAA,CAA7B;;AAYA,IAAMX,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC/pB,EAAD,EAAKxC,OAAL,EAAcmtB,SAAd;AAAA,mBACpB7a,MAAM,CAACiT,QAAP,CAAgB6H,MADI,+BACuBD,SADvB,iBACuC3qB,EADvC,SAErBxC,OAAO,KAAK,MAAZ,GAAqB,iBAArB,GAAyC,EAFpB;AAAA,CAAzB,C,CAKA;;;AACA,IAAMksB,MAAM,GAAG,SAATA,MAAS;AAAA,MAAGzpB,KAAH,SAAGA,KAAH;AAAA,MAAU7B,IAAV,SAAUA,IAAV;AAAA,SACb6B,KAAK,KAAK,eAAV,IAA6B7B,IAAI,KAAK,WAAtC,IAAqDA,IAAI,KAAK,MADjD;AAAA,CAAf;;AAGA,IAAMysB,KAAK,GAAG,SAARA,KAAQ,CAACnX,QAAD,EAAWvV,MAAX,EAAsB;AAClC,MAAM2sB,OAAO,GAAGC,gFAAU,EAA1B;;AACA,MAAI,CAACD,OAAL,EAAc;AACZ;AACD;;AACDA,SAAO,CAACpkB,IAAR,CAAa,CACX,YADW,EAEXgjB,MAAM,CAAChW,QAAD,CAAN,GAAmB,OAAnB,GAA6B,QAFlB,EAGXvV,MAHW,YAIRA,MAJQ,SAICurB,MAAM,CAAChW,QAAD,CAAN,GAAmB,MAAnB,GAA4B,OAJ7B,EAAb;AAMD,CAXD;;AAYA,IAAMoV,kBAAkB,GAAG,SAArBA,kBAAqB,CAAApV,QAAQ;AAAA,SAAImX,KAAK,CAACnX,QAAD,EAAW,aAAX,CAAT;AAAA,CAAnC;;AACA,IAAM2U,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAA3U,QAAQ;AAAA,SAAImX,KAAK,CAACnX,QAAD,EAAW,cAAX,CAAT;AAAA,CAApC,C;;;;;;;;;;;;;;;AC7bA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,IAAMpQ,OAAO,GAAG,kBAAhB;AAEP,IAAM0nB,qBAAqB,GAAG,UAA9B,C,CAEA;;AAEO,IAAMzV,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAC3B0V,+DAAA,CAA6BD,qBAA7B,EAAoD,WAApD,CAD2B;AAAA,CAAtB,C,CAGP;;AACO,IAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClC1wB,KADkC,EAElCU,SAFkC,EAI/B;AAAA,MADHiwB,kBACG,uEADkB,EAClB;AACH,SACG,CAAC,CAAC3wB,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAF,IACCxD,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAd,EAAwC9D,MAAxC,CAA+C,UAAA/E,OAAO,EAAI;AACxD,WACEA,OAAO,CAACyH,MAAR,KAAmB,WAAnB,IACAzH,OAAO,CAACgB,OADR,IAEAhB,OAAO,CAACgB,OAAR,CAAgBP,SAAhB,KAA8BA,SAAS,CAACiB,IAFxC,IAGA1B,OAAO,CAACgB,OAAR,CAAgBR,OAHhB,IAIAkwB,kBAAkB,CAACrkB,QAAnB,CAA4BrM,OAAO,CAACgB,OAAR,CAAgBR,OAA5C,CALF;AAOD,GARD,CADF,IAUA,EAXF;AAaD,CAlBM;AAoBA,IAAMmwB,UAAU,GAAG,SAAbA,UAAa,CAAC5wB,KAAD,EAAQwF,EAAR;AAAA,SACxB,CAAC,CAACxF,KAAK,CAACmJ,SAAR,IACA,CAAC,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CADF,IAEA9I,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,EAAyBtD,EAAzB,CAHwB;AAAA,CAAnB,C;;;;;;;;AChCP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAMsD,OAAO,GAAG,cAAhB,C,CAEA;;AAEO,IAAM+iB,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM,CAAE,CAAnC,C,CAEP;;AAEO,IAAMxc,iBAAiB,GAAG,SAApBA,iBAAoB,CAACrP,KAAD,EAAQC,OAAR,EAAoB;AACnD;AACA,MAAI,CAACD,KAAK,CAACmJ,SAAP,IAAoB,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAArB,IAAiD,CAAC7I,OAAtD,EAA+D,OAAO,IAAP;AAC/D,SAAOqF,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAd,EAAwCiC,MAAxC,CACL,UAAC8lB,UAAD,EAAaC,UAAb,EAA4B;AAC1B,QAAIA,UAAU,CAACzlB,UAAX,KAA0BpL,OAAO,CAACsG,GAAtC,EAA2C,OAAOsqB,UAAP;AAC3C,QAAI,CAACA,UAAL,EAAiB,OAAOC,UAAP;AACjB,WAAOC,+CAAO,CAACxiB,OAAR,CAAgBuiB,UAAU,CAACvhB,UAA3B,EAAuCshB,UAAU,CAACthB,UAAlD,IACHuhB,UADG,GAEHD,UAFJ;AAGD,GAPI,EAQL,IARK,CAAP;AAUD,CAbM;AAeA,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAAChxB,KAAD,EAAQ4G,GAAR;AAAA,SAC1B,CAAC,CAACA,GAAF,IAAS,CAAC,QAAD,EAAW,SAAX,EAAsB0F,QAAtB,CAA+B1F,GAAG,CAAC5G,KAAnC,CADiB;AAAA,CAArB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBP,IAAMixB,UAAU,GAAG,YAAnB;AACA,IAAMC,kBAAkB,GAAG,oBAA3B;AACA,IAAMC,eAAe,GAAG,iBAAxB;AACA,IAAMC,kBAAkB,GAAG,oBAA3B;AAEA,IAAMC,uBAAuB,GAAG;AAC9BC,YAAU,EAAE,SADkB;AAE9BC,UAAQ,EAAE,IAFoB;AAG9BzH,WAAS,EAAE;AAHmB,CAAhC;;AAMA,IAAM0H,WAAW,GAAG,SAAdA,WAAc,GAA6C;AAAA,MAA5CxxB,KAA4C,uEAApCqxB,uBAAoC;AAAA,MAAX1tB,MAAW;;AAC/D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKstB,kBAAL;AACE,4FACKlxB,KADL;AAEEsxB,kBAAU,EAAE,SAFd;AAGExH,iBAAS,EAAEnmB,MAAM,CAACmmB;AAHpB;;AAKF,SAAKqH,eAAL;AACE,4FACKnxB,KADL;AAEEsxB,kBAAU,EAAE,MAFd;AAGEC,gBAAQ,EAAErX,IAAI,CAACC,GAAL;AAHZ;;AAKF,SAAKiX,kBAAL;AACE,4FACKpxB,KADL;AAEEsxB,kBAAU,EAAE,OAFd;AAGEC,gBAAQ,EAAErX,IAAI,CAACC,GAAL;AAHZ;;AAKF;AACE,aAAOna,KAAP;AApBJ;AAsBD,CAvBD;;AAyBA,IAAM0a,eAAe,GAAG,SAAlBA,eAAkB,GAAwB;AAAA,MAAvB1a,KAAuB,uEAAf,EAAe;AAAA,MAAX2D,MAAW;;AAC9C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKstB,kBAAL;AACA,SAAKC,eAAL;AACA,SAAKC,kBAAL;AACE,4FACKpxB,KADL,mFAEG2D,MAAM,CAACX,OAFV,EAEoBwuB,WAAW,CAACxxB,KAAK,CAAC2D,MAAM,CAACX,OAAR,CAAN,EAAwBW,MAAxB,CAF/B;;AAIF;AACE,aAAO3D,KAAP;AATJ;AAWD,CAZD;;AAce0a,8EAAf;AAEO,IAAMoH,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAAM,iBAAM5e,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA,iDACtBA,QAAQ,CAAC;AACdU,sBAAI,EAAEqtB,UADQ;AAEdpW,yBAAO,EAAE,iBAAAlY,MAAM;AAAA,2BAAIA,MAAM,CAACmf,SAAP,CAAiB5e,QAAjB,CAAJ;AAAA;AAFD,iBAAD,CADc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB;AAOA,IAAM6mB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC/mB,OAAD;AAAA,MAAU8mB,SAAV,uEAAsB,CAAtB;AAAA,SAA6B;AAC3DlmB,QAAI,EAAEstB,kBADqD;AAE3DluB,WAAO,EAAPA,OAF2D;AAG3D8mB,aAAS,EAATA;AAH2D,GAA7B;AAAA,CAAzB;AAMA,IAAMU,aAAa,GAAG,SAAhBA,aAAgB,CAACxnB,OAAD,EAAUyuB,KAAV;AAAA,SAAqB;AAChD7tB,QAAI,EAAEutB,eAD0C;AAEhDnuB,WAAO,EAAPA,OAFgD;AAGhDyuB,SAAK,EAALA;AAHgD,GAArB;AAAA,CAAtB;AAMA,IAAM5G,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC7nB,OAAD,EAAUyI,KAAV;AAAA,SAAqB;AACnD7H,QAAI,EAAEwtB,kBAD6C;AAEnDpuB,WAAO,EAAPA,OAFmD;AAGnDyI,SAAK,EAALA;AAHmD,GAArB;AAAA,CAAzB;AAMA,IAAMimB,WAAW,GAAG,SAAdA,WAAc,CAAA1xB,KAAK,EAAI;AAClC,MAAM2xB,UAAU,GAAGrsB,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACyB,IAAN,CAAWiZ,eAAvB,EAAwCrV,GAAxC,CACjB,UAAArC,OAAO;AAAA,WAAIhD,KAAK,CAACyB,IAAN,CAAWiZ,eAAX,CAA2B1X,OAA3B,EAAoC8mB,SAAxC;AAAA,GADU,CAAnB;AAGA,SAAO6H,UAAU,CAACC,KAAX,CAAiB,UAAAC,MAAM;AAAA,WAAIA,MAAM,KAAK,CAAf;AAAA,GAAvB,CAAP;AACD,CALM;AAOA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAA9xB,KAAK,EAAI;AAC/B,MAAM+xB,UAAU,GAAGzsB,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACyB,IAAN,CAAWiZ,eAAvB,EAAwCrV,GAAxC,CACjB,UAAArC,OAAO;AAAA,WAAIhD,KAAK,CAACyB,IAAN,CAAWiZ,eAAX,CAA2B1X,OAA3B,EAAoCuuB,QAAxC;AAAA,GADU,CAAnB;AAGA,SAAOQ,UAAU,CAACH,KAAX,CAAiB,UAAAI,EAAE;AAAA,WAAIA,EAAE,KAAK,IAAX;AAAA,GAAnB,CAAP;AACD,CALM,C;;;;;;;;ACpFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAEA,IAAMC,SAAS,GAAGrwB,oEAAS,GACzB;AAAA,MAAG+P,QAAH,QAAGA,QAAH;AAAA,MAAa3Q,CAAb,QAAaA,CAAb;AAAA,SACE2Q,QAAQ,GACN,2DAAC,+DAAD;AAAW,QAAI,EAAC,OAAhB;AAAwB,QAAI,EAAEA;AAA9B,KACG;AAAA,QAAGnI,IAAH,SAAGA,IAAH;AAAA,QAAS0oB,OAAT,SAASA,OAAT;AAAA,QAAkB9wB,IAAlB,SAAkBA,IAAlB;AAAA,WACC;AACE,eAAS,EAAED,mEAAM,CAAC,0BAAD,CADnB;AAEE,UAAI,EAAEqI,IAFR;AAGE,YAAM,EAAC,MAHT;AAIE,aAAO,EAAE0oB;AAJX,OAME,2DAAC,0DAAD;AAAM,eAAS,EAAC,WAAhB;AAA4B,UAAI,EAAC;AAAjC,MANF,EAOGlxB,CAAC,CAAC,+BAAD,EAAkC;AAClCmxB,aAAO,EAAE/wB;AADyB,KAAlC,CAPJ,CADD;AAAA,GADH,CADM,GAiBN;AACE,aAAS,EAAED,mEAAM,CAAC,0BAAD,CADnB;AAEE,WAAO,EAAE;AAAA,aACPM,IAAI,CAACkB,MAAL,CAAYyd,OAAZ,CAAoB0F,QAApB,CACE,cADF,EAEE;AAAEnkB,YAAI,EAAE;AAAR,OAFF,EAGE,UAAAgU,GAAG,EAAI;AACLL,cAAM,CAAC8c,GAAP,CAAW7J,QAAX,CAAoB/e,IAApB,GAA2BmM,GAA3B;AACD,OALH,CADO;AAAA;AAFX,KAYE,2DAAC,0DAAD;AAAM,aAAS,EAAC,WAAhB;AAA4B,QAAI,EAAC;AAAjC,IAZF,EAaG3U,CAAC,CAAC,+BAAD,CAbJ,CAlBJ;AAAA,CADyB,CAA3B;AAqCeixB,wEAAf,E;;;;;;;;;;;;;;;;;;;;AC9CA;AAEO,IAAMnpB,OAAO,GAAG,oBAAhB;AACP,IAAMupB,uBAAuB,GAAG,YAAhC,C,CAEA;;AAEO,IAAMrX,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SAC7ByV,iEAAA,CAA+B4B,uBAA/B,CAD6B;AAAA,CAAxB,C,CAGP;;AACO,IAAMvN,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAApkB,SAAS,EAAI;AACpD,MAAM+F,UAAU,GAAG,+EACd/F,SADW,EAEXA,SAAS,CAAC8F,UAFC;AAGdhB,MAAE,YAAKsD,OAAL,cAAgBpI,SAAS,CAACiB,IAA1B,CAHY;AAId8D,SAAK,EAAEqD;AAJO,IAAhB;;AAOA,SAAO;AACL9F,WAAO,EAAE8F,OADJ;AAELlF,QAAI,EAAE,sBAFD;AAGL0C,YAAQ,EAAE;AAAE5B,UAAI,EAAE,CAAC+B,UAAD;AAAR,KAHL;AAIL+T,qBAAiB,EAAE,CAAC,YAAD;AAJd,GAAP;AAMD,CAdM,C,CAgBP;;AACO,IAAMhZ,YAAY,GAAG,SAAfA,YAAe,CAACxB,KAAD,EAAQ2B,IAAR,EAAiB;AAC3C,SACE,CAAC,CAAC3B,KAAK,CAACmJ,SAAR,IACA,CAAC,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CADF,IAEA9I,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,YAA4BA,OAA5B,cAAuCnH,IAAvC,EAHF;AAKD,CANM;AAQA,IAAMqlB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAhnB,KAAK;AAAA,SACzC,CAAC,CAACA,KAAK,CAACmJ,SAAR,IACA,CAAC,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CADF,IAEAxD,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAd,CAHyC;AAAA,CAApC;AAKA,IAAMwpB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAtyB,KAAK;AAAA,SACvC,CAAC,CAACA,KAAK,CAACmJ,SAAR,IACA,CAAC,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CADF,IAEAxD,MAAM,CAAC+D,IAAP,CAAYrJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAZ,EAAsCiC,MAAtC,CAA6C,UAACwnB,OAAD,EAAU7e,GAAV,EAAkB;AAC7D,QAAMhT,SAAS,GAAGV,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,EAAyB4K,GAAzB,CAAlB;AACA6e,WAAO,CAAC7xB,SAAS,CAACiB,IAAX,CAAP,GAA0BjB,SAA1B;AACA,WAAO6xB,OAAP;AACD,GAJD,EAIG,EAJH,CAHuC;AAAA,CAAlC;AASA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAxyB,KAAK;AAAA,SAC3B,CAAC,CAACA,KAAF,IACA,CAAC,CAACA,KAAK,CAACmJ,SADR,IAEA,CAAC,CAACnJ,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAFF,IAGAxD,MAAM,CAACmI,MAAP,CAAczN,KAAK,CAACmJ,SAAN,CAAgBL,OAAhB,CAAd,EAAwCzD,GAAxC,CAA4C,UAAA3E,SAAS;AAAA,WAAIA,SAAS,CAACiB,IAAd;AAAA,GAArD,CAJ2B;AAAA,CAAtB,C;;;;;;;AClDP,wD;;;;;;;;;;;;;;;;;;;ACAA,IAAMglB,cAAc,GAAG,SAAjBA,cAAiB,CAAAhkB,MAAM;AAAA,SAAI,gBAAkB;AAAA,QAAfO,QAAe,QAAfA,QAAe;AACjD,WAAO,UAAA0B,IAAI;AAAA,aAAI,UAAAjB,MAAM,EAAI;AAAA,YACfkX,OADe,GACmBlX,MADnB,CACfkX,OADe;AAAA,YACNjX,IADM,GACmBD,MADnB,CACNC,IADM;AAAA,YACAgX,KADA,GACmBjX,MADnB,CACAiX,KADA;AAAA,YACU6X,IADV,yFACmB9uB,MADnB;;AAEvB,YAAI,CAACkX,OAAL,EAAc;AACZ,iBAAOjW,IAAI,CAACjB,MAAD,CAAX;AACD;;AAED,YAAI,CAACC,IAAD,IAAS,CAACgX,KAAd,EAAqB;AACnB,iBAAOC,OAAO,CAAClY,MAAD,CAAP,CAAgB2d,IAAhB,CAAqB,UAAA3c,MAAM;AAAA,mBAAIT,QAAQ,CAACS,MAAD,CAAZ;AAAA,WAA3B,CAAP;AACD;;AAED,YAAIC,IAAJ,EAAU;AACR,iBAAOiX,OAAO,CAAClY,MAAD,CAAP,CAAgB2d,IAAhB,CAAqB,UAAAha,QAAQ,EAAI;AACtC1B,gBAAI,CAAC,+EAAK6tB,IAAN;AAAYnsB,sBAAQ,EAARA,QAAZ;AAAsB1C,kBAAI,EAAJA;AAAtB,eAAJ;AACA,mBAAO0C,QAAP;AACD,WAHM,CAAP;AAID;;AAfsB,iGAiBasU,KAjBb;AAAA,YAiBhB8X,OAjBgB;AAAA,YAiBPC,OAjBO;AAAA,YAiBEC,OAjBF;;AAkBvBhuB,YAAI,CAAC,+EAAK6tB,IAAN;AAAY7uB,cAAI,EAAE8uB;AAAlB,WAAJ;AAEA,eAAO7X,OAAO,CAAClY,MAAD,CAAP,CACJ2d,IADI,CAEH,UAAAha,QAAQ,EAAI;AACV1B,cAAI,CAAC,+EAAK6tB,IAAN;AAAYnsB,oBAAQ,EAARA,QAAZ;AAAsB1C,gBAAI,EAAE+uB;AAA5B,aAAJ;AACA,iBAAOrsB,QAAP;AACD,SALE,EAMH,UAAAmF,KAAK,EAAI;AACPkV,iBAAO,CAACkS,GAAR,CAAYpnB,KAAZ,EADO,CACY;;AACnB7G,cAAI,CAAC,+EAAK6tB,IAAN;AAAYhnB,iBAAK,EAALA,KAAZ;AAAmB7H,gBAAI,EAAEgvB;AAAzB,aAAJ;AACD,SATE,EAWJnS,KAXI,CAWE,UAAAhV,KAAK,EAAI;AACdkV,iBAAO,CAAClV,KAAR,CAAc,mBAAd,EAAmCA,KAAnC,EADc,CAC4B;;AAC1C7G,cAAI,CAAC,+EAAK6tB,IAAN;AAAYhnB,iBAAK,EAALA,KAAZ;AAAmB7H,gBAAI,EAAEgvB;AAAzB,aAAJ;AACD,SAdI,CAAP;AAeD,OAnCU;AAAA,KAAX;AAoCD,GArC4B;AAAA,CAA7B;;AAuCejM,6EAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAMA;AACA;;IAEMmM,iB;;;;;AACJ,6BAAY/yB,KAAZ,EAAmBgR,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,qNAAMhR,KAAN,EAAagR,OAAb;AACA,UAAKW,KAAL,GAAaX,OAAO,CAACW,KAArB;AAEA,UAAK1R,KAAL,GAAa;AACX+yB,gBAAU,EAAE,KADD;AAEXjS,iBAAW,EAAE/gB,KAAK,CAAC+gB,WAAN,IAAqB/gB,KAAK,CAAC+gB,WAAN,CAAkB/gB,KAAK,CAACW,SAAN,CAAgBiB,IAAlC;AAFvB,KAAb;AAKA,UAAKxB,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,4FAA1B;AACA,UAAK4yB,WAAL,GAAmB,MAAKA,WAAL,CAAiB5yB,IAAjB,4FAAnB;AACA,UAAK6yB,mBAAL,GAA2B,MAAKA,mBAAL,CAAyB7yB,IAAzB,4FAA3B;AAX0B;AAY3B;;;;wCAEmB;AAClB,UAAI,KAAKL,KAAL,CAAW0L,KAAf,EAAsB,KAAKunB,WAAL,CAAiB;AAAE/xB,eAAO,EAAE,KAAKlB,KAAL,CAAW0L;AAAtB,OAAjB;AACvB;;;uCAEkBynB,S,EAAW;AAAA,wBACA,KAAKnzB,KADL;AAAA,UACpBG,OADoB,eACpBA,OADoB;AAAA,UACXizB,MADW,eACXA,MADW;AAAA,UAEpBC,eAFoB,GAEA,KAAKpzB,KAFL,CAEpBozB,eAFoB;AAI5B,UAAMC,OAAO,GAAG,CAACH,SAAS,CAAChzB,OAAX,IAAsBA,OAAtC;AACA,UAAMozB,YAAY,GAAG,CAACJ,SAAS,CAACC,MAAX,IAAqBA,MAA1C;;AAEA,UAAIE,OAAO,IAAIC,YAAf,EAA6B;AAC3B;AACA,YAAID,OAAO,IAAID,eAAf,EAAgC,KAAK9yB,QAAL,CAAc;AAAE8yB,yBAAe,EAAE;AAAnB,SAAd;AAChC,aAAKrzB,KAAL,CAAWsQ,uBAAX;AACD;AACF;;;uCAEkBpQ,O,EAAS;AAAA,yBAC6B,KAAKF,KADlC;AAAA,UAClBgN,iBADkB,gBAClBA,iBADkB;AAAA,UACCsD,uBADD,gBACCA,uBADD;AAE1BA,6BAAuB;AACvBtD,uBAAiB,CAAC9M,OAAD,CAAjB;AACD;;;0CAEqB;AACpB,WAAKK,QAAL,CAAc;AACZizB,kBAAU,EAAE;AADA,OAAd;AAIA,WAAKxzB,KAAL,CAAWkzB,mBAAX;AACD;;;gCAEWxnB,K,EAAO;AACjB;AACAkV,aAAO,CAAClV,KAAR,CAAcA,KAAd;AAEA,WAAKnL,QAAL,CAAc;AACZizB,kBAAU,EAAE,KADA;AAEZH,uBAAe,EAAE3nB,KAAK,CAACxK;AAFX,OAAd;AAID;;;yCAEoBP,S,EAAW;AAAA,UACtBM,CADsB,GAChB,KAAKjB,KADW,CACtBiB,CADsB;AAE9B,UAAMuP,QAAQ,GAAG,CACfvP,CAAC,CAAC,iCAAD,EAAoC;AACnCI,YAAI,EAAEV,SAAS,CAACU;AADmB,OAApC,CADc,CAAjB;;AAMA,UACEV,SAAS,CAAC8yB,yBAAV,IACA9yB,SAAS,CAAC8yB,yBAAV,CAAoCvyB,OAFtC,EAGE;AACAsP,gBAAQ,CAACrE,IAAT,CAAclL,CAAC,CAACN,SAAS,CAAC8yB,yBAAV,CAAoCvyB,OAArC,CAAf;AACD;;AAED,aAAOsP,QAAP;AACD;;;6BAEQ;AAAA,yBAaH,KAAKxQ,KAbF;AAAA,UAELue,cAFK,gBAELA,cAFK;AAAA,UAGLjO,uBAHK,gBAGLA,uBAHK;AAAA,UAIL3P,SAJK,gBAILA,SAJK;AAAA,UAKL+K,KALK,gBAKLA,KALK;AAAA,UAMLkZ,QANK,gBAMLA,QANK;AAAA,UAOL/jB,MAPK,gBAOLA,MAPK;AAAA,UAQLuyB,MARK,gBAQLA,MARK;AAAA,UASLnyB,CATK,gBASLA,CATK;AAAA,UAUL+f,IAVK,gBAULA,IAVK;AAAA,UAWL7gB,OAXK,gBAWLA,OAXK;AAAA,UAYLa,kBAZK,gBAYLA,kBAZK;AAAA,wBAc8C,KAAKf,KAdnD;AAAA,UAcCozB,eAdD,eAcCA,eAdD;AAAA,UAckBK,UAdlB,eAckBA,UAdlB;AAAA,UAc8B3S,WAd9B,eAc8BA,WAd9B;AAeP,UAAMhgB,eAAe,GACnBZ,OAAO,IAAIizB,MAAX,GAAoB,KAAKO,oBAAL,CAA0BhzB,SAA1B,CAApB,GAA2D,EAD7D;AAEA,UAAMizB,cAAc,GAAGloB,KAAK,IAAIgoB,UAAT,IAAuBL,eAA9C;AACA,aACE;AAAK,iBAAS,EAAEjyB,qEAAM,CAAC,wBAAD;AAAtB,SACG,CAAC,CAACT,SAAS,CAACkT,iBAAZ,IACC,2DAAC,yEAAD;AACE,iBAAS,EAAElT,SADb;AAEE,aAAK,EAAEizB,cAFT;AAGE,kBAAU,EAAEpgB,oFAA4B,CAACogB,cAAD;AAH1C,QAFJ,EAQG7S,WAAW,GACV,2DAAC,wEAAD;AACE,mBAAW,EAAEA,WADf;AAEE,YAAI,EAAEC,IAFR;AAGE,qBAAa,EAAErgB,SAAS,CAACU;AAH3B,QADU,GAOV,2DAAC,oEAAD;AACE,eAAO,EAAEkd,cADX;AAEE,iBAAS,EAAE5d,SAFb;AAGE,gBAAQ,EAAEikB,QAHZ;AAIE,cAAM,EAAE/jB,MAJV;AAKE,sBAAc,EAAE,KAAKT,kBALvB;AAME,iBAAS,EAAEkQ,uBANb;AAOE,qBAAa,EAAEnQ,OAAO,IAAIizB,MAP5B;AAQE,sBAAc,EAAEnyB,CAAC,CAAC,+BAAD,CARnB;AASE,0BAAkB,EAAED,kBATtB;AAUE,uBAAe,EAAED;AAVnB,QAfJ,CADF;AA+BD;;;;EA5H6BO,+C;;AA+HhCyxB,iBAAiB,CAAClhB,YAAlB,GAAiC;AAC/BF,OAAK,EAAEG,iDAAS,CAACC;AADc,CAAjC;;AAIA,IAAMxQ,eAAe,GAAG,SAAlBA,eAAkB,CAACtB,KAAD,EAAQuB,QAAR;AAAA,SAAsB;AAC5CrB,WAAO,EAAEwP,gFAAqB,CAAC1P,KAAK,CAAC0e,WAAP,EAAoBnd,QAAQ,CAACtB,OAA7B,CADc;AAE5CwL,SAAK,EAAEsD,6EAAkB,CAAC/O,KAAK,CAAC0e,WAAP,EAAoBnd,QAAQ,CAACtB,OAA7B,CAFmB;AAG5CkzB,UAAM,EAAExjB,+EAAoB,CAAC3P,KAAK,CAAC0e,WAAP,EAAoBnd,QAAQ,CAACtB,OAA7B;AAHgB,GAAtB;AAAA,CAAxB;;AAMA,IAAMkV,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAjS,QAAQ,EAAI;AACrC,SAAO;AACL6J,qBAAiB,EAAE,2BAAA9M,OAAO;AAAA,aAAIiD,QAAQ,CAAC6J,4EAAiB,CAAC9M,OAAD,CAAlB,CAAZ;AAAA;AADrB,GAAP;AAGD,CAJD;;AAMe4B,0HAAO,CACpBP,eADoB,EAEpB6T,kBAFoB,CAAP,CAGbye,mEAAU,CAAChyB,qEAAS,GAAGkxB,iBAAH,CAAV,CAHG,CAAf,E;;;;;;;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEA;AACA;AAEA;AACA;;IAEMe,mB;;;;;AACJ,+BAAY9zB,KAAZ,EAAmBgR,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,uNAAMhR,KAAN,EAAagR,OAAb;;AAD0B,wMAOF,YAAM;AAC9B,YAAKzQ,QAAL,CAAc;AAAEwzB,iBAAS,EAAE;AAAb,OAAd;AACD,KAT2B;;AAE1B,UAAKpiB,KAAL,GAAaX,OAAO,CAACW,KAArB;AACA,UAAK1R,KAAL,GAAa;AAAE8zB,eAAS,EAAE;AAAb,KAAb;;AACA,UAAKpiB,KAAL,CAAWqiB,SAAX;;AAJ0B;AAK3B;;;;6BAMQ;AAAA,wBACsC,KAAKh0B,KAD3C;AAAA,UACCW,SADD,eACCA,SADD;AAAA,UACYikB,SADZ,eACYA,QADZ;AAAA,UACsBqP,WADtB,eACsBA,WADtB;AAAA,UAECF,SAFD,GAEe,KAAK9zB,KAFpB,CAEC8zB,SAFD;AAGP,aACE;AAAK,iBAAS,EAAC;AAAf,SACG,CAACA,SAAD,IAAc,2DAAC,uEAAD;AAAqB,iBAAS,EAAEpzB,SAAhC;AAA2C,cAAM;AAAjD,QADjB,EAEGA,SAAS,IACR,2DAAC,gFAAD;AACE,iBAAS,EAAEA,SADb;AAEE,gBAAQ,EAAE;AAAA,iBAAMikB,SAAQ,EAAd;AAAA,SAFZ;AAGE,iBAAS,EAAEqP,WAHb;AAIE,+BAAuB,EAAE,KAAK3jB;AAJhC,QAHJ,CADF;AAaD;;;;EA5B+BhP,+C;;AA+BlCwyB,mBAAmB,CAACjiB,YAApB,GAAmC;AACjCF,OAAK,EAAEG,iDAAS,CAACC;AADgB,CAAnC;AAIe+hB,kFAAf,E","file":"intents/home.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"intents\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \"/home.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport { TriggerManager } from 'cozy-harvest-lib'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport KonnectorSuccess from 'components/KonnectorSuccess'\nimport { getKonnector } from 'ducks/konnectors'\nimport styles from 'styles/konnectorInstall.styl'\n\nexport class KonnectorInstall extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      trigger: null,\n      success: false\n    }\n    this.handleLoginSuccess = this.handleLoginSuccess.bind(this)\n    this.handleSuccess = this.handleSuccess.bind(this)\n  }\n\n  handleLoginSuccess(trigger) {\n    this.setState({\n      trigger,\n      success: true\n    })\n\n    this.props.onLoginSuccess(trigger)\n  }\n\n  handleSuccess(trigger) {\n    this.setState({\n      trigger,\n      success: true\n    })\n\n    this.props.onSuccess(trigger)\n  }\n\n  render() {\n    const {\n      account,\n      konnector,\n      legacySuccess,\n      onDone,\n      successMessage,\n      successMessages,\n      successButtonLabel,\n      t\n    } = this.props\n\n    const { trigger, success } = this.state\n\n    if (success || legacySuccess) {\n      return (\n        <KonnectorSuccess\n          account={account}\n          connector={konnector}\n          folderId={trigger && trigger.message.folder_to_save}\n          onDone={onDone}\n          title={successMessage}\n          trigger={trigger}\n          messages={successMessages}\n          successButtonLabel={successButtonLabel}\n        />\n      )\n    }\n\n    return (\n      <div className={styles['col-account-connection-content']}>\n        <div className={styles['col-account-connection-form']}>\n          <h4 className=\"u-ta-center\">\n            {t('account.config.title', { name: konnector.name })}\n          </h4>\n          <TriggerManager\n            account={account}\n            konnector={konnector}\n            onLoginSuccess={this.handleLoginSuccess}\n            onSuccess={this.handleSuccess}\n            vaultClosable={false}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  konnector: getKonnector(state.cozy, ownProps.connector.slug)\n})\n\nexport default translate()(connect(mapStateToProps)(KonnectorInstall))\n","/* global cozy, PouchDB */\nimport CozyStackAdapter from './adapters/CozyStackAdapter'\nimport PouchdbAdapter, {\n  SYNC_BIDIRECTIONAL,\n  SYNC_TO,\n  SYNC_FROM\n} from './adapters/PouchdbAdapter'\n\n// const isOnline = () =>\n//   typeof navigator !== 'undefined' ? navigator.onLine : true\n\nexport default class DataAccessFacade {\n  constructor() {\n    this.stackAdapter = new CozyStackAdapter()\n    if (typeof PouchDB !== 'undefined') {\n      this.pouchAdapter = new PouchdbAdapter()\n      // TODO: strategy injection\n      this.strategy = new PouchFirstStrategy()\n    } else {\n      this.strategy = new StackOnlyStrategy()\n    }\n  }\n\n  setup(cozyUrl, options) {\n    const config = { cozyURL: cozyUrl, ...options }\n    cozy.client.init(config) // TODO: For now we let cozy-client-js creates PouchDB instances\n    this.stackAdapter.init(config)\n    if (config.offline) {\n      this.pouchAdapter.registerDoctypes(config.offline.doctypes)\n    }\n  }\n\n  getAdapter(doctype) {\n    return this.strategy.getAdapter(\n      doctype,\n      this.stackAdapter,\n      this.pouchAdapter\n    )\n  }\n\n  startSync(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_BIDIRECTIONAL)\n  }\n\n  startReplicationTo(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_TO)\n  }\n\n  startReplicationFrom(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_FROM)\n  }\n}\n\nclass PouchFirstStrategy {\n  getAdapter(doctype, stackAdapter, pouchAdapter) {\n    if (pouchAdapter.getDatabase(doctype) === undefined) {\n      return stackAdapter\n    }\n    return pouchAdapter\n  }\n}\n\nclass StackOnlyStrategy {\n  getAdapter(doctype, stackAdapter) {\n    return stackAdapter\n  }\n}\n","const RECEIVE_APPS = 'RECEIVE_APPS'\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_APPS:\n      return action.apps || state\n    default:\n      return state\n  }\n}\n\nexport default reducer\n\n// Action creators\nexport const receiveApps = apps => ({\n  type: RECEIVE_APPS,\n  apps\n})\n\n// Selectors\nexport const getApp = (state = [], slug) => state.find(app => app.slug === slug)\n","/* (ignored) */","/* (ignored) */","/* global cozy */\nconst FILES_DOCTYPE = 'io.cozy.files'\nconst FETCH_LIMIT = 50\n\nexport const SHARED_BY_LINK = 'sharedByLink'\nexport const SHARED_WITH_ME = 'sharedWithMe'\nexport const SHARED_WITH_OTHERS = 'sharedWithOthers'\n\nexport default class CozyStackAdapter {\n  async fetchApps(skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON('GET', '/apps/', null, {\n      processJSONAPI: false\n    })\n\n    return {\n      data: data || [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async fetchDocuments(doctype) {\n    // WARN: cozy-client-js lacks a cozy.data.findAll method that uses this route\n    try {\n      // WARN: if no document of this doctype exist, this route will return a 404,\n      // so we need to try/catch and return an empty response object in case of a 404\n      const resp = await cozy.client.fetchJSON(\n        'GET',\n        `/data/${doctype}/_all_docs?include_docs=true`\n      )\n      // WARN: the JSON response from the stack is not homogenous with other routes (offset? rows? total_rows?)\n      // see https://github.com/cozy/cozy-stack/blob/master/docs/data-system.md#list-all-the-documents\n      // WARN: looks like this route returns something looking like a couchDB design doc, we need to filter it:\n      const rows = resp.rows.filter(row => !row.doc.hasOwnProperty('views'))\n      // we normalize the data (note that we add _type so that cozy.client.data.listReferencedFiles works...)\n      const docs = rows.map(row =>\n        Object.assign({}, row.doc, { id: row.id, _type: doctype })\n      )\n      // we forge a correct JSONAPI response:\n      return {\n        data: docs,\n        meta: { count: resp.total_rows },\n        skip: resp.offset,\n        next: false\n      }\n    } catch (error) {\n      if (error.message.match(/not_found/)) {\n        return { data: [], meta: { count: 0 }, skip: 0, next: false }\n      }\n      throw error\n    }\n  }\n\n  async queryDocuments(doctype, index, options) {\n    const fields = options.fields\n    const skip = options.skip || 0\n    // Mango wants an array of single-property-objects...\n    const sort = options.sort\n      ? index.fields.map(f => ({ [f]: options.sort[f] || 'desc' }))\n      : undefined\n\n    const queryOptions = {\n      limit: FETCH_LIMIT,\n      wholeResponse: true, // WARN: mandatory to get the full JSONAPI response\n      ...options,\n      // TODO: type and class should not be necessary, it's just a temp fix for a stack bug\n      fields: [...fields, '_id', '_type', 'class'],\n      skip,\n      sort\n    }\n\n    // abstract away the format differences between query replies on the VFS versus the data API\n    let data, meta, next\n    if (doctype === FILES_DOCTYPE) {\n      const response = await cozy.client.files.query(index, queryOptions)\n      data = response.data.map(doc =>\n        Object.assign({ _id: doc.id, _type: doctype }, doc, doc.attributes)\n      )\n      meta = response.meta\n      next = meta.count > skip + FETCH_LIMIT\n    } else {\n      const response = await cozy.client.data.query(index, queryOptions)\n      data = response.docs.map(doc =>\n        Object.assign({ id: doc._id, _type: doctype }, doc)\n      )\n      meta = {}\n      next = response.next\n    }\n\n    // we forge a correct JSONAPI response:\n    return { data, meta, next }\n  }\n\n  async fetchDocument(doctype, id) {\n    const doc = await cozy.client.data.find(doctype, id)\n    // we normalize again...\n    const normalized = { ...doc, id: doc._id, _type: doc._type }\n    return { data: [normalized] }\n  }\n\n  init(config) {\n    this.config = { ...config }\n  }\n\n  async createDocument(doctype, doc) {\n    const created = await cozy.client.data.create(doctype, doc)\n    // we forge a standard response with a 'data' property\n    const normalized = { ...created, id: created._id, _type: doctype }\n    return { data: [normalized] }\n  }\n\n  async createTrigger(doc) {\n    const created = await cozy.client.fetchJSON('POST', '/jobs/triggers', {\n      data: doc\n    })\n    const normalized = { ...created, ...created.attributes, id: created._id }\n    return { data: [normalized] }\n  }\n\n  async launchTrigger(doc) {\n    const job = await cozy.client.fetchJSON(\n      'POST',\n      `/jobs/triggers/${doc._id}/launch`\n    )\n\n    const normalized = { ...job, ...job.attributes, id: job._id }\n    return { data: [normalized] }\n  }\n\n  async updateDocument(doc) {\n    const updated = await cozy.client.data.updateAttributes(\n      doc._type,\n      doc.id,\n      doc\n    )\n    // we forge a standard response with a 'data' property\n    return { data: [{ ...doc, _rev: updated._rev }] }\n  }\n\n  async deleteDocument(doc) {\n    /* const deleted = */ await cozy.client.data.delete(doc._type, doc)\n    // we forge a standard response with a 'data' property\n    return { data: [doc] }\n  }\n\n  async deleteTrigger(doc) {\n    await cozy.client.fetchJSON('DELETE', `/jobs/triggers/${doc._id}`)\n    return { data: [doc] }\n  }\n\n  createIndex(doctype, fields) {\n    return cozy.client.data.defineIndex(doctype, fields)\n  }\n\n  async fetchFileByPath(path) {\n    try {\n      const file = await cozy.client.files.statByPath(path)\n      // we forge a standard response with a 'data' property\n      return { data: [normalizeFile(file)] }\n    } catch (err) {\n      return null\n    }\n  }\n\n  async createFile(file, dirID) {\n    const created = await cozy.client.files.create(file, { dirID })\n    // we forge a standard response with a 'data' property\n    return { data: [normalizeFile(created)] }\n  }\n\n  async trashFile(file) {\n    /* const trashed = */ cozy.client.files.trashById(file.id)\n    // we forge a standard response with a 'data' property\n    return { data: [file] }\n  }\n\n  async fetchReferencedFiles(doc, skip = 0) {\n    // WARN: _type and _id are needed by cozy.client.data.fetchReferencedFiles\n    const normalized = { ...doc, _id: doc.id }\n    // WARN: the stack API is probably not ideal here: referencedFiles are in the 'included' property\n    // (that should be used when fetching an entity AND its relations) and the 'data' property\n    // only contains uplets { id, type }\n    const { included, meta } = await cozy.client.data.fetchReferencedFiles(\n      normalized,\n      {\n        skip,\n        limit: FETCH_LIMIT\n      }\n    )\n    // we forge a standard response with a 'data' property\n    return {\n      data: !included\n        ? []\n        : included.map(file => ({\n            ...file,\n            ...file.attributes,\n            _type: 'io.cozy.files'\n          })),\n      meta,\n      next: meta.count > skip + FETCH_LIMIT,\n      skip\n    }\n  }\n\n  async fetchKonnectors(skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON(\n      'GET',\n      `/konnectors/`,\n      null,\n      {\n        processJSONAPI: false\n      }\n    )\n\n    return {\n      data: data\n        ? data.map(konnector => ({\n            ...konnector,\n            ...konnector.attributes,\n            _type: 'io.cozy.konnectors'\n          }))\n        : [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async fetchTriggers(worker, skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON(\n      'GET',\n      `/jobs/triggers?Worker=${worker}`,\n      null,\n      {\n        processJSONAPI: false\n      }\n    )\n\n    return {\n      data: data\n        ? data.map(trigger => ({\n            ...trigger,\n            ...trigger.attributes,\n            _type: 'io.cozy.triggers'\n          }))\n        : [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async addReferencedFiles(doc, ids) {\n    await cozy.client.data.addReferencedFiles(doc, ids)\n    return ids\n  }\n\n  async removeReferencedFiles(doc, ids) {\n    // WARN: _type and _id are needed by cozy.client.data.removeReferencedFiles\n    const normalized = { ...doc, _id: doc.id }\n    await cozy.client.data.removeReferencedFiles(normalized, ids)\n    return ids\n  }\n\n  async fetchSharingPermissions(doctype) {\n    const fetchPermissions = (doctype, sharingType) =>\n      cozy.client.fetchJSON(\n        'GET',\n        `/permissions/doctype/${doctype}/${sharingType}`\n      )\n\n    const byMe = await fetchPermissions(doctype, SHARED_WITH_OTHERS)\n    const byLink = await fetchPermissions(doctype, SHARED_BY_LINK)\n    const withMe = await fetchPermissions(doctype, SHARED_WITH_ME)\n\n    return { byMe, byLink, withMe }\n  }\n\n  fetchSharing(id) {\n    return cozy.client.fetchJSON('GET', `/sharings/${id}`)\n  }\n\n  createSharing(permissions, contactIds, sharingType, description) {\n    return cozy.client.fetchJSON('POST', '/sharings/', {\n      desc: description,\n      permissions,\n      recipients: contactIds.map(contactId => ({\n        recipient: {\n          id: contactId,\n          type: 'io.cozy.contacts'\n        }\n      })),\n      sharing_type: sharingType\n    })\n  }\n\n  revokeSharing(sharingId) {\n    return cozy.client.fetchJSON('DELETE', `/sharings/${sharingId}`)\n  }\n\n  revokeSharingForClient(sharingId, clientId) {\n    return cozy.client.fetchJSON(\n      'DELETE',\n      `/sharings/${sharingId}/recipient/${clientId}`\n    )\n  }\n\n  createSharingLink(permissions) {\n    return cozy.client.fetchJSON('POST', `/permissions?codes=email`, {\n      data: {\n        type: 'io.cozy.permissions',\n        attributes: {\n          permissions\n        }\n      }\n    })\n  }\n\n  revokeSharingLink(permission) {\n    return cozy.client.fetchJSON('DELETE', `/permissions/${permission._id}`)\n  }\n}\n\nconst normalizeFile = file => ({ ...file, ...file.attributes, id: file._id })\n","/* (ignored) */","import { fetchCollection } from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.accounts'\nconst accountCollectionKey = 'accounts'\n\nexport const fetchAccounts = () =>\n  fetchCollection(accountCollectionKey, DOCTYPE)\n\n// selectors\nexport const getAccount = (state, id) => {\n  if (!state.documents || !state.documents[DOCTYPE]) {\n    return null\n  }\n\n  return state.documents[DOCTYPE][id]\n}\n\nexport const getIds = state =>\n  // state.collection is bugged, it does not update correctly id list on\n  // RECEIVE_DATA\n  // (state.collections &&\n  //   state.collections[accountCollectionKey] &&\n  //   state.collections[accountCollectionKey].ids) ||\n  // []\n  (state.documents &&\n    state.documents[DOCTYPE] &&\n    Object.keys(state.documents[DOCTYPE])) ||\n  []\n","/* (ignored) */","import React from 'react'\nimport ReactMarkdown from 'react-markdown'\n\nexport const reactMarkdownRendererOptions = {\n  // eslint-disable-next-line react/display-name\n  Link: props => (\n    <a href={props.href} rel=\"noopener noreferrer\" target=\"_blank\">\n      {props.children}\n    </a>\n  )\n}\n\nexport const ReactMarkdownWrapper = ({ source }) => (\n  <ReactMarkdown source={source} renderers={reactMarkdownRendererOptions} />\n)\n\nexport default ReactMarkdownWrapper\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coz-form-controls\":\"coz-form-controls--1gEYB\",\"coz-form-controls-success\":\"coz-form-controls-success--1NQyf\",\"coz-btn\":\"coz-btn--233oo\",\"col-btn--regular\":\"col-btn--regular--2N744\",\"col-account-form-success-buttons\":\"col-account-form-success-buttons--1J36i\",\"account-form-login\":\"account-form-login--_w3tO\",\"col-account-form-advanced-button\":\"col-account-form-advanced-button--niE6T\",\"account-form-fieldset\":\"account-form-fieldset--3WD-X\",\"col-account-success\":\"col-account-success--1NEI1\",\"col-account-success-links\":\"col-account-success-links--15Ii5\",\"col-account-success-link\":\"col-account-success-link--18QVL\",\"col-account-success-illu\":\"col-account-success-illu--RvZfy\"};","import { combineReducers } from 'redux'\nimport moment from 'moment'\nimport omit from 'lodash/omit'\nimport get from 'lodash/get'\nimport { buildKonnectorError, isKonnectorUserError } from 'lib/konnectors'\n\nimport { getTriggerLastJob } from 'ducks/jobs'\n\n// constant\nconst ACCOUNT_DOCTYPE = 'io.cozy.accounts'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\nconst JOBS_DOCTYPE = 'io.cozy.jobs'\n\nexport const ENQUEUE_CONNECTION = 'ENQUEUE_CONNECTION'\nexport const LAUNCH_TRIGGER = 'LAUNCH_TRIGGER'\nexport const PURGE_QUEUE = 'PURGE_QUEUE'\nexport const RECEIVE_DATA = 'RECEIVE_DATA'\nexport const RECEIVE_NEW_DOCUMENT = 'RECEIVE_NEW_DOCUMENT'\nexport const RECEIVE_DELETED_DOCUMENT = 'RECEIVE_DELETED_DOCUMENT'\nexport const UPDATE_CONNECTION_RUNNING_STATUS =\n  'UPDATE_CONNECTION_RUNNING_STATUS'\nexport const UPDATE_CONNECTION_ERROR = 'UPDATE_CONNECTION_ERROR'\nexport const START_CONNECTION_CREATION = 'START_CONNECTION_CREATION'\nexport const END_CONNECTION_CREATION = 'END_CONNECTION_CREATION'\n\n// Helpers\nconst getTriggerKonnectorSlug = trigger =>\n  (trigger && trigger.message && trigger.message.konnector) || null\n\nconst isKonnectorTrigger = doc =>\n  doc._type === TRIGGERS_DOCTYPE && !!doc.message && !!doc.message.konnector\n\nconst isKonnectorJob = doc =>\n  doc._type === JOBS_DOCTYPE && doc.worker === 'konnector'\n\n// reducers\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n    case UPDATE_CONNECTION_ERROR:\n    case UPDATE_CONNECTION_RUNNING_STATUS:\n    case LAUNCH_TRIGGER:\n      // Trigger is launched, connection should be running.\n      if (!action.trigger || !action.trigger._id)\n        throw new Error('Missing trigger id')\n      if (!action.trigger.message || !action.trigger.message.konnector)\n        throw new Error('Malformed trigger message')\n      return {\n        ...state,\n        [getTriggerKonnectorSlug(action.trigger)]: konnectorReducer(\n          state[getTriggerKonnectorSlug(action.trigger)],\n          action\n        )\n      }\n\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT:\n      if (\n        !action.response ||\n        !action.response.data ||\n        !action.response.data.length\n      ) {\n        return state\n      }\n\n      return action.response.data.reduce((newState, doc) => {\n        const isTrigger = isKonnectorTrigger(doc)\n        const isJob = isKonnectorJob(doc)\n        // Ignore non triggers or non jobs\n        if (!isTrigger && !isJob) return newState\n        const konnectorSlug = doc.message.konnector\n        const triggerId = (isTrigger && doc._id) || (isJob && doc.trigger_id)\n        if (!triggerId) return newState\n\n        const account = isTrigger && !!doc.message && doc.message.account\n\n        const currentStatus =\n          (isTrigger && (doc.current_state && doc.current_state.status)) ||\n          (isJob && doc.state)\n\n        const error =\n          (isTrigger &&\n            !!doc.current_state &&\n            doc.current_state.status !== 'done' &&\n            !!doc.current_state.last_error &&\n            buildKonnectorError(doc.current_state.last_error)) ||\n          (isJob && !!doc.error && buildKonnectorError(doc.error)) ||\n          null\n\n        const lastSyncDate =\n          (isTrigger &&\n            !!doc.current_state &&\n            doc.current_state.last_execution) ||\n          (isJob && doc.queued_at)\n        const existingTriggers = get(\n          newState,\n          [konnectorSlug, 'triggers', 'data'],\n          []\n        )\n        let rawTriggers = existingTriggers\n\n        if (isTrigger) {\n          rawTriggers = existingTriggers.filter(({ _id }) => _id !== doc._id)\n          rawTriggers.push(doc)\n        }\n        return {\n          ...newState,\n          [konnectorSlug]: {\n            triggers: {\n              ...get(newState, [konnectorSlug, 'triggers'], []),\n              data: rawTriggers,\n              [triggerId]: {\n                ...get(newState, [konnectorSlug, 'triggers', triggerId], {}),\n                account:\n                  account ||\n                  get(newState, [\n                    konnectorSlug,\n                    'triggers',\n                    triggerId,\n                    'account'\n                  ]),\n                error,\n                hasError: !!error || currentStatus === 'errored',\n                isRunning: ['queued', 'running'].includes(currentStatus),\n                isConnected: !error && currentStatus === 'done',\n                lastSyncDate: lastSyncDate\n              }\n            }\n          }\n        }\n      }, state)\n\n    case PURGE_QUEUE:\n    case RECEIVE_DELETED_DOCUMENT:\n      return Object.keys(state).reduce((konnectors, slug) => {\n        return {\n          ...konnectors,\n          [slug]: konnectorReducer(state[slug], action)\n        }\n      }, state)\n\n    default:\n      return state\n  }\n}\n\nconst creation = (state = null, action) => {\n  switch (action.type) {\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT: {\n      if (!state) return null\n      if (\n        !action.response ||\n        !action.response.data ||\n        action.response.data.length !== 1\n      ) {\n        return state\n      }\n\n      const doc = action.response.data[0]\n      const isAccount = doc._type === ACCOUNT_DOCTYPE\n\n      if (isAccount)\n        return {\n          ...state,\n          account: doc._id\n        }\n\n      const isTrigger = isKonnectorTrigger(doc)\n      if (isTrigger)\n        return {\n          ...state,\n          trigger: doc._id\n        }\n\n      return state\n    }\n    case START_CONNECTION_CREATION:\n      // Store all data related to the creation of a new connection in then\n      // property `creation`\n      // While a new connection is being configured, new trigger and account\n      // are store here\n      return {}\n    case END_CONNECTION_CREATION:\n      return null\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  creation,\n  konnectors: reducer\n})\n\n// sub(?) reducers\nconst konnectorReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n    case LAUNCH_TRIGGER:\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_DELETED_DOCUMENT:\n    case PURGE_QUEUE:\n      // We assume that document being a trigger has already been validated.\n      return {\n        ...state,\n        triggers: triggersReducer(state.triggers, action)\n      }\n    default:\n      return state\n  }\n}\n\nconst triggersReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n      return {\n        ...state,\n        [action.trigger._id]: {\n          ...state[action.trigger._id],\n          isEnqueued: true\n        }\n      }\n    case LAUNCH_TRIGGER:\n      return {\n        ...state,\n        [action.trigger._id]: {\n          ...state[action.trigger._id],\n          account: action.trigger.message.account,\n          isRunning: true\n        }\n      }\n    case PURGE_QUEUE:\n      return state\n        ? Object.keys(state).reduce((newState, triggerId) => {\n            return {\n              ...newState,\n              [triggerId]: {\n                ...newState[triggerId],\n                isEnqueued: false\n              }\n            }\n          }, state)\n        : state\n    case RECEIVE_DELETED_DOCUMENT: {\n      const { data } = action.response\n      const { _id, _type } = data[0]\n      if (_type === TRIGGERS_DOCTYPE) {\n        return omit(state, _id)\n      } else return state\n    }\n    default:\n      return state\n  }\n}\n\n// action creators sync\nexport const enqueueConnection = trigger => ({\n  type: ENQUEUE_CONNECTION,\n  trigger\n})\n\nexport const purgeQueue = () => ({\n  type: PURGE_QUEUE\n})\n\nexport const updateConnectionError = (konnector, account, error) => ({\n  type: UPDATE_CONNECTION_ERROR,\n  konnector,\n  account,\n  error\n})\n\nexport const startConnectionCreation = konnector => ({\n  type: START_CONNECTION_CREATION,\n  konnector\n})\n\nexport const endConnectionCreation = () => ({\n  type: END_CONNECTION_CREATION\n})\n\n// selectors\nexport const getConnectionsByKonnector = (\n  state,\n  konnectorSlug,\n  validAccounts = [],\n  validKonnectors = []\n) => {\n  const konnectorIsValid =\n    !validKonnectors.length || validKonnectors.includes(konnectorSlug)\n  const konnectorHasConnections =\n    state.konnectors[konnectorSlug] &&\n    Object.keys(state.konnectors[konnectorSlug].triggers).length\n  if (!konnectorIsValid || !konnectorHasConnections) return []\n\n  return Object.values(state.konnectors[konnectorSlug].triggers).filter(\n    trigger => validAccounts.includes(trigger.account)\n  )\n}\n\nexport const getFirstError = (state, konnectorSlug) => {\n  const firstTriggerHavingError =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers).find(\n      trigger => !!trigger.error\n    )\n  return firstTriggerHavingError ? firstTriggerHavingError.error : null\n}\n\nexport const getFirstUserError = (state, konnectorSlug) => {\n  const firstTriggerHavingUserError =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers).find(trigger =>\n      isKonnectorUserError(trigger.error)\n    )\n  return firstTriggerHavingUserError ? firstTriggerHavingUserError.error : null\n}\n\nexport const getLastSyncDate = (state, konnectorSlug) => {\n  const lastExecutions =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers)\n      .map(trigger => trigger.lastSyncDate)\n      .sort((dateA, dateB) => {\n        const momentA = moment.utc(dateA)\n        const momentB = moment.utc(dateB)\n        return momentA.isAfter(momentB) ? -1 : momentA.isBefore(momentB) ? 1 : 0\n      })\n  return lastExecutions.length && lastExecutions[0]\n}\n\n// Map the trigger status to a status compatible with queue\nconst getTriggerQueueStatus = trigger => {\n  if (trigger.isRunning) return 'ongoing'\n  if (trigger.hasError) return 'error'\n  if (trigger.isConnected) return 'done'\n  return 'pending'\n}\n\nexport const getQueue = (state, konnectors) =>\n  // state is state.connections\n  state.konnectors\n    ? Object.keys(state.konnectors).reduce(\n        (queuedConnections, konnectorSlug) => {\n          const triggers = state.konnectors[konnectorSlug].triggers\n          if (!triggers) return queuedConnections\n          const konnector = konnectors[konnectorSlug]\n          return queuedConnections.concat(\n            Object.keys(triggers).reduce((queuedTriggers, triggerId) => {\n              if (triggers[triggerId].isEnqueued) {\n                const label = konnector.name\n                const status = getTriggerQueueStatus(triggers[triggerId])\n                return queuedTriggers.concat({\n                  konnector,\n                  label,\n                  status,\n                  triggerId\n                })\n              }\n\n              return queuedTriggers\n            }, [])\n          )\n        },\n        []\n      )\n    : []\n\nexport const getConnectionError = (state, trigger) =>\n  getTriggerState(state, trigger).error\n\nexport const getCreatedAccount = state =>\n  !!state.creation && state.creation.account\n\nexport const getTriggerIdByKonnectorAndAccount = (\n  state,\n  konnector,\n  account,\n  validAccounts = []\n) =>\n  !!konnector &&\n  !!account &&\n  validAccounts.includes(account._id) &&\n  !!state.konnectors[konnector.slug] &&\n  Object.keys(state.konnectors[konnector.slug].triggers).find(\n    triggerId =>\n      state.konnectors[konnector.slug].triggers[triggerId].account ===\n      account._id\n  )\n\nexport const getTriggerLastSuccess = (state, trigger) => {\n  const lastJob = getTriggerLastJob(state, trigger)\n  const lastJobIsSuccess = lastJob && lastJob.state === 'done'\n  if (lastJobIsSuccess) return lastJob.started_at\n  return (\n    !!trigger && !!trigger.current_state && trigger.current_state.last_success\n  )\n}\n\n// get trigger from state, in state.konnectors[konnectorSlug].triggers[triggerId]\nconst getTriggerState = (state, trigger) => {\n  const konnectorSlug = getTriggerKonnectorSlug(trigger)\n  if (!konnectorSlug || !state.konnectors || !state.konnectors[konnectorSlug])\n    return false\n  const triggers = state.konnectors[konnectorSlug].triggers\n  if (!triggers) return false\n  return (!!triggers && !!triggers[trigger._id] && triggers[trigger._id]) || {}\n}\n\nexport const isCreatingConnection = state => !!state.creation\n\nexport const isConnectionConnected = (state, trigger) =>\n  getTriggerState(state, trigger).isConnected\n\nexport const isConnectionEnqueued = (state, trigger) =>\n  getTriggerState(state, trigger).isEnqueued\n\nexport const isConnectionRunning = (state, trigger) =>\n  getTriggerState(state, trigger).isRunning\n","/* (ignored) */","import classNames from 'classnames'\nimport has from 'lodash/has'\nimport sortBy from 'lodash/sortBy'\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Button from 'cozy-ui/react/Button'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport styles from 'styles/konnectorSuccess.styl'\nimport DescriptionContent from 'components/DescriptionContent'\nimport TriggerFolderLink from 'components/TriggerFolderLink'\nimport BanksLink from 'components/BanksLink'\nimport connectingIllu from 'assets/images/connecting-data-in-progress.svg'\n\nconst SuccessImage = () => (\n  <div className={styles['col-account-success-illu-wrapper']}>\n    <img src={connectingIllu} className={styles['col-account-success-illu']} />\n  </div>\n)\n\nconst SuccessLinks = ({ children }) => (\n  <p className={classNames(styles['col-account-success-links'], 'u-mv-half')}>\n    {children}\n  </p>\n)\n\nconst DriveLink = translate()(({ folderId, t }) => (\n  <TriggerFolderLink\n    folderId={folderId}\n    label={t('account.success.driveLinkText')}\n  />\n))\n\nconst SuccessFooter = translate()(({ children }) => (\n  <div className={styles['coz-form-controls-success']}>\n    <div className={styles['col-account-form-success-buttons']}>{children}</div>\n  </div>\n))\n\nexport class KonnectorSuccess extends Component {\n  componentDidMount() {\n    if (typeof this.props.handleConnectionSuccess === 'function') {\n      this.props.handleConnectionSuccess()\n    }\n  }\n\n  render() {\n    const { account, error, title, messages } = this.props\n    const relatedApps = sortBy(\n      Object.values(KonnectorSuccess.apps).filter(app =>\n        app.predicate(this.props)\n      ),\n      app => -app.priority\n    )\n\n    const hasLinks = relatedApps.length > 0\n\n    return (\n      account && (\n        <div className={styles['col-account-success']}>\n          {!error && <SuccessImage />}\n          <DescriptionContent\n            title={!error && title}\n            messages={!error && messages}\n          >\n            {hasLinks && (\n              <SuccessLinks>\n                {relatedApps.map((app, i) =>\n                  // Should always pass context, since it's used for customisation\n                  app.successLink(this.props, this.context, i)\n                )}\n              </SuccessLinks>\n            )}\n          </DescriptionContent>\n\n          <SuccessFooter>\n            {relatedApps.length > 0\n              ? // Should always pass context, since it's used for customisation\n                relatedApps[0].footerLink(this.props, this.context)\n              : null}\n          </SuccessFooter>\n        </div>\n      )\n    )\n  }\n}\n\nKonnectorSuccess.apps = {\n  drive: {\n    priority: 1,\n    // eslint-disable-next-line react/display-name\n    predicate: props => {\n      const trigger = props.trigger\n      const res = has(trigger, 'message.folder_to_save')\n      return res\n    },\n    // eslint-disable-next-line react/display-name\n    successLink: (props, context, i) => {\n      return (\n        <DriveLink key={i} folderId={props.trigger.message.folder_to_save} />\n      )\n    },\n    // eslint-disable-next-line react/display-name\n    footerLink: props => {\n      const { t, onDone, account, successButtonLabel } = props\n      return (\n        <Button\n          label={successButtonLabel || t('account.success.button')}\n          onClick={event => {\n            event.preventDefault()\n            onDone(account)\n          }}\n        />\n      )\n    }\n  },\n\n  banks: {\n    priority: 0,\n    // eslint-disable-next-line react/display-name\n    predicate: props => {\n      const connector = props.connector\n      return (\n        Array.isArray(connector.data_types) &&\n        connector.data_types.includes('bankAccounts')\n      )\n    },\n    // eslint-disable-next-line react/display-name\n    successLink: (props, context, i) => {\n      return <BanksLink key={i} banksUrl={context.store.banksUrl} />\n    },\n    footerLink: () => null\n  }\n}\n\nKonnectorSuccess.contextTypes = {\n  store: PropTypes.object\n}\n\nKonnectorSuccess.propTypes = {\n  account: PropTypes.object.isRequired,\n  error: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  messages: PropTypes.arrayOf(PropTypes.string),\n  onDone: PropTypes.func.isRequired,\n  successButtonLabel: PropTypes.string,\n  trigger: PropTypes.object.isRequired\n}\n\nexport { SuccessImage, SuccessLinks, BanksLink, DriveLink }\n\nexport default translate()(KonnectorSuccess)\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* konnector lib ready to be added to cozy-client-js */\nexport const ERROR_TYPES = {\n  CHALLENGE_ASKED: 'CHALLENGE_ASKED',\n  LOGIN_FAILED: 'LOGIN_FAILED',\n  MAINTENANCE: 'MAINTENANCE',\n  NOT_EXISTING_DIRECTORY: 'NOT_EXISTING_DIRECTORY',\n  USER_ACTION_NEEDED: 'USER_ACTION_NEEDED',\n  VENDOR_DOWN: 'VENDOR_DOWN',\n  DISK_QUOTA_EXCEEDED: 'DISK_QUOTA_EXCEEDED'\n}\n\nexport const UPDATE_NEEDED_ERRORS_TYPES = {\n  TERMS_VERSION_MISMATCH: 'TERMS_VERSION_MISMATCH'\n}\n\nexport const TWO_FA_ERRORS = [\n  'USER_ACTION_NEEDED.TWOFA_EXPIRED',\n  'USER_ACTION_NEEDED.WRONG_TWOFA_CODE'\n]\n\nfunction patchFolderPermission(cozy, konnector, folderId = null) {\n  const slug = konnector.attributes ? konnector.attributes.slug : konnector.slug\n  const saveFolder = folderId\n    ? { type: 'io.cozy.files', values: [folderId] }\n    : {}\n\n  return cozy.fetchJSON(\n    'PATCH',\n    `/permissions/konnectors/${encodeURIComponent(slug)}`,\n    {\n      data: {\n        attributes: {\n          permissions: {\n            saveFolder: saveFolder\n          }\n        }\n      }\n    }\n  )\n}\n\nexport function addFolderPermission(cozy, konnector, folderId) {\n  return patchFolderPermission(cozy, konnector, folderId)\n}\n\nexport function isKonnectorLoginError(error) {\n  return error && error.type && error.type === ERROR_TYPES.LOGIN_FAILED\n}\n\nexport function isKonnectorTwoFAError(error) {\n  return error && error.type && TWO_FA_ERRORS.includes(error.code)\n}\n\nexport function isKonnectorUserError(error) {\n  return (\n    error &&\n    error.type &&\n    [\n      ERROR_TYPES.CHALLENGE_ASKED,\n      ERROR_TYPES.DISK_QUOTA_EXCEEDED,\n      ERROR_TYPES.LOGIN_FAILED,\n      ERROR_TYPES.NOT_EXISTING_DIRECTORY,\n      ERROR_TYPES.USER_ACTION_NEEDED\n    ].includes(error.type)\n  )\n}\n\nexport function isKonnectorKnownError(error) {\n  return error && error.type && Object.keys(ERROR_TYPES).includes(error.type)\n}\n\nexport function isKonnectorUpdateNeededError(error) {\n  return (\n    error &&\n    error.type &&\n    Object.keys(UPDATE_NEEDED_ERRORS_TYPES).includes(error.type)\n  )\n}\n\nexport function buildKonnectorError(message) {\n  var error = new Error(message)\n  error.type = message.split('.')[0]\n  error.code = message\n  return error\n}\n\nconst checkLocale = (t, key) => {\n  return t(key) !== key\n}\n\nexport const hasPendingUpdate = konnector => {\n  return !!konnector.available_version\n}\n\nexport const getMostAccurateErrorKey = (t, error, getKey = key => key) => {\n  // Legacy. Kind of.\n  if (!error.code) return error.message\n\n  const errorSegments = error.code.split('.')\n\n  let tested = errorSegments\n  let fullKey = getKey(tested.join('.'))\n\n  while (tested.length && !checkLocale(t, fullKey)) {\n    tested = tested.slice(0, tested.length - 1)\n    fullKey = getKey(tested.join('.'))\n  }\n\n  return tested.length ? fullKey : getKey('UNKNOWN_ERROR')\n}\n\nconst legacyMessages = {\n  terms: 'connector'\n}\n\nexport const getKonnectorMessage = (t, konnector, message) => {\n  const { messages, hasDescriptions } = konnector\n\n  const providesMessage =\n    messages && messages.length && messages.includes(message)\n  if (providesMessage) return t(`${konnector.slug}.messages.${message}`)\n\n  const providesLegacyMessage =\n    hasDescriptions && hasDescriptions[legacyMessages[message] || message]\n  if (providesLegacyMessage)\n    return t(\n      `connector.${konnector.slug}.description.${legacyMessages[message] ||\n        message}`\n    )\n\n  return null\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spin\":\"spin--1tM1P\",\"shake\":\"shake--2XjZi\"};","import React, { PureComponent } from 'react'\nimport classNames from 'classnames'\nimport { connect } from 'react-redux'\n\nimport { withClient } from 'cozy-client'\nimport Icon from 'cozy-ui/react/Icon'\n\nimport { getApp, receiveApps } from 'ducks/apps'\nimport styles from 'styles/triggerFolderLink.styl'\n\n/**\n * Renders a link only if href prop is provided\n */\nclass MaybeLink extends PureComponent {\n  render() {\n    const { className, href } = this.props\n    return href ? (\n      <a className={className} href={href} target=\"_parent\">\n        {this.props.children}\n      </a>\n    ) : (\n      <span className={className}>{this.props.children}</span>\n    )\n  }\n}\n\nexport class TriggerFolderLink extends PureComponent {\n  async componentDidMount() {\n    const { client, driveApp, receiveApps } = this.props\n    if (!driveApp) {\n      const { data } = await client.query(client.all('io.cozy.apps'))\n      receiveApps(data)\n    }\n  }\n\n  render() {\n    const { driveApp, label, folderId } = this.props\n    const disabled = !driveApp\n    return (\n      <MaybeLink\n        className={classNames(styles['col-trigger-folder-link'], {\n          'u-silver': disabled,\n          'u-c-not-allowed': disabled\n        })}\n        href={driveApp && `${driveApp.links.related}#/files/${folderId}`}\n      >\n        <Icon className=\"u-mr-half\" icon=\"openwith\" />\n        {label}\n      </MaybeLink>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  driveApp: getApp(state.apps, 'drive')\n})\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    receiveApps: apps => dispatch(receiveApps(apps))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withClient(TriggerFolderLink))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"maintenance-intro\":\"maintenance-intro--1-SbJ\",\"maintenance-service\":\"maintenance-service--1ZZfz\",\"maintenance-icon\":\"maintenance-icon--2QHy-\"};","/* global prompt */\n\nconst hasCordovaPlugin = () => {\n  return (\n    window.cordova !== undefined && window.cordova.InAppBrowser !== undefined\n  )\n}\n\nconst REGISTRATION_ABORT = 'REGISTRATION_ABORT'\n\nexport const authenticateWithCordova = url => {\n  if (hasCordovaPlugin()) {\n    return new Promise((resolve, reject) => {\n      const target = '_blank'\n      const options = 'clearcache=yes,zoom=no'\n      const inAppBrowser = window.cordova.InAppBrowser.open(\n        url,\n        target,\n        options\n      )\n\n      const removeListener = () => {\n        inAppBrowser.removeEventListener('loadstart', onLoadStart)\n        inAppBrowser.removeEventListener('exit', onExit)\n      }\n\n      const onLoadStart = ({ url }) => {\n        const accessCode = /\\?access_code=(.+)$/.test(url)\n        const state = /\\?state=(.+)$/.test(url)\n\n        if (accessCode || state) {\n          resolve(url)\n          removeListener()\n          inAppBrowser.close()\n        }\n      }\n\n      const onExit = () => {\n        reject(new Error(REGISTRATION_ABORT))\n        removeListener()\n        inAppBrowser.close()\n      }\n\n      inAppBrowser.addEventListener('loadstart', onLoadStart)\n      inAppBrowser.addEventListener('exit', onExit)\n    })\n  } else {\n    /**\n     * for dev purpose:\n     * In oauth workflow, the server displays an authorization page\n     * User must accept to give permission then the server gives an url\n     * with query parameters used by cozy-client-js to initialize itself.\n     *\n     * This hack let developers open the authorization page in a new tab\n     * then get the \"access_code\" url and paste it in the prompt to let the\n     * application initialize and redirect to other pages.\n     */\n    return new Promise(resolve => {\n      setTimeout(() => {\n        const token = prompt('Paste the url here:')\n        resolve(token)\n      }, 10000)\n    })\n  }\n}\n","import { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class CozyProvider extends Component {\n  static propTypes = {\n    domain: PropTypes.string,\n    secure: PropTypes.bool,\n    store: PropTypes.shape({\n      subscribe: PropTypes.func.isRequired,\n      dispatch: PropTypes.func.isRequired,\n      getState: PropTypes.func.isRequired\n    }),\n    client: PropTypes.object.isRequired,\n    children: PropTypes.element.isRequired\n  }\n\n  static childContextTypes = {\n    domain: PropTypes.string,\n    secure: PropTypes.bool,\n    store: PropTypes.object,\n    client: PropTypes.object.isRequired\n  }\n\n  static contextTypes = {\n    store: PropTypes.object\n  }\n\n  getChildContext() {\n    return {\n      domain: this.props.domain,\n      secure: this.props.secure,\n      store: this.props.store || this.context.store,\n      client: this.props.client\n    }\n  }\n\n  render() {\n    return this.props.children || null\n  }\n}\n","import React from 'react'\nimport CozyUiAppIcon from 'cozy-ui/react/AppIcon'\nimport { withClient } from 'cozy-client'\n\n// TODO Update the component in cozy-ui to handle secure and domain natively\nconst AppIcon = ({ client, ...otherProps }) => {\n  const cozyURL = new URL(client.getStackClient().uri)\n  const domain = cozyURL.host\n  const secure = cozyURL.protocol === 'https:'\n  return <CozyUiAppIcon domain={domain} secure={secure} {...otherProps} />\n}\n\nexport default withClient(AppIcon)\n","import React from 'react'\nimport classNames from 'classnames'\n\nimport ReactMarkdownWrapper from 'components/ReactMarkdownWrapper'\nimport styles from 'styles/descriptionContent.styl'\n\nexport const DescriptionContent = ({\n  cssClassesObject,\n  title,\n  messages,\n  children,\n  hasError,\n  centerTitle\n}) => {\n  return (\n    <div className={classNames(cssClassesObject)}>\n      {title && (\n        <h4\n          className={\n            centerTitle\n              ? styles['col-account-description-title-centered']\n              : styles['col-account-description-title']\n          }\n        >\n          {title}\n        </h4>\n      )}\n      {messages &&\n        messages.length > 0 &&\n        messages.map((m, i) => {\n          return m ? (\n            <div\n              key={i}\n              className={classNames(\n                styles['col-account-description-message'],\n                hasError && 'errors'\n              )}\n            >\n              <ReactMarkdownWrapper source={m} />\n            </div>\n          ) : null\n        })}\n      {children}\n    </div>\n  )\n}\n\nexport default DescriptionContent\n","import { combineReducers } from 'redux'\nimport { removeObjectProperty, mapValues } from './utils'\nimport sharings, {\n  FETCH_SHARINGS,\n  getSharings,\n  getSharingDetails\n} from './slices/sharings'\nimport synchronization from './slices/synchronization'\n\nconst APPS_DOCTYPE = 'io.cozy.apps'\nconst FETCH_DOCUMENT = 'FETCH_DOCUMENT'\nconst FETCH_COLLECTION = 'FETCH_COLLECTION'\nconst LAUNCH_TRIGGER = 'LAUNCH_TRIGGER'\nconst RECEIVE_DATA = 'RECEIVE_DATA'\nconst RECEIVE_ERROR = 'RECEIVE_ERROR'\nexport const CREATE_DOCUMENT = 'CREATE_DOCUMENT'\nconst UPDATE_DOCUMENT = 'UPDATE_DOCUMENT'\nconst DELETE_DOCUMENT = 'DELETE_DOCUMENT'\nconst RECEIVE_APP = 'RECEIVE_APP'\nconst RECEIVE_NEW_DOCUMENT = 'RECEIVE_NEW_DOCUMENT'\nconst RECEIVE_UPDATED_DOCUMENT = 'RECEIVE_UPDATED_DOCUMENT'\nconst RECEIVE_DELETED_DOCUMENT = 'RECEIVE_DELETED_DOCUMENT'\nconst FETCH_REFERENCED_FILES = 'FETCH_REFERENCED_FILES'\nconst ADD_REFERENCED_FILES = 'ADD_REFERENCED_FILES'\nconst REMOVE_REFERENCED_FILES = 'REMOVE_REFERENCED_FILES'\n\nconst documents = (state = {}, action) => {\n  switch (action.type) {\n    case RECEIVE_APP: {\n      const apps = action.response && action.response.data\n      if (apps.length === 0) return state\n      return {\n        ...state,\n        [APPS_DOCTYPE]: {\n          ...state[APPS_DOCTYPE],\n          ...objectifyDocumentsArray(apps)\n        }\n      }\n    }\n    case RECEIVE_DATA: {\n      const { data } = action.response\n      if (data.length === 0) return state\n      const dataDoctype = getArrayDoctype(data)\n      return {\n        ...state,\n        [dataDoctype]: {\n          ...state[dataDoctype],\n          ...objectifyDocumentsArray(data)\n        }\n      }\n    }\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_UPDATED_DOCUMENT: {\n      const doc = action.response.data[0]\n      return {\n        ...state,\n        [doc._type]: {\n          ...state[doc._type],\n          [doc.id]: doc\n        }\n      }\n    }\n    case RECEIVE_DELETED_DOCUMENT: {\n      const deleted = action.response.data[0]\n      return {\n        ...state,\n        [deleted._type]: removeObjectProperty(state[deleted._type], deleted.id)\n      }\n    }\n    case ADD_REFERENCED_FILES:\n      return {\n        ...state,\n        'io.cozy.files': {\n          ...state['io.cozy.files'],\n          ...updateFilesReferences(\n            state['io.cozy.files'],\n            action.ids,\n            action.document\n          )\n        }\n      }\n    case REMOVE_REFERENCED_FILES:\n      return {\n        ...state,\n        'io.cozy.files': {\n          ...state['io.cozy.files'],\n          ...removeFilesReferences(\n            state['io.cozy.files'],\n            action.ids,\n            action.document\n          )\n        }\n      }\n    default:\n      return state\n  }\n}\n\nconst objectifyDocumentsArray = documents =>\n  documents.reduce((obj, doc) => ({ ...obj, [doc.id]: doc }), {})\n\nconst updateFileReference = (\n  /* eslint-disable-next-line casecamelcase */\n  { relationships: { referenced_by, ...relationships }, ...file },\n  doc\n) => ({\n  ...file,\n  relationships: {\n    ...relationships,\n    /* eslint-disable-next-line casecamelcase */\n    [referenced_by.data]:\n      /* eslint-disable-next-line casecamelcase */\n      referenced_by.data === null\n        ? [{ id: doc.id, type: doc.type }]\n        : /* eslint-disable-next-line casecamelcase */\n          [...referenced_by.data, { id: doc.id, type: doc.type }]\n  }\n})\n\nconst updateFilesReferences = (files, newlyReferencedIds, doc) =>\n  newlyReferencedIds.reduce(\n    (updated, id) => ({\n      ...updated,\n      [id]: updateFileReference(files[id], doc)\n    }),\n    {}\n  )\n\nconst removeFileReferences = (\n  /* eslint-disable-next-line casecamelcase */\n  { relationships: { referenced_by, ...relationships }, ...file },\n  doc\n) => ({\n  ...file,\n  relationships: {\n    ...relationships,\n    /* eslint-disable-next-line casecamelcase */\n    [referenced_by.data]: referenced_by.data.filter(\n      rel => rel.type !== doc.type && rel.id !== doc.id\n    )\n  }\n})\n\nconst removeFilesReferences = (files, removedIds, doc) =>\n  removedIds.reduce(\n    (updated, id) => ({\n      ...updated,\n      [id]: removeFileReferences(files[id], doc)\n    }),\n    {}\n  )\n\nconst getDoctype = ({ _type: doctype }) => {\n  // TODO: don't know why the stack returns 'file' here..\n  if (doctype === 'file') {\n    return 'io.cozy.files'\n  }\n  return doctype\n}\n\nconst getArrayDoctype = documents => getDoctype(documents[0])\n\n// collection reducers\nconst collectionInitialState = {\n  type: null,\n  options: {},\n  fetchStatus: 'pending',\n  lastFetch: null,\n  hasMore: false,\n  count: 0,\n  ids: []\n}\n\nconst collection = (state = collectionInitialState, action) => {\n  switch (action.type) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n      return {\n        ...state,\n        type: action.doctype || 'io.cozy.files',\n        options: action.options,\n        fetchStatus: action.skip > 0 ? 'loadingMore' : 'loading'\n      }\n    case RECEIVE_APP:\n    case RECEIVE_DATA: {\n      const response = action.response\n      return {\n        ...state,\n        fetchStatus: 'loaded',\n        lastFetch: Date.now(),\n        hasMore: response.next !== undefined ? response.next : state.hasMore,\n        count:\n          response.meta && response.meta.count\n            ? response.meta.count\n            : response.data.length,\n        ids: !action.skip\n          ? response.data.map(doc => doc.id)\n          : [...state.ids, ...response.data.map(doc => doc.id)]\n      }\n    }\n    case ADD_REFERENCED_FILES:\n      return {\n        ...state,\n        type: 'io.cozy.files',\n        count: state.count + action.ids.length,\n        ids: [...state.ids, ...action.ids]\n      }\n    case REMOVE_REFERENCED_FILES:\n      return {\n        ...state,\n        count: state.count - action.ids.length,\n        ids: state.ids.filter(id => action.ids.indexOf(id) === -1)\n      }\n    case RECEIVE_ERROR:\n      return {\n        ...state,\n        fetchStatus: 'failed'\n      }\n    case RECEIVE_NEW_DOCUMENT:\n      return {\n        ...state,\n        ids: [...state.ids, action.response.data[0].id]\n      }\n    case RECEIVE_DELETED_DOCUMENT:\n      return {\n        ...state,\n        ids: state.ids.filter(id => id !== action.response.data[0].id)\n      }\n    default:\n      return state\n  }\n}\n\nconst collections = (state = {}, action) => {\n  const applyUpdate = (collections, updateAction) =>\n    updateAction.updateCollections.reduce(\n      (updated, name) => ({\n        ...updated,\n        [name]: collection(collections[name], action)\n      }),\n      {}\n    )\n\n  switch (action.type) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n    case ADD_REFERENCED_FILES:\n    case REMOVE_REFERENCED_FILES:\n    case RECEIVE_APP:\n    case RECEIVE_DATA:\n    case RECEIVE_ERROR:\n      if (!action.collection) {\n        return state\n      }\n      return {\n        ...state,\n        [action.collection]: collection(state[action.collection], action)\n      }\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_DELETED_DOCUMENT:\n      if (!action.updateCollections) {\n        return state\n      }\n      return {\n        ...state,\n        ...applyUpdate(state, action)\n      }\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  collections,\n  documents,\n  sharings,\n  synchronization\n})\n\nexport const fetchApps = (name, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_APP, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.apps',\n  options,\n  skip,\n  promise: client => client.fetchApps(name, options, skip)\n})\n\nexport const fetchCollection = (name, doctype, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype,\n  options,\n  skip,\n  promise: client => client.fetchCollection(name, doctype, options, skip)\n})\n\nexport const fetchDocument = (doctype, id, options = {}) => ({\n  types: [FETCH_DOCUMENT, RECEIVE_DATA, RECEIVE_ERROR],\n  doctype,\n  id,\n  options,\n  promise: client => client.fetchDocument(doctype, id)\n})\n\nexport const fetchReferencedFiles = (doc, skip = 0) => ({\n  types: [FETCH_REFERENCED_FILES, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: `${doc._type}/${doc.id}#files`,\n  document: doc,\n  options: {},\n  skip,\n  promise: client => client.fetchReferencedFiles(doc, skip)\n})\n\nexport const fetchTriggers = (name, worker, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.triggers',\n  options,\n  skip,\n  promise: client => client.fetchTriggers(name, worker, options, skip)\n})\n\nexport const fetchKonnectors = (name, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.konnectors',\n  options,\n  skip,\n  promise: client => client.fetchKonnectors(name, options, skip)\n})\n\nexport const createDocument = (doctype, doc, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  doctype,\n  document: doc,\n  promise: client => client.createDocument(doctype, doc),\n  ...actionOptions\n})\n\nexport const createTrigger = (doc, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.createTrigger(doc),\n  ...actionOptions\n})\n\nexport const launchTrigger = (trigger, actionOptions = {}) => ({\n  types: [LAUNCH_TRIGGER, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  trigger: trigger,\n  promise: client => client.launchTrigger(trigger),\n  ...actionOptions\n})\n\nexport const updateDocument = (doc, actionOptions = {}) => ({\n  types: [UPDATE_DOCUMENT, RECEIVE_UPDATED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.updateDocument(doc),\n  ...actionOptions\n})\n\nexport const deleteDocument = (doc, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.deleteDocument(doc),\n  ...actionOptions\n})\n\nexport const deleteTrigger = (doc, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.deleteTrigger(doc),\n  ...actionOptions\n})\n\nexport const createFile = (file, dirID, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  doctype: 'io.cozy.files',\n  promise: client => client.createFile(file, dirID),\n  ...actionOptions\n})\n\nexport const trashFile = (file, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: file,\n  promise: client => client.trashFile(file),\n  ...actionOptions\n})\n\nexport const addReferencedFiles = (doc, ids) => ({\n  type: ADD_REFERENCED_FILES,\n  collection: `${doc._type}/${doc._id}#files`,\n  document: doc,\n  ids,\n  promise: client => client.addReferencedFiles(doc, ids)\n})\n\nexport const removeReferencedFiles = (doc, ids) => ({\n  type: REMOVE_REFERENCED_FILES,\n  collection: `${doc._type}/${doc._id}#files`,\n  document: doc,\n  ids,\n  promise: client => client.removeReferencedFiles(doc, ids)\n})\n\nexport const makeActionCreator = promise => ({ promise })\n\nexport const makeFetchMoreAction = (\n  { types, collection, document, doctype, options },\n  skip\n) =>\n  types[0] === FETCH_REFERENCED_FILES\n    ? fetchReferencedFiles(document, skip)\n    : fetchCollection(collection, doctype, options, skip)\n\nexport const applySelectorForAction = (state, action) => {\n  switch (action.types[0]) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n      return getCollection(state, action.collection)\n    case FETCH_DOCUMENT:\n      return getDocument(state, action.doctype, action.id)\n    case FETCH_SHARINGS:\n      return action.id\n        ? getSharingDetails(state, action.doctype, action.id, action.options)\n        : getSharings(state, action.doctype, action.options)\n    default:\n      return null\n  }\n}\n\nexport const enhancePropsForActions = (props, fetchActions, dispatch) =>\n  mapValues(fetchActions, (action, propName) => {\n    const dataObject = props[propName]\n    switch (action.types[0]) {\n      case FETCH_COLLECTION:\n      case FETCH_REFERENCED_FILES:\n        return {\n          ...dataObject,\n          fetchMore: dataObject.hasMore\n            ? () =>\n                dispatch(makeFetchMoreAction(action, dataObject.data.length))\n            : null\n        }\n      default:\n        return dataObject\n    }\n  })\n\n// selectors\nconst mapDocumentsToIds = (documents, doctype, ids) =>\n  ids.map(id => documents[doctype][id])\n\nexport const getCollection = (state, name) => {\n  const collection = state.cozy.collections[name]\n  if (!collection) {\n    return { ...collectionInitialState, data: null }\n  }\n  return {\n    ...collection,\n    data: mapDocumentsToIds(\n      state.cozy.documents,\n      collection.type,\n      collection.ids\n    )\n  }\n}\n\nexport const getDocument = (state, doctype, id) => {\n  const documents = state.cozy.documents[doctype]\n  if (!documents) {\n    return null\n  }\n  return documents[id]\n}\n\nexport const isCollectionFetched = (state, name) =>\n  state.cozy.collections[name] &&\n  state.cozy.collections[name].fetchStatus === 'loaded'\n","/* global cozy */\n\nconst slugify = text =>\n  text\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(/[^\\w-]+/g, '') // Remove all non-word chars\n    .replace(/--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, '') // Trim - from end of text\n\nconst forceFileDownload = (href, filename) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', href)\n  element.setAttribute('download', filename)\n  element.style.display = 'none'\n  document.body.appendChild(element)\n  element.click()\n  document.body.removeChild(element)\n}\n\n// async helpers: they interact with the stack but not with the store\nexport const downloadArchive = async (notSecureFilename, fileIds) => {\n  const filename = slugify(notSecureFilename)\n  const href = await cozy.client.files.getArchiveLinkByIds(fileIds, filename)\n  const fullpath = await cozy.client.fullpath(href)\n  forceFileDownload(fullpath, filename + '.zip')\n}\n\nexport const downloadFile = async file => {\n  const response = await cozy.client.files.downloadById(file.id)\n  const blob = await response.blob()\n  forceFileDownload(window.URL.createObjectURL(blob), file.name)\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport AccountConnection from 'containers/AccountConnection'\nimport {\n  endConnectionCreation,\n  isConnectionRunning,\n  isCreatingConnection,\n  startConnectionCreation\n} from 'ducks/connections'\nimport {\n  getCreatedConnectionAccount,\n  getTriggerByKonnectorAndAccount\n} from 'reducers/index'\n\nclass CreateAccountService extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n    this.props.startCreation(this.props.konnector)\n  }\n\n  onSuccess = account => {\n    this.props.endCreation()\n    this.props.onSuccess(account)\n  }\n\n  render() {\n    const { t } = this.props\n    return (\n      <div className=\"coz-service-content\">\n        <AccountConnection\n          onDone={this.onSuccess}\n          successButtonLabel={t('intent.service.success.button.label')}\n          {...this.props}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  // infos from route parameters\n  const { konnector } = ownProps\n  const createdAccount = getCreatedConnectionAccount(state)\n  const trigger = getTriggerByKonnectorAndAccount(\n    state,\n    konnector,\n    createdAccount\n  )\n  return {\n    createdAccount,\n    isCreating: isCreatingConnection(state.connections),\n    isRunning: isConnectionRunning(state.connections, trigger),\n    trigger\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  startCreation: () => dispatch(startConnectionCreation(ownProps.konnector)),\n  endCreation: () => dispatch(endConnectionCreation())\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(translate()(CreateAccountService))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"col-account-connection-content\":\"col-account-connection-content--Jta1z\",\"col-account-connection-fetching\":\"col-account-connection-fetching--3rtXV\",\"col-account-connection-security\":\"col-account-connection-security--1I2Yb\",\"col-account-connection-editor\":\"col-account-connection-editor--1sA6J\"};","var map = {\n\t\"./en\": \"7dT6\",\n\t\"./en.json\": \"7dT6\",\n\t\"./es\": \"oway\",\n\t\"./es.json\": \"oway\",\n\t\"./fr\": \"9pOX\",\n\t\"./fr.json\": \"9pOX\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"KAKi\";","/* global cozy */\nimport * as triggers from 'lib/triggers'\n\nimport CozyRealtime from 'cozy-realtime'\n\nexport const CONNECTION_STATUS = {\n  ERRORED: 'errored',\n  RUNNING: 'running',\n  CONNECTED: 'connected'\n}\n\nconst ACCOUNTS_DOCTYPE = 'io.cozy.accounts'\nconst JOBS_DOCTYPE = 'io.cozy.jobs'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\n\nconst normalize = (dbObject, doctype) => {\n  return {\n    ...dbObject,\n    ...dbObject.attributes,\n    id: dbObject._id,\n    _type: doctype || dbObject._type\n  }\n}\n\nexport default class CollectStore {\n  constructor(context, client, options = {}) {\n    this.client = client\n    this.listener = null\n    this.options = options\n\n    this.categories = require('../config/categories')\n\n    this.updateUnfinishedJob = this.updateUnfinishedJob.bind(this)\n    this.onAccountCreated = this.onAccountCreated.bind(this)\n    this.onAccountUpdated = this.onAccountUpdated.bind(this)\n    this.onAccountDeleted = this.onAccountDeleted.bind(this)\n    this.onTriggerCreated = this.onTriggerCreated.bind(this)\n    this.onTriggerDeleted = this.onTriggerDeleted.bind(this)\n\n    this.initializeRealtime()\n  }\n\n  initializeRealtime() {\n    this.realtime = new CozyRealtime({ client: this.client })\n\n    this.realtime.subscribe('created', JOBS_DOCTYPE, this.updateUnfinishedJob)\n    this.realtime.subscribe('updated', JOBS_DOCTYPE, this.updateUnfinishedJob)\n\n    this.realtime.subscribe('created', ACCOUNTS_DOCTYPE, this.onAccountCreated)\n    this.realtime.subscribe('updated', ACCOUNTS_DOCTYPE, this.onAccountUpdated)\n    this.realtime.subscribe('deleted', ACCOUNTS_DOCTYPE, this.onAccountDeleted)\n\n    this.realtime.subscribe('created', TRIGGERS_DOCTYPE, this.onTriggerCreated)\n    this.realtime.subscribe('deleted', TRIGGERS_DOCTYPE, this.onTriggerDeleted)\n  }\n\n  async onAccountCreated(account) {\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onAccountUpdated(account) {\n    this.dispatch({\n      type: 'RECEIVE_UPDATED_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onAccountDeleted(account) {\n    this.dispatch({\n      type: 'RECEIVE_DELETED_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onTriggerCreated(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async onTriggerUpdated(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_UPDATED_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async onTriggerDeleted(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_DELETED_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async updateUnfinishedJob(job) {\n    const normalizedJob = normalize(job, JOBS_DOCTYPE)\n    // TODO Filter by worker on the WebSocket when it will be available in the\n    // stack\n    const isKonnectorJob = normalizedJob.worker === 'konnector'\n    const isDeletedAccountHookJob = !!normalizedJob.account_deleted\n    if (!isKonnectorJob || isDeletedAccountHookJob) {\n      return\n    }\n\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalizedJob] },\n      updateCollections: ['jobs']\n    })\n    const trigger = await triggers.fetch(cozy.client, normalizedJob.trigger_id)\n    this.onTriggerUpdated(trigger)\n  }\n\n  createIntentService(intent, window) {\n    return cozy.client.intents.createService(intent, window)\n  }\n\n  // Get the drive and banks application url using the list of application\n  fetchUrls() {\n    return cozy.client\n      .fetchJSON('GET', '/apps/')\n      .then(body => {\n        body.forEach(item => {\n          if (!item.attributes || !item.attributes.slug || !item.links) return\n          switch (item.attributes.slug) {\n            case 'banks':\n              this.banksUrl = `${item.links.related}`\n              break\n            default:\n              break\n          }\n        })\n      })\n      .catch(err => {\n        // eslint-disable-next-line no-console\n        console.warn(err.message)\n        return false\n      })\n  }\n}\n","import React from 'react'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport ReactMarkdownWrapper from 'components/ReactMarkdownWrapper'\nimport styles from 'styles/konnectorMaintenance.styl'\n\nconst KonnectorMaintenance = ({ t, maintenance, lang, konnectorName }) => (\n  <div className={styles['maintenance']}>\n    <div className={styles['maintenance-intro']}>\n      <div className={styles['maintenance-icon']} />\n      <h3 className={styles['maintenance-service']}>\n        {t('maintenance.service')}\n      </h3>\n      <p className={styles['maintenance-problem']}>\n        {t('maintenance.problem', { konnectorName })}\n      </p>\n    </div>\n    <h4 className={styles['maintenance-title']}>{t('maintenance.title')}</h4>\n    <ReactMarkdownWrapper\n      className={styles['maintenance-message']}\n      source={maintenance.message[lang] || maintenance.message['en']}\n    />\n  </div>\n)\n\nexport default translate()(KonnectorMaintenance)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"col-account-description-title\":\"col-account-description-title--vVTHU\",\"col-account-description-title-centered\":\"col-account-description-title-centered--32S1O\",\"col-account-description-message\":\"col-account-description-message--ZyZtK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"col-trigger-folder\":\"col-trigger-folder--3s1fX\",\"col-trigger-folder-link\":\"col-trigger-folder-link--2Fkdb\"};","/* global cozy */\nimport DataAccessFacade from './DataAccessFacade'\nimport { authenticateWithCordova } from './authentication/mobile'\n\nconst APPS_DOCTYPE = 'io.cozy.apps'\nconst FILES_DOCTYPE = 'io.cozy.files'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\nconst KONNECTORS_DOCTYPE = 'io.cozy.konnectors'\nconst SHARINGS_DOCTYPE = 'io.cozy.sharings'\n\nexport default class CozyClient {\n  constructor(config) {\n    const { cozyURL, ...options } = config\n    this.options = options\n    this.indexes = {}\n    this.specialDirectories = {}\n    this.facade = new DataAccessFacade()\n    if (cozyURL) {\n      this.facade.setup(cozyURL, options)\n    }\n  }\n\n  register(cozyUrl) {\n    this.facade.setup(cozyUrl, {\n      ...this.options,\n      oauth: {\n        ...this.options.oauth,\n        onRegistered: (client, url) => authenticateWithCordova(url)\n      }\n    })\n    return cozy.client.authorize(true)\n  }\n\n  async isRegistered(clientInfos) {\n    if (!clientInfos) return false\n    try {\n      await cozy.client.auth.getClient(clientInfos)\n      return true\n    } catch (err) {\n      // this is the error sent if we are offline\n      if (err.message === 'Failed to fetch') {\n        return true\n      } else {\n        console.warn(err) // eslint-disable-line no-console\n        return false\n      }\n    }\n  }\n\n  startSync(dispatch) {\n    return this.facade.startSync(dispatch)\n  }\n\n  startReplicationTo(dispatch) {\n    return this.facade.startReplicationTo(dispatch)\n  }\n\n  startReplicationFrom(dispatch) {\n    return this.facade.startReplicationFrom(dispatch)\n  }\n\n  getAdapter(doctype) {\n    return this.facade.getAdapter(doctype)\n  }\n\n  async fetchApps() {\n    return this.getAdapter(APPS_DOCTYPE).fetchApps()\n  }\n\n  async fetchCollection(name, doctype, options = {}, skip = 0) {\n    if (options.selector) {\n      const index = await this.getCollectionIndex(name, doctype, options)\n      return this.getAdapter(doctype).queryDocuments(doctype, index, {\n        ...options,\n        skip\n      })\n    }\n    return this.getAdapter(doctype).fetchDocuments(doctype)\n  }\n\n  fetchDocument(doctype, id) {\n    return this.getAdapter(doctype).fetchDocument(doctype, id)\n  }\n\n  fetchFile(id) {\n    return this.getAdapter(FILES_DOCTYPE).fetchFile(id)\n  }\n\n  fetchReferencedFiles(doc, skip = 0) {\n    return this.getAdapter(doc._type).fetchReferencedFiles(doc, skip)\n  }\n\n  fetchTriggers(name, worker) {\n    return this.getAdapter(TRIGGERS_DOCTYPE).fetchTriggers(worker)\n  }\n\n  fetchKonnectors() {\n    return this.getAdapter(KONNECTORS_DOCTYPE).fetchKonnectors()\n  }\n\n  addReferencedFiles(doc, ids) {\n    return this.getAdapter(doc._type).addReferencedFiles(doc, ids)\n  }\n\n  removeReferencedFiles(doc, ids) {\n    return this.getAdapter(doc._type).removeReferencedFiles(doc, ids)\n  }\n\n  createDocument(doctype, doc) {\n    return this.getAdapter(doctype).createDocument(doctype, doc)\n  }\n\n  createTrigger(doc) {\n    return this.getAdapter(doc._type).createTrigger(doc)\n  }\n\n  launchTrigger(doc) {\n    return this.getAdapter(doc._type).launchTrigger(doc)\n  }\n\n  updateDocument(doc) {\n    return this.getAdapter(doc._type).updateDocument(doc)\n  }\n\n  deleteDocument(doc) {\n    return this.getAdapter(doc._type).deleteDocument(doc)\n  }\n\n  deleteTrigger(doc) {\n    return this.getAdapter(doc._type).deleteTrigger(doc)\n  }\n\n  async fetchSharings(doctype) {\n    const permissions = await this.getAdapter(doctype).fetchSharingPermissions(\n      doctype\n    )\n    const sharingIds = [\n      ...permissions.byMe.map(p => p.attributes.source_id),\n      ...permissions.withMe.map(p => p.attributes.source_id)\n    ]\n    const sharings = await Promise.all(\n      sharingIds.map(id => this.getAdapter(SHARINGS_DOCTYPE).fetchSharing(id))\n    )\n    return { permissions, sharings }\n  }\n\n  createSharing(permissions, contactIds, sharingType, description) {\n    return this.getAdapter(SHARINGS_DOCTYPE).createSharing(\n      permissions,\n      contactIds,\n      sharingType,\n      description\n    )\n  }\n\n  revokeSharing(sharingId) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharing(sharingId)\n  }\n\n  revokeSharingForClient(sharingId, clientId) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharingForClient(\n      sharingId,\n      clientId\n    )\n  }\n\n  createSharingLink(permissions) {\n    return this.getAdapter(SHARINGS_DOCTYPE).createSharingLink(permissions)\n  }\n\n  revokeSharingLink(permission) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharingLink(permission)\n  }\n\n  createFile(file, dirID) {\n    return this.getAdapter(FILES_DOCTYPE).createFile(file, dirID)\n  }\n\n  trashFile(file) {\n    return this.getAdapter(FILES_DOCTYPE).trashFile(file)\n  }\n\n  async ensureDirectoryExists(path) {\n    if (!this.specialDirectories[path]) {\n      const dir = await cozy.client.files.createDirectoryByPath(path)\n      this.specialDirectories[path] = dir._id\n    }\n    return this.specialDirectories[path]\n  }\n\n  async checkUniquenessOf(doctype, property, value) {\n    const index = await this.getUniqueIndex(doctype, property)\n    const existingDocs = await cozy.client.data.query(index, {\n      selector: { [property]: value },\n      fields: ['_id']\n    })\n    return existingDocs.length === 0\n  }\n\n  async getCollectionIndex(name, doctype, options) {\n    if (!this.indexes[name]) {\n      this.indexes[name] = await this.getAdapter(doctype).createIndex(\n        doctype,\n        this.getIndexFields(options)\n      )\n    }\n    return this.indexes[name]\n  }\n\n  async getUniqueIndex(doctype, property) {\n    const name = `${doctype}/${property}`\n    if (!this.indexes[name]) {\n      this.indexes[name] = await this.getAdapter(doctype).createIndex(doctype, [\n        property\n      ])\n    }\n    return this.indexes[name]\n  }\n\n  getIndexFields(options) {\n    const { selector, sort } = options\n    if (sort) {\n      // We filter possible duplicated fields\n      return [...Object.keys(selector), ...Object.keys(sort)].filter(\n        (f, i, arr) => arr.indexOf(f) === i\n      )\n    }\n    return Object.keys(selector)\n  }\n}\n","import { extend as extendI18n } from 'cozy-ui/react/I18n'\n\nconst KONNECTORS_DOCTYPE = 'io.cozy.konnectors'\n\nconst extendI18nWithKonnector = lang => konnector => {\n  const { langs, locales } = konnector\n\n  const hasLangs = langs && langs.length\n  if (!hasLangs) {\n    // eslint-disable-next-line no-console\n    console.warn(`Konnector ${konnector.name} does not specify any lang`)\n    return konnector\n  }\n\n  const providesLang = hasLangs && langs.includes(lang)\n  const actualLang = providesLang ? lang : langs[0]\n\n  const localeKeys = locales && Object.keys(locales)\n  const providesLocales =\n    localeKeys && localeKeys.length && localeKeys.includes(actualLang)\n\n  if (!providesLocales) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Konnector ${\n        konnector.name\n      } does not specify any locale for lang ${actualLang}`\n    )\n    return konnector\n  }\n\n  extendI18n({ [konnector.slug]: locales[actualLang] })\n  return konnector\n}\n\nexport const konnectorsI18nMiddleware = lang => () => next => action => {\n  const { response } = action\n  switch (action.type) {\n    case 'RECEIVE_DATA':\n    case 'RECEIVE_NEW_DOCUMENT':\n      if (response && action.doctype === KONNECTORS_DOCTYPE) {\n        const konnectors = response.data\n        konnectors &&\n          konnectors.length &&\n          konnectors.forEach(extendI18nWithKonnector(lang))\n      }\n      break\n  }\n\n  return next(action)\n}\n\nexport default konnectorsI18nMiddleware\n","export async function fetch(cozy, triggerId) {\n  return cozy.fetchJSON('GET', `/jobs/triggers/${triggerId}`)\n}\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport CreateAccountIntent from 'components/intents/CreateAccountIntent'\nimport { getKonnector, receiveInstalledKonnector } from 'ducks/konnectors'\n\nclass IntentService extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { error: null }\n  }\n\n  handleInstallationSuccess(konnector) {\n    this.props.receiveKonnector(konnector)\n  }\n\n  async componentDidMount() {\n    const { data, konnector, receiveKonnector, service } = this.props\n    if (service && !konnector) {\n      const installedKonnector = await service.compose(\n        'INSTALL',\n        'io.cozy.apps',\n        data\n      )\n\n      // if installedKonnector is null, it means the installation have been\n      // cancelled\n      if (!installedKonnector) {\n        return service.cancel()\n      }\n\n      receiveKonnector(installedKonnector)\n    }\n  }\n\n  onError(error) {\n    this.setState({\n      error: error\n    })\n  }\n\n  render() {\n    const { appData, konnector, onCancel, service, t } = this.props\n    const { error } = this.state\n\n    return (\n      <div className=\"coz-service\">\n        {error && (\n          <div className=\"coz-error coz-service-error\">\n            <p>{t(error.message)}</p>\n            {error.reason && (\n              <p>{t('intent.service.error.cause', { error: error.reason })}</p>\n            )}\n          </div>\n        )}\n        {!error &&\n          konnector && (\n            <CreateAccountIntent\n              appData={appData}\n              konnector={konnector}\n              onCancel={onCancel}\n              onTerminate={service.terminate}\n            />\n          )}\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  receiveKonnector: konnector => dispatch(receiveInstalledKonnector(konnector))\n})\n\nconst mapStateToProps = (state, ownProps) => {\n  const { data } = ownProps\n  const { slug } = data\n  return {\n    konnector: slug && getKonnector(state.cozy, slug)\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(translate()(IntentService))\n","import React, { Component } from 'react'\nimport { connect as reduxConnect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { applySelectorForAction, enhancePropsForActions } from '.'\nimport { mapValues, filterValues } from './utils'\n\nconst connect = (\n  mapDocumentsToProps,\n  mapActionsToProps = null\n) => WrappedComponent => {\n  class Wrapper extends Component {\n    componentDidMount() {\n      const { fetchActions } = this.props\n      const dispatch = this.context.store.dispatch\n      for (const propName in fetchActions) {\n        dispatch(fetchActions[propName])\n      }\n    }\n\n    static contextTypes = {\n      store: PropTypes.object\n    }\n\n    render() {\n      const { store } = this.context\n      const { fetchActions } = this.props\n      const props = {\n        ...this.props,\n        ...enhancePropsForActions(this.props, fetchActions, store.dispatch)\n      }\n      return <WrappedComponent {...props} />\n    }\n  }\n\n  const makeMapStateToProps = (initialState, initialOwnProps) => {\n    const initialProps = mapDocumentsToProps(initialOwnProps)\n\n    const isAction = action => action && action.types && action.promise\n    const fetchActions = filterValues(initialProps, prop => isAction(prop))\n    const otherProps = filterValues(initialProps, prop => !isAction(prop))\n\n    const mapStateToProps = state => ({\n      ...mapValues(\n        fetchActions,\n        action =>\n          isAction(action) ? applySelectorForAction(state, action) : action\n      ),\n      fetchActions,\n      ...otherProps\n    })\n    return mapStateToProps\n  }\n\n  return reduxConnect(makeMapStateToProps, mapActionsToProps)(Wrapper)\n}\n\nexport default connect\n","/* global cozy */\n\nimport React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport Button from 'cozy-ui/react/Button'\nimport Infos from 'cozy-ui/react/Infos'\nimport PropTypes from 'prop-types'\n\nexport class UpdateMessage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isRedirecting: false\n    }\n    this.redirectToStore = this.redirectToStore.bind(this)\n  }\n\n  async redirectToStore() {\n    this.setState({ isRedirecting: true })\n    const { konnector } = this.props\n    try {\n      await cozy.client.intents.redirect('io.cozy.apps', {\n        slug: konnector.slug,\n        step: 'update'\n      })\n    } catch (error) {\n      /* eslint-disable-next-line no-console */\n      console.error(error)\n      this.setState({ isRedirecting: false })\n    }\n  }\n\n  render() {\n    const { t, isBlocking } = this.props\n    const { isRedirecting } = this.state\n\n    return (\n      <Infos\n        actionButton={\n          <Button\n            label={t('update.CTA')}\n            theme=\"danger\"\n            className=\"u-m-0\"\n            onClick={this.redirectToStore}\n            disabled={isRedirecting}\n          />\n        }\n        className=\"u-maw-none\"\n        text={isBlocking ? t('update.blocking') : t('update.regular')}\n        isImportant={isBlocking}\n        title={t('update.title')}\n      />\n    )\n  }\n}\n\nUpdateMessage.propTypes = {\n  konnector: PropTypes.object.isRequired,\n  isBlocking: PropTypes.bool,\n  t: PropTypes.func.isRequired\n}\n\nexport default translate()(UpdateMessage)\n","import { compose, createStore, applyMiddleware } from 'redux'\nimport { cozyMiddleware } from 'redux-cozy-client'\nimport { createLogger } from 'redux-logger'\nimport konnectorsI18nMiddleware from 'lib/middlewares/konnectorsI18n'\nimport thunkMiddleware from 'redux-thunk'\n\nimport CollectStore from 'lib/CollectStore'\nimport flag from 'cozy-flags'\nimport getReducers from 'reducers'\n\nconst configureStore = (legacyClient, cozyClient, context, options = {}) => {\n  // Enable Redux dev tools\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE || compose\n\n  const reduxStore = createStore(\n    getReducers(),\n    composeEnhancers(\n      applyMiddleware.apply(\n        this,\n        [\n          cozyMiddleware(legacyClient),\n          konnectorsI18nMiddleware(options.lang),\n          thunkMiddleware,\n          flag('redux-logger') ? createLogger() : null\n        ].filter(Boolean)\n      )\n    )\n  )\n\n  return Object.assign(\n    new CollectStore(context, cozyClient, options),\n    reduxStore\n  )\n}\n\nexport default configureStore\n","import { combineReducers } from 'redux'\nimport get from 'lodash/get'\n\nimport { reducer } from 'redux-cozy-client'\nimport apps from 'ducks/apps'\nimport * as fromAccounts from 'ducks/accounts'\nimport * as fromKonnectors from 'ducks/konnectors'\nimport * as fromTriggers from 'ducks/triggers'\nimport connections, * as fromConnections from 'ducks/connections'\n\nexport default () =>\n  combineReducers({\n    apps,\n    connections,\n    cozy: reducer\n  })\n\n// selectors\nexport const getInstalledKonnectors = state =>\n  fromKonnectors.getInstalledKonnectors(state.cozy)\n\nexport const getConnectionsByKonnector = (state, konnectorSlug) =>\n  fromConnections.getConnectionsByKonnector(\n    state.connections,\n    konnectorSlug,\n    fromAccounts.getIds(state.cozy),\n    fromKonnectors.getSlugs(state.cozy)\n  )\n\nexport const getConnectionsQueue = state =>\n  fromConnections.getQueue(\n    state.connections,\n    fromKonnectors.getIndexedKonnectors(state.cozy)\n  )\n\nexport const getCreatedConnectionAccount = state =>\n  fromAccounts.getAccount(\n    state.cozy,\n    fromConnections.getCreatedAccount(state.connections)\n  )\n\nexport const getKonnectorTriggersCount = (state, konnector) =>\n  fromTriggers.getKonnectorTriggers(\n    state.cozy,\n    konnector,\n    fromAccounts.getIds(state.cozy)\n  ).length\n\nexport const getTriggerByKonnectorAndAccount = (state, konnector, account) => {\n  const triggerId = fromConnections.getTriggerIdByKonnectorAndAccount(\n    state.connections,\n    konnector,\n    account,\n    fromAccounts.getIds(state.cozy)\n  )\n  return fromTriggers.getTrigger(state.cozy, triggerId)\n}\n\nexport const getTriggersByKonnector = (state, konnectorSlug) => {\n  const triggersInState = state.cozy.documents['io.cozy.triggers'] || {}\n  const triggers = Object.keys(triggersInState).reduce((acc, key) => {\n    const document = state.cozy.documents['io.cozy.triggers'][key]\n    if (\n      document.worker === 'konnector' &&\n      get(document, 'message.konnector') === konnectorSlug\n    ) {\n      acc.push(document)\n    }\n    return acc\n  }, [])\n  return triggers\n}\n\nexport const getTriggersInError = state => {\n  const triggers = get(state, ['cozy', 'documents', 'io.cozy.triggers'], {})\n\n  return Object.values(triggers).filter(trigger => {\n    const isInError = get(trigger, 'current_state.status') === 'errored'\n\n    return isInError\n  })\n}\n\nexport const getAccountsWithErrors = state => {\n  const accountsWithErrorsIds = getTriggersInError(state).map(trigger =>\n    get(trigger, 'message.account')\n  )\n  const accounts = get(state, ['cozy', 'documents', 'io.cozy.accounts'], {})\n\n  return Object.values(accounts).filter(({ _id }) =>\n    accountsWithErrorsIds.includes(_id)\n  )\n}\n","/* global __DEVELOPMENT__ */\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { HashRouter } from 'react-router-dom'\nimport 'cozy-ui/transpiled/react/stylesheet.css'\nimport 'cozy-ui/dist/cozy-ui.min.css'\nimport MostRecentCozyClient, {\n  CozyProvider as MostRecentCozyClientProvider\n} from 'cozy-client'\nimport { I18n } from 'cozy-ui/react/I18n'\n\nimport configureStore from 'store/configureStore'\nimport { CozyClient, CozyProvider } from 'redux-cozy-client'\n\nimport { Application } from 'cozy-doctypes'\n\nimport IntentHandler from 'containers/IntentHandler'\n\nimport 'styles/intents.styl'\n\nconst lang = document.documentElement.getAttribute('lang') || 'en'\nconst context = window.context || 'cozy'\n\nconst ACCOUNTS_DOCTYPE = 'io.cozy.accounts'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const root = document.querySelector('[role=application]')\n  const appData = root.dataset\n\n  const legacyClient = new CozyClient({\n    cozyURL: `//${appData.cozyDomain}`,\n    token: appData.cozyToken\n  })\n\n  // New improvements must be done with CozyClient\n  const cozyClient = new MostRecentCozyClient({\n    uri: `${window.location.protocol}//${appData.cozyDomain}`,\n    schema: {\n      app: Application.schema,\n      accounts: {\n        doctype: ACCOUNTS_DOCTYPE,\n        attributes: {},\n        relationships: {\n          master: {\n            type: 'has-one',\n            doctype: ACCOUNTS_DOCTYPE\n          }\n        }\n      },\n      permissions: {\n        doctype: 'io.cozy.permissions',\n        attributes: {}\n      },\n      triggers: {\n        doctype: 'io.cozy.triggers'\n      }\n    },\n    token: appData.cozyToken\n  })\n\n  // store\n  const store = configureStore(legacyClient, cozyClient, context, {\n    lang\n  })\n\n  render(\n    <MostRecentCozyClientProvider client={cozyClient}>\n      <CozyProvider\n        domain={appData.cozyDomain}\n        store={store}\n        client={cozyClient}\n        secure={!__DEVELOPMENT__}\n      >\n        <I18n\n          lang={lang}\n          dictRequire={lang => require(`locales/${lang}`)}\n          context={context}\n        >\n          <HashRouter>\n            <IntentHandler appData={appData} />\n          </HashRouter>\n        </I18n>\n      </CozyProvider>\n    </MostRecentCozyClientProvider>,\n    document.querySelector('[role=application]')\n  )\n})\n","import React, { Component } from 'react'\nimport { translate } from 'cozy-ui/react/I18n'\nimport PropTypes from 'prop-types'\nimport AppIcon from 'components/AppIcon'\n\nimport styles from 'styles/konnectorHeaderIcon.styl'\n\nexport class KonnectorHeaderIcon extends Component {\n  render() {\n    const { center, konnector, t } = this.props\n    return (\n      <div\n        className={\n          styles[`col-konnector-header-icon-wrapper${center ? '--center' : ''}`]\n        }\n      >\n        <AppIcon\n          alt={t('app.logo.alt', { name: konnector.name })}\n          app={konnector}\n          className={\n            styles[`col-konnector-header-icon${center ? '--center' : ''}`]\n          }\n        />\n      </div>\n    )\n  }\n}\n\nKonnectorHeaderIcon.propTypes = {\n  center: PropTypes.bool,\n  konnector: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nexport default translate()(KonnectorHeaderIcon)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"col-konnector-header-icon-wrapper\":\"col-konnector-header-icon-wrapper--1oMyA\",\"col-konnector-header-icon-wrapper--center\":\"col-konnector-header-icon-wrapper--center--3aLBw\",\"col-konnector-header-icon\":\"col-konnector-header-icon--2Yxl_\",\"col-konnector-header-icon--center\":\"col-konnector-header-icon--center--3rGkD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"col-account-connection\":\"col-account-connection--3AgeF\"};","var map = {\n\t\"./en-SG\": \"zavE\",\n\t\"./en-SG.js\": \"zavE\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"iUaz\";","/* global cozy, PouchDB, pouchdbFind */\nimport {\n  startDoctypeSync,\n  syncDoctypeOk,\n  syncDoctypeError\n} from '../slices/synchronization'\n\nconst REPLICATION_INTERVAL = 30000\nexport const SYNC_BIDIRECTIONAL = 'SYNC_BIDIRECTIONAL'\nexport const SYNC_TO = 'SYNC_TO'\nexport const SYNC_FROM = 'SYNC_FROM'\n\nexport default class PouchdbAdapter {\n  constructor() {\n    PouchDB.plugin(pouchdbFind)\n    this.instances = {}\n    this.doctypes = []\n  }\n\n  registerDoctypes(doctypes) {\n    this.doctypes = doctypes\n  }\n\n  getDatabase(doctype) {\n    return cozy.client.offline.getDatabase(doctype) // For now we let cozy-client-js creates PouchDB instances\n  }\n\n  getReplicationBaseUrl() {\n    return cozy.client.authorize().then(credentials => {\n      const basic = credentials.token.toBasicAuth()\n      return `${cozy.client._url}/data/`.replace('//', `//${basic}`)\n    })\n  }\n\n  getSeqNumber(doctype) {\n    return this.getDatabase(doctype)\n      .info()\n      .then(result => result.update_seq)\n  }\n\n  async sync(dispatch, direction = SYNC_BIDIRECTIONAL) {\n    const baseUrl = await this.getReplicationBaseUrl()\n    for (let doctype of this.doctypes) {\n      const seqNumber = await this.getSeqNumber(doctype)\n      await dispatch(startDoctypeSync(doctype, seqNumber))\n      this.syncDoctype(doctype, `${baseUrl}${doctype}`, dispatch, direction)\n    }\n  }\n\n  syncDoctype(\n    doctype,\n    replicationUrl,\n    dispatch,\n    direction = SYNC_BIDIRECTIONAL\n  ) {\n    return new Promise((resolve, reject) => {\n      const db = this.getDatabase(doctype)\n\n      let syncHandler\n      if (direction === SYNC_TO) syncHandler = db.replicate.to(replicationUrl)\n      else if (direction === SYNC_FROM)\n        syncHandler = db.replicate.from(replicationUrl)\n      else syncHandler = db.sync(replicationUrl)\n\n      syncHandler\n        .on('complete', info => {\n          dispatch(syncDoctypeOk(doctype, info))\n          this.scheduleNextSync(doctype, replicationUrl, dispatch, direction)\n          resolve(info)\n        })\n        .on('error', err => {\n          if (err.error === 'code=400, message=Expired token') {\n            return cozy.client.authorize().then(({ client, token }) => {\n              cozy.client.auth\n                .refreshToken(cozy, client, token)\n                .then(newToken => cozy.client.saveCredentials(client, newToken))\n                .then(() => this.syncDoctype(doctype, replicationUrl))\n            })\n          } else if (err.status !== 404) {\n            // A 404 error on some doctypes is perfectly normal when there is no data\n            dispatch(syncDoctypeError(doctype, err))\n            this.scheduleNextSync(doctype, replicationUrl, dispatch)\n            reject(err)\n          }\n        })\n    })\n  }\n\n  scheduleNextSync(doctype, replicationUrl, dispatch, direction) {\n    setTimeout(() => {\n      this.syncDoctype(doctype, replicationUrl, dispatch, direction)\n    }, REPLICATION_INTERVAL)\n  }\n\n  async fetchDocuments(doctype) {\n    const resp = await this.getDatabase(doctype).allDocs({ include_docs: true })\n    return {\n      data: resp.rows\n        .filter(row => !row.doc.hasOwnProperty('views'))\n        .map(row => ({ ...row.doc, id: row.id, _type: doctype })),\n      meta: { count: resp.total_rows },\n      skip: resp.offset,\n      next: false\n    }\n  }\n\n  async queryDocuments(doctype, index, options) {\n    const queryOptions = {\n      ...options,\n      fields: [...options.fields, '_id'],\n      sort: options.sort\n        ? Object.keys(options.sort).map(k => ({ [k]: options.sort[k] }))\n        : undefined\n    }\n    const resp = await this.getDatabase(doctype).find(queryOptions)\n\n    return {\n      data: resp.docs.map(doc => ({ ...doc, id: doc._id, _type: doctype })),\n      meta: { count: resp.docs.length },\n      skip: 0,\n      next: false\n    }\n  }\n\n  async fetchDocument(doctype, id) {\n    const resp = await this.getDatabase(doctype).get(id, { revs_info: true }) // We need the revs_info option to get the _rev property\n    return { data: [{ ...resp, id: resp.id, _id: resp.id, _type: doctype }] }\n  }\n\n  async createDocument(doctype, doc) {\n    const resp = await this.getDatabase(doctype).post(doc)\n    return {\n      data: [\n        { ...doc, id: resp.id, _id: resp.id, _type: doctype, _rev: resp.rev }\n      ]\n    }\n  }\n\n  async updateDocument(doc) {\n    // TODO: _* properties are reserved by CouchDB, so we can't send the doc with its _type property...\n    const { _type, ...safeDoc } = doc\n    const resp = await this.getDatabase(_type).put(safeDoc)\n    return { data: [{ ...doc, _rev: resp.rev }] }\n  }\n\n  async deleteDocument(doc) {\n    await this.getDatabase(doc._type).remove(doc)\n    return { data: [doc] }\n  }\n\n  createIndex(doctype, fields) {\n    return this.getDatabase(doctype).createIndex({ index: { fields } })\n  }\n\n  fetchFileByPath() {\n    throw new Error('Not implemented')\n  }\n\n  createFile() {\n    throw new Error('Not implemented')\n  }\n\n  trashFile() {\n    throw new Error('Not implemented')\n  }\n\n  fetchReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n\n  addReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n\n  removeReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Sprite as IconSprite } from 'cozy-ui/react/Icon'\nimport Spinner from 'cozy-ui/react/Spinner'\n\nimport appEntryPoint from 'components/appEntryPoint'\nimport IntentService from 'containers/IntentService'\n\nclass IntentHandler extends Component {\n  constructor(props, context) {\n    super(props, context)\n    this.store = context.store\n\n    this.state = {\n      isInitializing: true\n    }\n\n    this.store\n      .createIntentService()\n      .then(service => {\n        this.setState({\n          isInitializing: false,\n          service: service\n        })\n      })\n      .catch(error => {\n        this.setState({\n          isInitializing: false,\n          error: {\n            message: 'intent.service.error.initialization',\n            reason: error.message\n          }\n        })\n      })\n  }\n\n  terminate(account) {\n    const { service } = this.state\n    service.terminate(account)\n  }\n\n  cancel() {\n    const { service } = this.state\n    service.cancel()\n  }\n\n  handleError(error) {\n    this.setState({\n      error: {\n        message: 'intent.service.error.creation',\n        reason: error.message\n      }\n    })\n\n    throw error\n  }\n\n  render() {\n    // const { data } = this.props\n    const { appData, accounts, konnectors, triggers, t } = this.props\n    const { error, service } = this.state\n    let { isInitializing } = this.state\n\n    isInitializing =\n      isInitializing ||\n      [accounts, konnectors, triggers].find(collection =>\n        ['pending', 'loading'].includes(collection.fetchStatus)\n      )\n\n    return (\n      <div className=\"coz-service\">\n        {isInitializing && (\n          <div className=\"coz-service-loading\">\n            <Spinner size=\"xxlarge\" />\n          </div>\n        )}\n        {error && (\n          <div className=\"coz-error coz-service-error\">\n            <p>{t(error.message)}</p>\n            <p>{t('intent.service.error.cause', { error: error.reason })}</p>\n          </div>\n        )}\n        {!isInitializing &&\n          !error && (\n            // Here we should render a component based on the intent action.\n            // For now, our action is only CREATE on io.cozy.accounts. So here\n            // we should render a component named CreateAccountService.\n            // IntentService is just here for legacy reason and should\n            // disappear.\n            // In the future we may test the intent action and render a\n            // specific component for every action.\n            <IntentService\n              appData={appData}\n              data={service.getData()}\n              onTerminate={account => this.terminate(account)}\n              onCancel={() => this.cancel()}\n              service={service}\n            />\n          )}\n        <IconSprite />\n      </div>\n    )\n  }\n}\n\nIntentHandler.contextTypes = {\n  store: PropTypes.object\n}\n\nexport default appEntryPoint(translate()(IntentHandler))\n","var map = {\n\t\"./en.json\": \"8WAw\",\n\t\"./fr.json\": \"H488\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"kGy0\";","export { default as CozyProvider } from './CozyProvider'\nexport { default as CozyClient } from './CozyClient'\nexport { default as cozyConnect } from './connect'\nexport { default as cozyMiddleware } from './middleware'\nexport {\n  default as reducer,\n  makeActionCreator,\n  fetchApps,\n  fetchCollection,\n  fetchDocument,\n  fetchReferencedFiles,\n  fetchKonnectors,\n  fetchTriggers,\n  addReferencedFiles,\n  removeReferencedFiles,\n  applySelectorForAction,\n  enhancePropsForActions,\n  getCollection,\n  getDocument,\n  createDocument,\n  createTrigger,\n  launchTrigger,\n  updateDocument,\n  deleteDocument,\n  deleteTrigger,\n  createFile,\n  trashFile,\n  CREATE_DOCUMENT\n} from './reducer'\nexport {\n  fetchSharings,\n  fetchContacts,\n  getSharingDetails,\n  share,\n  unshare,\n  leave,\n  shareByLink,\n  revokeLink\n} from './slices/sharings'\nexport { startSync, isFirstSync, isSynced } from './slices/synchronization'\n\nexport { downloadArchive, downloadFile } from './helpers'\n","import { cozyConnect } from 'redux-cozy-client'\n\nimport { fetchAccounts } from 'ducks/accounts'\nimport { fetchKonnectors } from 'ducks/konnectors'\nimport { fetchKonnectorJobs } from 'ducks/jobs'\nimport { fetchTriggers } from 'ducks/triggers'\n\nconst mapDocumentsToProps = () => ({\n  accounts: fetchAccounts(),\n  jobs: fetchKonnectorJobs(),\n  konnectors: fetchKonnectors(),\n  triggers: fetchTriggers()\n})\n\nconst appEntryPoint = (WrappedComponent, selectData) =>\n  cozyConnect(mapDocumentsToProps)(WrappedComponent, selectData)\n\nexport default appEntryPoint\n","export const mapValues = (object, transform) => {\n  let result = {}\n  for (const key in object) {\n    result[key] = transform(object[key], key)\n  }\n  return result\n}\n\nexport const filterValues = (object, filter) => {\n  let result = {}\n  for (const key in object) {\n    if (filter(object[key], key)) {\n      result[key] = object[key]\n    }\n  }\n  return result\n}\n\nexport const removeObjectProperty = (obj, prop) => {\n  return Object.keys(obj).reduce((result, key) => {\n    if (key !== prop) {\n      result[key] = obj[key]\n    }\n    return result\n  }, {})\n}\n","import { combineReducers } from 'redux'\nimport { getTracker } from 'cozy-ui/react/helpers/tracker'\nimport { getDocument, createDocument, fetchCollection } from '../reducer'\n\nexport const FETCH_SHARINGS = 'FETCH_SHARINGS'\nconst RECEIVE_SHARINGS_DATA = 'RECEIVE_SHARINGS_DATA'\nconst RECEIVE_FETCH_SHARINGS_ERROR = 'RECEIVE_FETCH_SHARINGS_ERROR'\nconst CREATE_SHARING = 'CREATE_SHARING'\nconst RECEIVE_NEW_SHARING = 'RECEIVE_NEW_SHARING'\nconst CREATE_SHARING_LINK = 'CREATE_SHARING_LINK'\nconst RECEIVE_NEW_SHARING_LINK = 'RECEIVE_NEW_SHARING_LINK'\nconst REVOKE_SHARING_LINK = 'REVOKE_SHARING_LINK'\nconst RECEIVE_SHARING_LINK_REVOKE = 'RECEIVE_SHARING_LINK_REVOKE'\nconst REVOKE_SHARING = 'REVOKE_SHARING'\nconst RECEIVE_SHARING_REVOKE = 'RECEIVE_SHARING_REVOKE'\nconst RECEIVE_ERROR = 'RECEIVE_ERROR'\n\nconst removeRecipient = (recipients, recipientId) => {\n  const idx = recipients.findIndex(r => r.recipient.id === recipientId)\n  return [...recipients.slice(0, idx), ...recipients.slice(idx + 1)]\n}\n\nconst documents = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS_DATA:\n      return action.response.sharings\n    case RECEIVE_NEW_SHARING:\n      return [...state, action.response]\n    case RECEIVE_SHARING_REVOKE: {\n      const idx = state.findIndex(\n        s => s.attributes.sharing_id === action.sharingId\n      )\n      if (idx === -1) return state\n      const sharing = state[idx]\n      const loneRecipient =\n        sharing.attributes.recipients === undefined || // for recipient-side revocation\n        sharing.attributes.recipients.length === 1\n      const newState = loneRecipient\n        ? { ...sharing, attributes: { ...sharing.attributes, revoked: true } }\n        : {\n            ...sharing,\n            attributes: {\n              ...sharing.attributes,\n              recipients: removeRecipient(\n                sharing.attributes.recipients,\n                action.recipientId\n              )\n            }\n          }\n      return [...state.slice(0, idx), newState, ...state.slice(idx + 1)]\n    }\n    default:\n      return state\n  }\n}\n\nconst doctypePermsetInitialState = {\n  fetchStatus: 'loading',\n  byMe: [],\n  byLink: [],\n  withMe: []\n}\n\nconst permissions = (state = {}, action) => {\n  let idx\n  switch (action.type) {\n    case FETCH_SHARINGS:\n      if (state[action.doctype]) {\n        return {\n          ...state,\n          [action.doctype]: { ...state[action.doctype], fetchStatus: 'loading' }\n        }\n      }\n      return { ...state, [action.doctype]: doctypePermsetInitialState }\n    case RECEIVE_SHARINGS_DATA:\n      return {\n        ...state,\n        [action.doctype]: {\n          fetchStatus: 'loaded',\n          ...action.response.permissions\n        }\n      }\n    case RECEIVE_FETCH_SHARINGS_ERROR:\n      return { ...state, [action.doctype]: { fetchStatus: 'error' } }\n    case RECEIVE_NEW_SHARING:\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byMe: [\n            ...state[action.doctype].byMe,\n            {\n              attributes: {\n                permissions: {\n                  rule0: { type: action.doctype, values: [action.id] }\n                },\n                source_id: action.response.attributes.sharing_id,\n                type: 'io.cozy.sharings'\n              }\n            }\n          ]\n        }\n      }\n    case RECEIVE_NEW_SHARING_LINK:\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byLink: [...state[action.doctype].byLink, action.response]\n        }\n      }\n    case REVOKE_SHARING_LINK:\n      idx = state[action.doctype].byLink.findIndex(\n        p => action.permission._id === p._id\n      )\n      if (idx === -1) return state\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byLink: [\n            ...state[action.doctype].byLink.slice(0, idx),\n            ...state[action.doctype].byLink.slice(idx + 1)\n          ]\n        }\n      }\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({ documents, permissions })\n\n// actions\nexport const fetchSharings = (doctype, id = null, options = {}) => ({\n  types: [FETCH_SHARINGS, RECEIVE_SHARINGS_DATA, RECEIVE_FETCH_SHARINGS_ERROR],\n  doctype,\n  id,\n  options,\n  promise: client => client.fetchSharings(doctype)\n})\n\nexport const share = (\n  document,\n  recipients,\n  sharingType,\n  sharingDesc\n) => async dispatch => {\n  const recipientIds = await Promise.all(\n    recipients.map(\n      recipient =>\n        recipient.id ||\n        dispatch(createContact(recipient)).then(c => c.data[0].id)\n    )\n  )\n  trackSharingByEmail(document)\n  return dispatch(\n    createSharing(document, recipientIds, sharingType, sharingDesc)\n  )\n}\n\nexport const unshare = (document, recipient) => async (dispatch, getState) => {\n  const sharing = getSharingForRecipient(getState(), document, recipient)\n  const loneRecipient = sharing.attributes.recipients.length === 1\n  return dispatch({\n    types: [REVOKE_SHARING, RECEIVE_SHARING_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    sharingId: sharing.attributes.sharing_id,\n    recipientId: recipient._id,\n    promise: client =>\n      loneRecipient\n        ? client.revokeSharing(sharing.attributes.sharing_id)\n        : client.revokeSharingForClient(\n            sharing.attributes.sharing_id,\n            sharing.attributes.recipients.find(\n              r => r.recipient.id === recipient._id\n            ).Client.client_id\n          )\n  })\n}\n\nexport const leave = document => async (dispatch, getState) => {\n  const sharings = getDocumentActiveSharings(\n    getState(),\n    document._type,\n    document._id\n  )\n  const sharing = sharings.find(s => s.attributes.owner === false)\n  return dispatch({\n    types: [REVOKE_SHARING, RECEIVE_SHARING_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    sharingId: sharing.attributes.sharing_id,\n    promise: client => client.revokeSharing(sharing.attributes.sharing_id)\n  })\n}\n\nexport const shareByLink = document => {\n  trackSharingByLink(document)\n  return createSharingLink(document)\n}\n\nexport const revokeLink = document => async (dispatch, getState) => {\n  const perm = getSharingLinkPermission(\n    getState(),\n    document._type,\n    document._id\n  )\n  return dispatch({\n    types: [REVOKE_SHARING_LINK, RECEIVE_SHARING_LINK_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    permission: perm,\n    promise: client => client.revokeSharingLink(perm)\n  })\n}\n\nconst createSharing = (\n  document,\n  contactIds,\n  sharingType = 'master-slave',\n  description = ''\n) => ({\n  types: [CREATE_SHARING, RECEIVE_NEW_SHARING, RECEIVE_ERROR],\n  doctype: document._type,\n  id: document._id,\n  promise: client =>\n    client.createSharing(\n      getPermissionsFor(document),\n      contactIds,\n      sharingType,\n      description\n    )\n})\n\nconst createSharingLink = document => ({\n  types: [CREATE_SHARING_LINK, RECEIVE_NEW_SHARING_LINK, RECEIVE_ERROR],\n  doctype: document._type,\n  id: document._id,\n  promise: client => client.createSharingLink(getPermissionsFor(document, true))\n})\n\n// TODO: this is a poor man's migration in order to normalize contacts\n// and should be removed after a few weeks in prod\n// Note for future-self: If you have no idea of what it means, please, erase this code.\n// Note for time-travelers: please travel a little more back in time in order to advise us\n// to get contacts right the first time\nexport const fetchContacts = () => {\n  const action = fetchCollection('contacts', 'io.cozy.contacts')\n  action.promise = async client => {\n    const response = await client.fetchCollection(\n      'contacts',\n      'io.cozy.contacts'\n    )\n    const data = await Promise.all(\n      response.data.map(contact => {\n        return typeof contact.email !== 'string'\n          ? contact\n          : client\n              .updateDocument({\n                ...contact,\n                email: [\n                  {\n                    address: contact.email,\n                    primary: true\n                  }\n                ]\n              })\n              .then(resp => resp.data[0])\n      })\n    )\n\n    return { ...response, data }\n  }\n  return action\n}\n\nconst createContact = ({ email }) =>\n  createDocument('io.cozy.contacts', {\n    email: [{ address: email, primary: true }]\n  })\n\nconst getPermissionsFor = (document, publicLink = false) => {\n  const { _id, _type } = document\n  const verbs = publicLink ? ['GET'] : ['ALL']\n  // TODO: this works for albums, but it needs to be generalized and integrated\n  // with cozy-client ; some sort of doctype \"schema\" will be needed here\n  return isFile(document)\n    ? {\n        files: {\n          type: 'io.cozy.files',\n          verbs,\n          values: [_id]\n        }\n      }\n    : {\n        collection: {\n          type: _type,\n          verbs,\n          values: [_id]\n        },\n        files: {\n          type: 'io.cozy.files',\n          verbs,\n          values: [`${_type}/${_id}`],\n          selector: 'referenced_by'\n        }\n      }\n}\n\n// selectors\nconst getSharing = (state, id) =>\n  state.cozy.sharings.documents.find(s => s.attributes.sharing_id === id)\nconst getContact = (state, id) => getDocument(state, 'io.cozy.contacts', id)\nconst getDoctypePermissions = (state, doctype) => {\n  if (state.cozy.sharings.permissions[doctype]) {\n    return state.cozy.sharings.permissions[doctype]\n  }\n  return doctypePermsetInitialState\n}\n\nconst getSharingLink = (state, doctype, id) => {\n  const perm = getSharingLinkPermission(state, doctype, id)\n  return perm\n    ? buildSharingLink(id, doctype, perm.attributes.codes.email)\n    : null\n}\n\nconst getSharingLinkPermission = (state, doctype, id) => {\n  const perms = getDoctypePermissions(state, doctype)\n  const type = isFile({ _type: doctype }) ? 'files' : 'collection'\n  return perms.byLink.find(\n    p => p.attributes.permissions[type].values.indexOf(id) !== -1\n  )\n}\n\nconst getSharingForRecipient = (state, document, recipient) => {\n  const sharings = getDocumentActiveSharings(\n    state,\n    document._type,\n    document._id\n  )\n  return sharings.find(s =>\n    s.attributes.recipients.find(r => r.recipient.id === recipient._id)\n  )\n}\n\nconst getDocumentActiveSharings = (state, doctype, id) => {\n  const perms = getDoctypePermissions(state, doctype)\n  return [\n    ...perms.byMe.filter(\n      perm => perm.attributes.permissions['rule0'].values.indexOf(id) !== -1\n    ),\n    ...perms.withMe.filter(\n      perm => perm.attributes.permissions['rule0'].values.indexOf(id) !== -1\n    )\n  ]\n    .map(p => getSharing(state, p.attributes.source_id))\n    .filter(s => !s.attributes.revoked)\n}\n\nexport const getSharings = (state, doctype) => {\n  const perms = getDoctypePermissions(state, doctype)\n  const type = doctype === 'io.cozy.files' ? 'files' : 'collection'\n  return {\n    byMe: perms.byMe.map(p => p.attributes.permissions['rule0'].values[0]),\n    withMe: perms.withMe.map(p => p.attributes.permissions['rule0'].values[0]),\n    byLink: perms.byLink.map(p => p.attributes.permissions[type].values[0])\n  }\n}\n\nexport const getSharingStatus = (state, doctype, id) => {\n  const sharings = getDocumentActiveSharings(state, doctype, id)\n  return {\n    shared: sharings.length !== 0,\n    owner:\n      sharings.length === 0 || sharings.some(s => s.attributes.owner === true),\n    sharingType: sharings.some(\n      s => s.attributes.sharing_type === 'master-master'\n    )\n      ? 'master-master'\n      : 'master-slave',\n    sharings\n  }\n}\n\nexport const getSharingDetails = (state, doctype, id) => {\n  const { shared, owner, sharingType, sharings } = getSharingStatus(\n    state,\n    doctype,\n    id\n  )\n  const sharingLink = getSharingLink(state, doctype, id)\n  return {\n    shared,\n    owner,\n    sharingType,\n    sharingLink,\n    sharer:\n      shared && !owner\n        ? { name: 'John Doe', url: sharings[0].attributes.sharer.url }\n        : null,\n    readOnly: !owner && sharingType === 'master-slave',\n    recipients: shared && owner ? getSharingRecipients(state, sharings) : [],\n    byMe: shared && owner === true,\n    withMe: shared && !owner,\n    byLink: !!sharingLink\n  }\n}\n\nconst getSharingRecipients = (state, sharings) =>\n  sharings\n    .filter(sharing => sharing.attributes.recipients)\n    .map(sharing =>\n      sharing.attributes.recipients.map(info => ({\n        contact: getContact(state, info.recipient.id),\n        status: info.status,\n        type: sharing.attributes.sharing_type\n      }))\n    )\n    .reduce((a, b) => a.concat(b), [])\n\nconst buildSharingLink = (id, doctype, sharecode) =>\n  `${window.location.origin}/public?sharecode=${sharecode}&id=${id}${\n    doctype === 'file' ? '&directdownload' : ''\n  }`\n\n// helpers\nconst isFile = ({ _type, type }) =>\n  _type === 'io.cozy.files' || type === 'directory' || type === 'file'\n\nconst track = (document, action) => {\n  const tracker = getTracker()\n  if (!tracker) {\n    return\n  }\n  tracker.push([\n    'trackEvent',\n    isFile(document) ? 'Drive' : 'Photos',\n    action,\n    `${action}${isFile(document) ? 'File' : 'Album'}`\n  ])\n}\nconst trackSharingByLink = document => track(document, 'shareByLink')\nconst trackSharingByEmail = document => track(document, 'shareByEmail')\n","import * as fromCozyClient from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.triggers'\n\nconst triggersCollectionKey = 'triggers'\n\n// CRUD action creators\n\nexport const fetchTriggers = () =>\n  fromCozyClient.fetchTriggers(triggersCollectionKey, 'konnector')\n\n// selectors\nexport const getKonnectorTriggers = (\n  state,\n  konnector,\n  existingAccountIds = []\n) => {\n  return (\n    (!!state.documents[DOCTYPE] &&\n      Object.values(state.documents[DOCTYPE]).filter(trigger => {\n        return (\n          trigger.worker === 'konnector' &&\n          trigger.message &&\n          trigger.message.konnector === konnector.slug &&\n          trigger.message.account &&\n          existingAccountIds.includes(trigger.message.account)\n        )\n      })) ||\n    []\n  )\n}\n\nexport const getTrigger = (state, id) =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  state.documents[DOCTYPE][id]\n","import DateFns from 'date-fns'\nconst DOCTYPE = 'io.cozy.jobs'\n\n// CRUD\n\nexport const fetchKonnectorJobs = () => {}\n\n// selectors\n\nexport const getTriggerLastJob = (state, trigger) => {\n  // state is state.cozy\n  if (!state.documents || !state.documents[DOCTYPE] || !trigger) return null\n  return Object.values(state.documents[DOCTYPE]).reduce(\n    (lastestJob, currentJob) => {\n      if (currentJob.trigger_id !== trigger._id) return lastestJob\n      if (!lastestJob) return currentJob\n      return DateFns.isAfter(currentJob.started_at, lastestJob.started_at)\n        ? currentJob\n        : lastestJob\n    },\n    null\n  )\n}\n\nexport const isJobRunning = (state, job) =>\n  !!job && ['queued', 'running'].includes(job.state)\n","const START_SYNC = 'START_SYNC'\nconst START_DOCTYPE_SYNC = 'START_DOCTYPE_SYNC'\nconst SYNC_DOCTYPE_OK = 'SYNC_DOCTYPE_OK'\nconst SYNC_DOCTYPE_ERROR = 'SYNC_DOCTYPE_ERROR'\n\nconst doctypeSyncInitialState = {\n  syncStatus: 'pending',\n  lastSync: null,\n  seqNumber: 0\n}\n\nconst doctypeSync = (state = doctypeSyncInitialState, action) => {\n  switch (action.type) {\n    case START_DOCTYPE_SYNC:\n      return {\n        ...state,\n        syncStatus: 'syncing',\n        seqNumber: action.seqNumber\n      }\n    case SYNC_DOCTYPE_OK:\n      return {\n        ...state,\n        syncStatus: 'done',\n        lastSync: Date.now()\n      }\n    case SYNC_DOCTYPE_ERROR:\n      return {\n        ...state,\n        syncStatus: 'error',\n        lastSync: Date.now()\n      }\n    default:\n      return state\n  }\n}\n\nconst synchronization = (state = {}, action) => {\n  switch (action.type) {\n    case START_DOCTYPE_SYNC:\n    case SYNC_DOCTYPE_OK:\n    case SYNC_DOCTYPE_ERROR:\n      return {\n        ...state,\n        [action.doctype]: doctypeSync(state[action.doctype], action)\n      }\n    default:\n      return state\n  }\n}\n\nexport default synchronization\n\nexport const startSync = () => async dispatch => {\n  return dispatch({\n    type: START_SYNC,\n    promise: client => client.startSync(dispatch)\n  })\n}\n\nexport const startDoctypeSync = (doctype, seqNumber = 0) => ({\n  type: START_DOCTYPE_SYNC,\n  doctype,\n  seqNumber\n})\n\nexport const syncDoctypeOk = (doctype, infos) => ({\n  type: SYNC_DOCTYPE_OK,\n  doctype,\n  infos\n})\n\nexport const syncDoctypeError = (doctype, error) => ({\n  type: SYNC_DOCTYPE_ERROR,\n  doctype,\n  error\n})\n\nexport const isFirstSync = state => {\n  const seqNumbers = Object.keys(state.cozy.synchronization).map(\n    doctype => state.cozy.synchronization[doctype].seqNumber\n  )\n  return seqNumbers.every(number => number === 0)\n}\n\nexport const isSynced = state => {\n  const timestamps = Object.keys(state.cozy.synchronization).map(\n    doctype => state.cozy.synchronization[doctype].lastSync\n  )\n  return timestamps.every(ts => ts !== null)\n}\n","/* global cozy */\n\nimport React from 'react'\n\nimport AppLinker from 'cozy-ui/react/AppLinker'\nimport Icon from 'cozy-ui/react/Icon'\nimport { translate } from 'cozy-ui/react/I18n'\nimport styles from 'styles/konnectorSuccess.styl'\n\nconst BanksLink = translate()(\n  ({ banksUrl, t }) =>\n    banksUrl ? (\n      <AppLinker slug=\"banks\" href={banksUrl}>\n        {({ href, onClick, name }) => (\n          <a\n            className={styles['col-account-success-link']}\n            href={href}\n            target=\"_top\"\n            onClick={onClick}\n          >\n            <Icon className=\"u-mr-half\" icon=\"openwith\" />\n            {t('account.success.banksLinkText', {\n              appName: name\n            })}\n          </a>\n        )}\n      </AppLinker>\n    ) : (\n      <a\n        className={styles['col-account-success-link']}\n        onClick={() =>\n          cozy.client.intents.redirect(\n            'io.cozy.apps',\n            { slug: 'banks' },\n            url => {\n              window.top.location.href = url\n            }\n          )\n        }\n      >\n        <Icon className=\"u-mr-half\" icon=\"openwith\" />\n        {t('account.success.banksLinkText')}\n      </a>\n    )\n)\n\nexport default BanksLink\n","import * as fromCozyClient from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.konnectors'\nconst konnectorsCollectionKey = 'konnectors'\n\n// CRUD\n\nexport const fetchKonnectors = () =>\n  fromCozyClient.fetchKonnectors(konnectorsCollectionKey)\n\n// Action creators\nexport const receiveInstalledKonnector = konnector => {\n  const normalized = {\n    ...konnector,\n    ...konnector.attributes,\n    id: `${DOCTYPE}/${konnector.slug}`,\n    _type: DOCTYPE\n  }\n\n  return {\n    doctype: DOCTYPE,\n    type: 'RECEIVE_NEW_DOCUMENT',\n    response: { data: [normalized] },\n    updateCollections: ['konnectors']\n  }\n}\n\n// Selectors\nexport const getKonnector = (state, slug) => {\n  return (\n    !!state.documents &&\n    !!state.documents[DOCTYPE] &&\n    state.documents[DOCTYPE][`${DOCTYPE}/${slug}`]\n  )\n}\n\nexport const getInstalledKonnectors = state =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.values(state.documents[DOCTYPE])\n\nexport const getIndexedKonnectors = state =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.keys(state.documents[DOCTYPE]).reduce((indexed, key) => {\n    const konnector = state.documents[DOCTYPE][key]\n    indexed[konnector.slug] = konnector\n    return indexed\n  }, {})\n\nexport const getSlugs = state =>\n  !!state &&\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.values(state.documents[DOCTYPE]).map(konnector => konnector.slug)\n","module.exports = \"/img/connecting-data-in-progress.svg\";","const cozyMiddleware = client => ({ dispatch }) => {\n  return next => action => {\n    const { promise, type, types, ...rest } = action\n    if (!promise) {\n      return next(action)\n    }\n\n    if (!type && !types) {\n      return promise(client).then(action => dispatch(action))\n    }\n\n    if (type) {\n      return promise(client).then(response => {\n        next({ ...rest, response, type })\n        return response\n      })\n    }\n\n    const [REQUEST, SUCCESS, FAILURE] = types\n    next({ ...rest, type: REQUEST })\n\n    return promise(client)\n      .then(\n        response => {\n          next({ ...rest, response, type: SUCCESS })\n          return response\n        },\n        error => {\n          console.log(error) // eslint-disable-line no-console\n          next({ ...rest, error, type: FAILURE })\n        }\n      )\n      .catch(error => {\n        console.error('MIDDLEWARE ERROR:', error) // eslint-disable-line no-console\n        next({ ...rest, error, type: FAILURE })\n      })\n  }\n}\n\nexport default cozyMiddleware\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport KonnectorInstall from 'components/KonnectorInstall'\nimport KonnectorMaintenance from 'components/KonnectorMaintenance'\nimport UpdateMessage from 'components/Banners/UpdateMessage'\nimport {\n  enqueueConnection,\n  getConnectionError,\n  isConnectionConnected,\n  isConnectionEnqueued\n} from 'ducks/connections'\nimport { isKonnectorUpdateNeededError } from 'lib/konnectors'\nimport styles from 'styles/accountConnection.styl'\n\nclass AccountConnection extends Component {\n  constructor(props, context) {\n    super(props, context)\n    this.store = context.store\n\n    this.state = {\n      isFetching: false,\n      maintenance: props.maintenance && props.maintenance[props.konnector.slug]\n    }\n\n    this.handleLoginSuccess = this.handleLoginSuccess.bind(this)\n    this.handleError = this.handleError.bind(this)\n    this.handleDeleteSuccess = this.handleDeleteSuccess.bind(this)\n  }\n\n  componentDidMount() {\n    if (this.props.error) this.handleError({ message: this.props.error })\n  }\n\n  componentDidUpdate(prevProps) {\n    const { success, queued } = this.props\n    const { connectionError } = this.state\n\n    const succeed = !prevProps.success && success\n    const loginSucceed = !prevProps.queued && queued\n\n    if (succeed || loginSucceed) {\n      // we reset the error in case of persisted errors\n      if (succeed && connectionError) this.setState({ connectionError: null })\n      this.props.handleConnectionSuccess()\n    }\n  }\n\n  handleLoginSuccess(trigger) {\n    const { enqueueConnection, handleConnectionSuccess } = this.props\n    handleConnectionSuccess()\n    enqueueConnection(trigger)\n  }\n\n  handleDeleteSuccess() {\n    this.setState({\n      submitting: false\n    })\n\n    this.props.handleDeleteSuccess()\n  }\n\n  handleError(error) {\n    // eslint-disable-next-line no-console\n    console.error(error)\n\n    this.setState({\n      submitting: false,\n      connectionError: error.message\n    })\n  }\n\n  buildSuccessMessages(konnector) {\n    const { t } = this.props\n    const messages = [\n      t('account.message.success.connect', {\n        name: konnector.name\n      })\n    ]\n\n    if (\n      konnector.additionnalSuccessMessage &&\n      konnector.additionnalSuccessMessage.message\n    ) {\n      messages.push(t(konnector.additionnalSuccessMessage.message))\n    }\n\n    return messages\n  }\n\n  render() {\n    const {\n      createdAccount,\n      handleConnectionSuccess,\n      konnector,\n      error,\n      onCancel,\n      onDone,\n      queued,\n      t,\n      lang,\n      success,\n      successButtonLabel\n    } = this.props\n    const { connectionError, oAuthError, maintenance } = this.state\n    const successMessages =\n      success || queued ? this.buildSuccessMessages(konnector) : []\n    const konnectorError = error || oAuthError || connectionError\n    return (\n      <div className={styles['col-account-connection']}>\n        {!!konnector.available_version && (\n          <UpdateMessage\n            konnector={konnector}\n            error={konnectorError}\n            isBlocking={isKonnectorUpdateNeededError(konnectorError)}\n          />\n        )}\n        {maintenance ? (\n          <KonnectorMaintenance\n            maintenance={maintenance}\n            lang={lang}\n            konnectorName={konnector.name}\n          />\n        ) : (\n          <KonnectorInstall\n            account={createdAccount}\n            connector={konnector}\n            onCancel={onCancel}\n            onDone={onDone}\n            onLoginSuccess={this.handleLoginSuccess}\n            onSuccess={handleConnectionSuccess}\n            legacySuccess={success || queued}\n            successMessage={t('account.success.title.connect')}\n            successButtonLabel={successButtonLabel}\n            successMessages={successMessages}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nAccountConnection.contextTypes = {\n  store: PropTypes.object\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  success: isConnectionConnected(state.connections, ownProps.trigger),\n  error: getConnectionError(state.connections, ownProps.trigger),\n  queued: isConnectionEnqueued(state.connections, ownProps.trigger)\n})\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    enqueueConnection: trigger => dispatch(enqueueConnection(trigger))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(translate()(AccountConnection)))\n","var map = {\n\t\"./en\": \"Us+F\",\n\t\"./en/\": \"Us+F\",\n\t\"./en/build_distance_in_words_locale\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/index\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/index.js\": \"LZbM\",\n\t\"./en/build_format_locale\": \"6DAA\",\n\t\"./en/build_format_locale/\": \"6DAA\",\n\t\"./en/build_format_locale/index\": \"6DAA\",\n\t\"./en/build_format_locale/index.js\": \"6DAA\",\n\t\"./en/index\": \"Us+F\",\n\t\"./en/index.d.ts\": \"DYsx\",\n\t\"./en/index.js\": \"Us+F\",\n\t\"./en/package\": \"EJIZ\",\n\t\"./en/package.json\": \"EJIZ\",\n\t\"./es\": \"/S0t\",\n\t\"./es/\": \"/S0t\",\n\t\"./es/build_distance_in_words_locale\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/index\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/index.js\": \"GEfZ\",\n\t\"./es/build_format_locale\": \"O+zC\",\n\t\"./es/build_format_locale/\": \"O+zC\",\n\t\"./es/build_format_locale/index\": \"O+zC\",\n\t\"./es/build_format_locale/index.js\": \"O+zC\",\n\t\"./es/index\": \"/S0t\",\n\t\"./es/index.d.ts\": \"gbHe\",\n\t\"./es/index.js\": \"/S0t\",\n\t\"./es/package\": \"Vizl\",\n\t\"./es/package.json\": \"Vizl\",\n\t\"./fr\": \"LKA2\",\n\t\"./fr/\": \"LKA2\",\n\t\"./fr/build_distance_in_words_locale\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/index\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/index.js\": \"IzMR\",\n\t\"./fr/build_format_locale\": \"I3Zg\",\n\t\"./fr/build_format_locale/\": \"I3Zg\",\n\t\"./fr/build_format_locale/index\": \"I3Zg\",\n\t\"./fr/build_format_locale/index.js\": \"I3Zg\",\n\t\"./fr/index\": \"LKA2\",\n\t\"./fr/index.d.ts\": \"hE7Q\",\n\t\"./fr/index.js\": \"LKA2\",\n\t\"./fr/package\": \"herc\",\n\t\"./fr/package.json\": \"herc\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"yMTE\";","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport CreateAccountService from 'components/services/CreateAccountService'\nimport KonnectorHeaderIcon from 'components/KonnectorHeaderIcon'\n\nclass CreateAccountIntent extends Component {\n  constructor(props, context) {\n    super(props, context)\n    this.store = context.store\n    this.state = { isSuccess: false }\n    this.store.fetchUrls()\n  }\n\n  handleConnectionSuccess = () => {\n    this.setState({ isSuccess: true })\n  }\n\n  render() {\n    const { konnector, onCancel, onTerminate } = this.props\n    const { isSuccess } = this.state\n    return (\n      <div className=\"col-create-account-intent\">\n        {!isSuccess && <KonnectorHeaderIcon konnector={konnector} center />}\n        {konnector && (\n          <CreateAccountService\n            konnector={konnector}\n            onCancel={() => onCancel()}\n            onSuccess={onTerminate}\n            handleConnectionSuccess={this.handleConnectionSuccess}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nCreateAccountIntent.contextTypes = {\n  store: PropTypes.object\n}\n\nexport default CreateAccountIntent\n"],"sourceRoot":""}