{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/redux-cozy-client/DataAccessFacade.js","webpack:///./src/components/CandidateServiceTile.jsx","webpack:///./src/styles/index.styl","webpack:///./src/ducks/apps/index.js","webpack:///crypto (ignored)","webpack:///./src/components/Services.jsx","webpack:///crypto (ignored)?e004","webpack:///./src/components/Failure.jsx","webpack:///./src/lib/redux-cozy-client/adapters/CozyStackAdapter.js","webpack:///util (ignored)","webpack:///./src/ducks/accounts/index.js","webpack:///util (ignored)?55f0","webpack:///./src/components/ReactMarkdownWrapper.jsx","webpack:///./src/ducks/connections/index.js","webpack:///zlib (ignored)","webpack:///./src/components/EmptyServicesListTip.jsx","webpack:///fs (ignored)","webpack:///http (ignored)","webpack:///https (ignored)","webpack:///./src/lib/konnectors.js","webpack:///./src/assets/images/drawing-arrow-up.svg","webpack:///./src/components/AddServiceTile.jsx","webpack:///./src/lib/redux-cozy-client/authentication/mobile.js","webpack:///./src/lib/redux-cozy-client/CozyProvider.jsx","webpack:///./src/components/AppIcon.jsx","webpack:///./src/components/CandidateCategoryTile.jsx","webpack:///./src/components/HeroHeader/CornerButton.jsx","webpack:///./src/components/KonnectorTile.jsx","webpack:///./src/ducks/connections/components/queue/styles.styl","webpack:///./src/lib/redux-cozy-client/reducer.js","webpack:///./src/lib/redux-cozy-client/helpers.js","webpack:///./src/components/HeroHeader/SettingsButton.jsx","webpack:///./src/components/AppTile.jsx","webpack:///./src/components/FallbackCandidateServiceTile.jsx","webpack:///./src/locales sync \\/(en|fr|es)","webpack:///./src/lib/CollectStore.js","webpack:///./src/targets/browser/index.jsx","webpack:///./src/styles/placeholder.styl","webpack:///./src/components/KonnectorErrors.jsx","webpack:///./src/lib/redux-cozy-client/CozyClient.js","webpack:///./src/hooks/useHomeShortcuts.js","webpack:///./src/components/HeroHeader/HelpButton.jsx","webpack:///./src/components/Home.jsx","webpack:///./src/lib/middlewares/konnectorsI18n.js","webpack:///./src/lib/triggers.js","webpack:///./src/lib/redux-cozy-client/connect.jsx","webpack:///./src/components/ScrollToTopOnMount.jsx","webpack:///./src/components/HeroHeader/LogoutButton.jsx","webpack:///./src/hooks/withAppsInMaintenance.jsx","webpack:///./src/components/LogoutTile.jsx","webpack:///./src/containers/App.jsx","webpack:///./src/store/configureStore.js","webpack:///./src/reducers/index.js","webpack:///./src/components/IntentRedirect.jsx","webpack:///./src/hooks/useRegistryInformation.jsx","webpack:///./src/components/LoadingPlaceholder.jsx","webpack:///./src/hooks/useCustomWallpaper.jsx","webpack:///./src/components/ShortcutTile.jsx","webpack:///./src/components/HeroHeader/index.jsx","webpack:///./node_modules/moment/locale sync \\/(en|fr|es)","webpack:///./src/lib/redux-cozy-client/adapters/PouchdbAdapter.js","webpack:///./node_modules/cozy-harvest-lib/dist/locales sync ^\\.\\/.*\\.json$","webpack:///./src/lib/redux-cozy-client/index.js","webpack:///./src/components/appEntryPoint.jsx","webpack:///./src/components/StoreRedirection.jsx","webpack:///./src/components/FooterLogo.jsx","webpack:///./src/flags.js","webpack:///./src/lib/redux-cozy-client/utils.js","webpack:///./src/lib/redux-cozy-client/slices/sharings.js","webpack:///./src/hooks/useInstanceSettings.jsx","webpack:///./src/ducks/triggers/index.js","webpack:///./src/ducks/connections/components/queue/index.jsx","webpack:///./src/ducks/jobs/index.js","webpack:///./src/lib/redux-cozy-client/slices/synchronization.js","webpack:///./src/components/Konnector.jsx","webpack:///./src/ducks/konnectors/index.js","webpack:///./src/assets/icons/color/default.svg","webpack:///./src/lib/redux-cozy-client/middleware.js","webpack:///./node_modules/date-fns/locale sync \\/(en|fr|es)","webpack:///./src/lib/PiwikHashRouter.js","webpack:///./src/ducks/connections/components/queue/queue.jsx","webpack:///./src/assets/images/timeline.png","webpack:///./src/components/Applications.jsx"],"names":["DataAccessFacade","constructor","stackAdapter","CozyStackAdapter","PouchDB","pouchAdapter","PouchdbAdapter","strategy","PouchFirstStrategy","StackOnlyStrategy","setup","cozyUrl","options","config","cozyURL","cozy","client","init","offline","registerDoctypes","doctypes","getAdapter","doctype","startSync","dispatch","sync","SYNC_BIDIRECTIONAL","startReplicationTo","SYNC_TO","startReplicationFrom","SYNC_FROM","getDatabase","undefined","CandidateServiceTile","t","konnector","slug","registryData","useRegistryInformation","name","get","useState","isModalDisplayed","setModalDisplayed","Alerter","success","propTypes","PropTypes","func","isRequired","object","shape","string","translate","withClient","RECEIVE_APPS","reducer","state","action","type","apps","receiveApps","getApp","find","app","Services","installedKonnectors","suggestedKonnectorsQuery","appsInMaintenance","useAppsInMaintenance","appsInMaintenanceBySlug","keyBy","candidatesSlugBlacklist","map","concat","suggestedKonnectors","data","filter","includes","fallbackKonnectorSuggestions","candidatesConfig","konnectors","categorySuggestions","Object","entries","categories","hasZeroInstalledKonnectors","length","displayFallbackSuggestions","displayTutorialTip","index","has","suggestion","candidate","category","slugs","arrayOf","array","query","where","silenced","sortBy","indexFields","mapStateToProps","getInstalledKonnectors","toLowerCase","flow","connect","queryConnect","reload","window","location","Failure","errorType","EmptyIcon","FILES_DOCTYPE","FETCH_LIMIT","SHARED_BY_LINK","SHARED_WITH_ME","SHARED_WITH_OTHERS","fetchApps","skip","meta","fetchJSON","processJSONAPI","next","count","fetchDocuments","resp","rows","row","doc","hasOwnProperty","docs","assign","id","_type","total_rows","offset","error","message","match","queryDocuments","fields","sort","f","queryOptions","limit","wholeResponse","response","files","_id","attributes","fetchDocument","normalized","createDocument","created","create","createTrigger","launchTrigger","job","updateDocument","updated","updateAttributes","_rev","deleteDocument","delete","deleteTrigger","createIndex","defineIndex","fetchFileByPath","path","file","statByPath","normalizeFile","err","createFile","dirID","trashFile","trashById","fetchReferencedFiles","included","fetchKonnectors","fetchTriggers","worker","trigger","addReferencedFiles","ids","removeReferencedFiles","fetchSharingPermissions","fetchPermissions","sharingType","byMe","byLink","withMe","fetchSharing","createSharing","permissions","contactIds","description","desc","recipients","contactId","recipient","sharing_type","revokeSharing","sharingId","revokeSharingForClient","clientId","createSharingLink","revokeSharingLink","permission","DOCTYPE","accountCollectionKey","fetchAccounts","fetchCollection","getAccount","documents","getIds","keys","reactMarkdownRendererOptions","Link","props","href","children","ReactMarkdownWrapper","source","ACCOUNT_DOCTYPE","TRIGGERS_DOCTYPE","JOBS_DOCTYPE","ENQUEUE_CONNECTION","LAUNCH_TRIGGER","PURGE_QUEUE","RECEIVE_DATA","RECEIVE_NEW_DOCUMENT","RECEIVE_DELETED_DOCUMENT","UPDATE_CONNECTION_RUNNING_STATUS","UPDATE_CONNECTION_ERROR","START_CONNECTION_CREATION","END_CONNECTION_CREATION","getTriggerKonnectorSlug","isKonnectorTrigger","isKonnectorJob","Error","konnectorReducer","reduce","newState","isTrigger","isJob","konnectorSlug","triggerId","trigger_id","account","currentStatus","current_state","status","last_error","buildKonnectorError","lastSyncDate","last_execution","queued_at","existingTriggers","rawTriggers","push","triggers","hasError","isRunning","isConnected","creation","isAccount","combineReducers","triggersReducer","isEnqueued","omit","enqueueConnection","purgeQueue","updateConnectionError","startConnectionCreation","endConnectionCreation","getConnectionsByKonnector","validAccounts","validKonnectors","konnectorIsValid","konnectorHasConnections","values","getFirstError","firstTriggerHavingError","getFirstUserError","firstTriggerHavingUserError","isKonnectorUserError","getLastSyncDate","lastExecutions","dateA","dateB","momentA","moment","utc","momentB","isAfter","isBefore","getTriggerQueueStatus","getQueue","queuedConnections","queuedTriggers","label","getConnectionError","getTriggerState","getCreatedAccount","getTriggerIdByKonnectorAndAccount","getTriggerLastSuccess","lastJob","getTriggerLastJob","lastJobIsSuccess","started_at","last_success","isCreatingConnection","isConnectionConnected","isConnectionEnqueued","isConnectionRunning","EmptyServicesListTip","ArrowIllustration","ERROR_TYPES","CHALLENGE_ASKED","LOGIN_FAILED","MAINTENANCE","NOT_EXISTING_DIRECTORY","USER_ACTION_NEEDED","VENDOR_DOWN","DISK_QUOTA_EXCEEDED","UPDATE_NEEDED_ERRORS_TYPES","TERMS_VERSION_MISMATCH","TWO_FA_ERRORS","patchFolderPermission","folderId","saveFolder","encodeURIComponent","addFolderPermission","isKonnectorLoginError","isKonnectorTwoFAError","code","isKonnectorKnownError","isKonnectorUpdateNeededError","split","checkLocale","key","hasPendingUpdate","available_version","getMostAccurateErrorKey","getKey","errorSegments","tested","fullKey","join","slice","legacyMessages","terms","getKonnectorMessage","messages","hasDescriptions","providesMessage","providesLegacyMessage","AddServiceTile","nativePath","URL","getStackClient","uri","getInstanceOptions","subDomainType","cozySubdomainType","generateWebLink","origin","onClick","palette","hasCordovaPlugin","cordova","InAppBrowser","REGISTRATION_ABORT","authenticateWithCordova","url","Promise","resolve","reject","target","inAppBrowser","open","removeListener","removeEventListener","onLoadStart","onExit","accessCode","test","close","addEventListener","setTimeout","token","prompt","CozyProvider","domain","secure","store","context","Component","bool","subscribe","getState","element","AppIcon","otherProps","host","protocol","CandidateCategoryTile","CornerButton","useBreakpoints","isMobile","ButtonComp","ButtonLink","Button","getKonnectorError","lang","konnError","KonnectorJobError","getErrorLocaleBound","STATUS","OK","UPDATE","ERROR","NO_ACCOUNT","getKonnectorStatus","isInMaintenance","userError","accountsCount","KonnectorTile","route","statusThemes","className","icon","color","coolGrey","pomegranate","hideKonnectorErrors","flag","statusClassName","classNames","number","connections","getKonnectorTriggersCount","withRouter","APPS_DOCTYPE","FETCH_DOCUMENT","FETCH_COLLECTION","RECEIVE_ERROR","CREATE_DOCUMENT","UPDATE_DOCUMENT","DELETE_DOCUMENT","RECEIVE_APP","RECEIVE_UPDATED_DOCUMENT","FETCH_REFERENCED_FILES","ADD_REFERENCED_FILES","REMOVE_REFERENCED_FILES","objectifyDocumentsArray","dataDoctype","getArrayDoctype","deleted","removeObjectProperty","updateFilesReferences","document","removeFilesReferences","obj","updateFileReference","relationships","referenced_by","newlyReferencedIds","removeFileReferences","rel","removedIds","getDoctype","collectionInitialState","fetchStatus","lastFetch","hasMore","collection","Date","now","indexOf","collections","applyUpdate","updateAction","updateCollections","sharings","synchronization","types","promise","actionOptions","makeActionCreator","makeFetchMoreAction","applySelectorForAction","getCollection","getDocument","FETCH_SHARINGS","getSharingDetails","getSharings","enhancePropsForActions","fetchActions","mapValues","propName","dataObject","fetchMore","mapDocumentsToIds","isCollectionFetched","slugify","text","toString","replace","forceFileDownload","filename","createElement","setAttribute","style","display","body","appendChild","click","removeChild","downloadArchive","notSecureFilename","fileIds","getArchiveLinkByIds","fullpath","downloadFile","downloadById","blob","createObjectURL","applications","models","SettingsButton","settingsAppQuery","useI18n","appHref","displayName","getAppDisplayName","Q","olderThan30s","fetchPolicies","olderThan","fetchPolicy","as","AppTile","links","related","FallbackCandidateServiceTile","CONNECTION_STATUS","ERRORED","RUNNING","CONNECTED","ACCOUNTS_DOCTYPE","normalize","dbObject","CollectStore","listener","require","updateUnfinishedJob","bind","onAccountCreated","onAccountUpdated","onAccountDeleted","onTriggerCreated","onTriggerDeleted","initializeRealtime","realtime","CozyRealtime","onTriggerUpdated","normalizedJob","isDeletedAccountHookJob","account_deleted","isKonnectorJobWithoutTrigger","createIntentService","intent","intents","createService","fetchUrls","then","forEach","item","banksUrl","catch","console","warn","documentElement","getAttribute","handleOAuthResponse","root","querySelector","dataset","legacyClient","CozyClient","cozyDomain","cozyToken","cozyClient","MostRecentCozyClient","schema","Application","accounts","master","jobs","registerPlugin","plugin","configureStore","collectConfig","dictRequire","App","default","render","__DEVELOPMENT__","triggersModel","triggerStatesModel","triggerStates","accountsModel","muteTrigger","accountsById","accountId","getAccountId","initialAccount","getLastErrorType","muteError","save","getKonnectorSlug","KonnectorErrors","triggersInError","accountsWithErrors","history","breakpoints","accountsWithErrorsById","installedKonnectorsBySlug","nonMutedTriggerErrors","getKonnector","hasInstalledKonnector","some","homeConfig","displayedErrorTypes","isLatestErrorMuted","konnectorAccount","errorTitle","errorDescription","getTriggersInError","getAccountsWithErrors","withBreakpoints","KONNECTORS_DOCTYPE","SHARINGS_DOCTYPE","indexes","specialDirectories","facade","register","oauth","onRegistered","authorize","isRegistered","clientInfos","auth","getClient","selector","getCollectionIndex","fetchFile","fetchSharings","sharingIds","p","source_id","all","ensureDirectoryExists","dir","createDirectoryByPath","checkUniquenessOf","property","value","getUniqueIndex","existingDocs","getIndexFields","i","arr","useHomeShortcuts","useClient","setFiles","useEffect","load","folder","dir_id","class","HelpButton","Home","wrapper","Konnector","extendI18nWithKonnector","langs","locales","hasLangs","providesLang","actualLang","localeKeys","providesLocales","extendI18n","konnectorsI18nMiddleware","fetch","mapDocumentsToProps","mapActionsToProps","WrappedComponent","Wrapper","makeMapStateToProps","initialState","initialOwnProps","initialProps","isAction","filterValues","prop","reduxConnect","ScrollToTopOnMount","scrollTo","LogoutButton","logout","useCallback","setAppsInMaintenance","registry","Registry","fetchData","fetchAppsInMaintenance","newAppsInMaintenance","LogoutTile","IDLE","FETCHING_CONTEXT","minilog","toFlagNames","flagName","prefix","isArray","flatten","isObjectLike","fetchContext","setState","features","flags","enableFlags","isFetching","isFetchingContext","isReady","showTimeline","div","contentWrapper","IntentRedirect","StoreRedirection","DemoTimeline","contextTypes","appEntryPoint","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE","compose","reduxStore","createStore","getReducers","applyMiddleware","apply","cozyMiddleware","thunkMiddleware","createLogger","Boolean","fromKonnectors","fromConnections","fromAccounts","getConnectionsQueue","getCreatedConnectionAccount","fromTriggers","getTriggerByKonnectorAndAccount","getTriggersByKonnector","triggersInState","acc","isInError","accountsWithErrorsIds","queryString","search","substring","accumulator","keyValue","splitted","redirect","redirectRoute","appData","setAppData","fetchApp","LoadingPlaceholder","styles","useCustomWallpaper","wallpaperLink","setWallpaperLink","setFetchStatus","getDownloadLinkByPath","customWallpaperPath","ShortcutTile","useFetchShortcut","shortcutInfos","shortcurtIcon","substr","lastIndexOf","btoa","cornerButtons","isDisplayedByDefault","flagWithFallbackValue","fallback","HeroHeader","rootURL","cozyDefaultWallpaper","backgroundURL","useInstanceSettings","instanceSettings","publicName","backgroundImage","REPLICATION_INTERVAL","pouchdbFind","instances","getReplicationBaseUrl","credentials","basic","toBasicAuth","_url","getSeqNumber","info","result","update_seq","direction","baseUrl","seqNumber","startDoctypeSync","syncDoctype","replicationUrl","db","syncHandler","replicate","to","from","on","syncDoctypeOk","scheduleNextSync","refreshToken","newToken","saveCredentials","syncDoctypeError","allDocs","include_docs","k","revs_info","post","rev","safeDoc","put","remove","fetchKonnectorJobs","selectData","cozyConnect","params","fetchHomeLogos","logos","logoSrc","FooterLogo","logoAlt","React","transform","RECEIVE_SHARINGS_DATA","RECEIVE_FETCH_SHARINGS_ERROR","CREATE_SHARING","RECEIVE_NEW_SHARING","CREATE_SHARING_LINK","RECEIVE_NEW_SHARING_LINK","REVOKE_SHARING_LINK","RECEIVE_SHARING_LINK_REVOKE","REVOKE_SHARING","RECEIVE_SHARING_REVOKE","removeRecipient","recipientId","idx","findIndex","r","s","sharing_id","sharing","loneRecipient","revoked","doctypePermsetInitialState","rule0","share","sharingDesc","recipientIds","createContact","c","trackSharingByEmail","unshare","getSharingForRecipient","Client","client_id","leave","getDocumentActiveSharings","owner","shareByLink","trackSharingByLink","revokeLink","perm","getSharingLinkPermission","getPermissionsFor","fetchContacts","contact","email","address","primary","publicLink","verbs","isFile","getSharing","getContact","getDoctypePermissions","getSharingLink","buildSharingLink","codes","perms","getSharingStatus","shared","sharingLink","sharer","readOnly","getSharingRecipients","a","b","sharecode","track","tracker","getTracker","settings","setSettings","getById","triggersCollectionKey","fromCozyClient","getKonnectorTriggers","existingAccountIds","getTrigger","queue","visible","mapDispatchToProps","Queue","lastestJob","currentJob","DateFns","isJobRunning","START_SYNC","START_DOCTYPE_SYNC","SYNC_DOCTYPE_OK","SYNC_DOCTYPE_ERROR","doctypeSyncInitialState","syncStatus","lastSync","doctypeSync","infos","isFirstSync","seqNumbers","every","isSynced","timestamps","ts","konnectorWithtriggers","ownProps","konnectorsCollectionKey","receiveInstalledKonnector","getIndexedKonnectors","indexed","getSlugs","rest","REQUEST","SUCCESS","FAILURE","log","addPiwik","shouldEnableTracking","trackerInstance","connectToHistory","PiwikHashRouter","HashRouter","Pending","ProgressBar","progress","elapsedTime","progressInterval","setInterval","Math","atan","PI","clearInterval","width","progressBar","Item","isOngoing","statusIcon","collapsed","doneCount","connection","successCount","toggleCollapsed","done","total","LoadingAppTiles","memo","num","tiles","Applications","showLogout","shortcuts","filteredApps","shortcut"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,0CAA0C;QAC1C;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;;;;;ACpKA;AACA;CAOA;AACA;;AAEe,MAAMA,gBAAN,CAAuB;AACpCC,aAAW,GAAG;AACZ,SAAKC,YAAL,GAAoB,IAAIC,kEAAJ,EAApB;;AACA,QAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAClC,WAAKC,YAAL,GAAoB,IAAIC,gEAAJ,EAApB,CADkC,CAElC;;AACA,WAAKC,QAAL,GAAgB,IAAIC,kBAAJ,EAAhB;AACD,KAJD,MAIO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","file":"app/home.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \"/home.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([9,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/* global cozy, PouchDB */\nimport CozyStackAdapter from './adapters/CozyStackAdapter'\nimport PouchdbAdapter, {\n  SYNC_BIDIRECTIONAL,\n  SYNC_TO,\n  SYNC_FROM\n} from './adapters/PouchdbAdapter'\n\n// const isOnline = () =>\n//   typeof navigator !== 'undefined' ? navigator.onLine : true\n\nexport default class DataAccessFacade {\n  constructor() {\n    this.stackAdapter = new CozyStackAdapter()\n    if (typeof PouchDB !== 'undefined') {\n      this.pouchAdapter = new PouchdbAdapter()\n      // TODO: strategy injection\n      this.strategy = new PouchFirstStrategy()\n    } else {\n      this.strategy = new StackOnlyStrategy()\n    }\n  }\n\n  setup(cozyUrl, options) {\n    const config = { cozyURL: cozyUrl, ...options }\n    cozy.client.init(config) // TODO: For now we let cozy-client-js creates PouchDB instances\n    this.stackAdapter.init(config)\n    if (config.offline) {\n      this.pouchAdapter.registerDoctypes(config.offline.doctypes)\n    }\n  }\n\n  getAdapter(doctype) {\n    return this.strategy.getAdapter(\n      doctype,\n      this.stackAdapter,\n      this.pouchAdapter\n    )\n  }\n\n  startSync(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_BIDIRECTIONAL)\n  }\n\n  startReplicationTo(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_TO)\n  }\n\n  startReplicationFrom(dispatch) {\n    return this.pouchAdapter.sync(dispatch, SYNC_FROM)\n  }\n}\n\nclass PouchFirstStrategy {\n  getAdapter(doctype, stackAdapter, pouchAdapter) {\n    if (pouchAdapter.getDatabase(doctype) === undefined) {\n      return stackAdapter\n    }\n    return pouchAdapter\n  }\n}\n\nclass StackOnlyStrategy {\n  getAdapter(doctype, stackAdapter) {\n    return stackAdapter\n  }\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport get from 'lodash/get'\nimport { translate } from 'cozy-ui/react/I18n'\nimport Alerter from 'cozy-ui/react/Alerter'\nimport { withClient } from 'cozy-client'\nimport AppIcon from 'components/AppIcon'\nimport useRegistryInformation from 'hooks/useRegistryInformation'\nimport { KonnectorSuggestionModal } from 'cozy-harvest-lib'\n\nconst CandidateServiceTile = ({ t, client, konnector }) => {\n  const { slug } = konnector\n  const registryData = useRegistryInformation(client, slug)\n  const name = registryData\n    ? get(registryData, 'latest_version.manifest.name', slug)\n    : ''\n  const [isModalDisplayed, setModalDisplayed] = useState(false)\n\n  return (\n    <>\n      {isModalDisplayed && (\n        <KonnectorSuggestionModal\n          konnectorAppSuggestion={konnector}\n          konnectorManifest={get(registryData, 'latest_version.manifest', {})}\n          onClose={() => {\n            setModalDisplayed(false)\n          }}\n          onSilence={() => {\n            setModalDisplayed(false)\n            Alerter.success(t('connector.silenced', { name: name }))\n          }}\n        />\n      )}\n      <div className=\"item item--ghost\" onClick={() => setModalDisplayed(true)}>\n        <div className=\"item-icon\">\n          <AppIcon alt={t('app.logo.alt', { name })} app={slug} />\n        </div>\n        <span className=\"item-title\">{name}</span>\n      </div>\n    </>\n  )\n}\n\nCandidateServiceTile.propTypes = {\n  t: PropTypes.func.isRequired,\n  client: PropTypes.object.isRequired,\n  konnector: PropTypes.shape({\n    slug: PropTypes.string.isRequired\n  }).isRequired\n}\n\nexport default translate()(withClient(CandidateServiceTile))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"u-debug\":\"u-debug--339vn\",\"u-shake\":\"u-shake--R7aZx\",\"shake\":\"shake--ZcmO4\",\"u-o-100\":\"u-o-100--mPHO6\",\"u-o-90\":\"u-o-90--2kd9N\",\"u-o-80\":\"u-o-80--tJtcx\",\"u-o-70\":\"u-o-70--1J1Xb\",\"u-o-60\":\"u-o-60--1PJea\",\"u-o-50\":\"u-o-50--Es7HO\",\"u-o-40\":\"u-o-40--1jR-E\",\"u-o-30\":\"u-o-30--2NXXP\",\"u-o-20\":\"u-o-20--cVH7R\",\"u-o-10\":\"u-o-10--3tZZw\",\"u-o-05\":\"u-o-05--1Rdg-\",\"u-o-025\":\"u-o-025--SAP0E\",\"u-o-0\":\"u-o-0--3WE75\",\"spin\":\"spin--2iFLV\"};","const RECEIVE_APPS = 'RECEIVE_APPS'\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_APPS:\n      return action.apps || state\n    default:\n      return state\n  }\n}\n\nexport default reducer\n\n// Action creators\nexport const receiveApps = apps => ({\n  type: RECEIVE_APPS,\n  apps\n})\n\n// Selectors\nexport const getApp = (state = [], slug) => state.find(app => app.slug === slug)\n","/* (ignored) */","import React from 'react'\nimport PropTypes from 'prop-types'\nimport sortBy from 'lodash/sortBy'\nimport { connect } from 'react-redux'\nimport { withClient } from 'cozy-client'\nimport { queryConnect } from 'cozy-client'\nimport { translate } from 'cozy-ui/react/I18n'\nimport keyBy from 'lodash/keyBy'\nimport has from 'lodash/has'\nimport flow from 'lodash/flow'\n\nimport AddServiceTile from 'components/AddServiceTile'\nimport KonnectorTile from 'components/KonnectorTile'\nimport CandidateCategoryTile from 'components/CandidateCategoryTile'\nimport CandidateServiceTile from 'components/CandidateServiceTile'\nimport FallbackCandidateServiceTile from 'components/FallbackCandidateServiceTile'\nimport EmptyServicesListTip from 'components/EmptyServicesListTip'\nimport { getInstalledKonnectors } from 'reducers/index'\nimport useAppsInMaintenance from 'hooks/withAppsInMaintenance'\nimport candidatesConfig from 'config/candidates'\n\nexport const Services = ({\n  t,\n  installedKonnectors,\n  suggestedKonnectorsQuery,\n  client\n}) => {\n  const appsInMaintenance = useAppsInMaintenance(client)\n  const appsInMaintenanceBySlug = keyBy(appsInMaintenance, 'slug')\n\n  const candidatesSlugBlacklist = appsInMaintenance\n    .map(({ slug }) => slug)\n    .concat(installedKonnectors.map(({ slug }) => slug))\n\n  const suggestedKonnectors = suggestedKonnectorsQuery.data.filter(\n    ({ slug }) => !candidatesSlugBlacklist.includes(slug)\n  )\n  const fallbackKonnectorSuggestions = candidatesConfig.konnectors.filter(\n    ({ slug }) => !candidatesSlugBlacklist.includes(slug)\n  )\n  const categorySuggestions = Object.entries(candidatesConfig.categories)\n\n  const hasZeroInstalledKonnectors = !installedKonnectors.length\n  const displayFallbackSuggestions =\n    hasZeroInstalledKonnectors && suggestedKonnectors.length === 0\n  const displayTutorialTip =\n    hasZeroInstalledKonnectors &&\n    (suggestedKonnectors.length >= 1 ||\n      fallbackKonnectorSuggestions.length >= 1)\n\n  return (\n    <>\n      <div className={'services-list'}>\n        {installedKonnectors.map((konnector, index) => (\n          <KonnectorTile\n            key={index}\n            konnector={konnector}\n            route={`connected/${konnector.slug}`}\n            isInMaintenance={has(appsInMaintenanceBySlug, konnector.slug)}\n          />\n        ))}\n        {suggestedKonnectors.map(suggestion => (\n          <CandidateServiceTile key={suggestion.slug} konnector={suggestion} />\n        ))}\n        {displayFallbackSuggestions &&\n          fallbackKonnectorSuggestions.map(candidate => (\n            <FallbackCandidateServiceTile\n              key={candidate.slug}\n              slug={candidate.slug}\n            />\n          ))}\n        {hasZeroInstalledKonnectors &&\n          categorySuggestions.map(([category, slugs]) => (\n            <CandidateCategoryTile\n              key={category}\n              slugs={slugs}\n              category={category}\n            />\n          ))}\n        {<AddServiceTile label={t('add_service')} />}\n      </div>\n      {displayTutorialTip && <EmptyServicesListTip />}\n    </>\n  )\n}\n\nServices.propTypes = {\n  t: PropTypes.func.isRequired,\n  installedKonnectors: PropTypes.arrayOf(\n    PropTypes.shape({ slug: PropTypes.string })\n  ).isRequired,\n  suggestedKonnectorsQuery: PropTypes.shape({\n    data: PropTypes.array.isRequired\n  }).isRequired,\n  client: PropTypes.object.isRequired\n}\n\nconst query = client =>\n  client\n    .find('io.cozy.apps.suggestions')\n    .where({ silenced: false })\n    .sortBy([{ silenced: 'asc' }, { slug: 'asc' }])\n    .indexFields(['silenced', 'slug'])\n\nconst mapStateToProps = state => {\n  return {\n    installedKonnectors: sortBy(getInstalledKonnectors(state), konnector =>\n      konnector.name.toLowerCase()\n    )\n  }\n}\n\nexport default flow(\n  connect(mapStateToProps),\n  translate(),\n  queryConnect({ suggestedKonnectorsQuery: { query } }),\n  withClient\n)(Services)\n","/* (ignored) */","import React from 'react'\n\nimport Stack from 'cozy-ui/react/Stack'\nimport Button from 'cozy-ui/react/Button'\nimport Icon from 'cozy-ui/react/Icon'\nimport { MainTitle } from 'cozy-ui/react/Text'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport EmptyIcon from 'assets/icons/color/default.svg'\n\nconst reload = () => {\n  window.location.reload()\n}\n\nexport const Failure = ({ t, errorType }) => (\n  <Stack className=\"u-flex u-flex-column u-flex-items-center\">\n    <Icon icon={EmptyIcon} size={64} />\n    <MainTitle tag=\"h2\" className=\"u-ta-center\">\n      {t(`error.${errorType}`)}\n    </MainTitle>\n    <Button label={t('error.button.reload')} onClick={reload} />\n  </Stack>\n)\n\nexport default translate()(Failure)\n","/* global cozy */\nconst FILES_DOCTYPE = 'io.cozy.files'\nconst FETCH_LIMIT = 50\n\nexport const SHARED_BY_LINK = 'sharedByLink'\nexport const SHARED_WITH_ME = 'sharedWithMe'\nexport const SHARED_WITH_OTHERS = 'sharedWithOthers'\n\nexport default class CozyStackAdapter {\n  async fetchApps(skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON('GET', '/apps/', null, {\n      processJSONAPI: false\n    })\n\n    return {\n      data: data || [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async fetchDocuments(doctype) {\n    // WARN: cozy-client-js lacks a cozy.data.findAll method that uses this route\n    try {\n      // WARN: if no document of this doctype exist, this route will return a 404,\n      // so we need to try/catch and return an empty response object in case of a 404\n      const resp = await cozy.client.fetchJSON(\n        'GET',\n        `/data/${doctype}/_all_docs?include_docs=true`\n      )\n      // WARN: the JSON response from the stack is not homogenous with other routes (offset? rows? total_rows?)\n      // see https://github.com/cozy/cozy-stack/blob/master/docs/data-system.md#list-all-the-documents\n      // WARN: looks like this route returns something looking like a couchDB design doc, we need to filter it:\n      const rows = resp.rows.filter(row => !row.doc.hasOwnProperty('views'))\n      // we normalize the data (note that we add _type so that cozy.client.data.listReferencedFiles works...)\n      const docs = rows.map(row =>\n        Object.assign({}, row.doc, { id: row.id, _type: doctype })\n      )\n      // we forge a correct JSONAPI response:\n      return {\n        data: docs,\n        meta: { count: resp.total_rows },\n        skip: resp.offset,\n        next: false\n      }\n    } catch (error) {\n      if (error.message.match(/not_found/)) {\n        return { data: [], meta: { count: 0 }, skip: 0, next: false }\n      }\n      throw error\n    }\n  }\n\n  async queryDocuments(doctype, index, options) {\n    const fields = options.fields\n    const skip = options.skip || 0\n    // Mango wants an array of single-property-objects...\n    const sort = options.sort\n      ? index.fields.map(f => ({ [f]: options.sort[f] || 'desc' }))\n      : undefined\n\n    const queryOptions = {\n      limit: FETCH_LIMIT,\n      wholeResponse: true, // WARN: mandatory to get the full JSONAPI response\n      ...options,\n      // TODO: type and class should not be necessary, it's just a temp fix for a stack bug\n      fields: [...fields, '_id', '_type', 'class'],\n      skip,\n      sort\n    }\n\n    // abstract away the format differences between query replies on the VFS versus the data API\n    let data, meta, next\n    if (doctype === FILES_DOCTYPE) {\n      const response = await cozy.client.files.query(index, queryOptions)\n      data = response.data.map(doc =>\n        Object.assign({ _id: doc.id, _type: doctype }, doc, doc.attributes)\n      )\n      meta = response.meta\n      next = meta.count > skip + FETCH_LIMIT\n    } else {\n      const response = await cozy.client.data.query(index, queryOptions)\n      data = response.docs.map(doc =>\n        Object.assign({ id: doc._id, _type: doctype }, doc)\n      )\n      meta = {}\n      next = response.next\n    }\n\n    // we forge a correct JSONAPI response:\n    return { data, meta, next }\n  }\n\n  async fetchDocument(doctype, id) {\n    const doc = await cozy.client.data.find(doctype, id)\n    // we normalize again...\n    const normalized = { ...doc, id: doc._id, _type: doc._type }\n    return { data: [normalized] }\n  }\n\n  init(config) {\n    this.config = { ...config }\n  }\n\n  async createDocument(doctype, doc) {\n    const created = await cozy.client.data.create(doctype, doc)\n    // we forge a standard response with a 'data' property\n    const normalized = { ...created, id: created._id, _type: doctype }\n    return { data: [normalized] }\n  }\n\n  async createTrigger(doc) {\n    const created = await cozy.client.fetchJSON('POST', '/jobs/triggers', {\n      data: doc\n    })\n    const normalized = { ...created, ...created.attributes, id: created._id }\n    return { data: [normalized] }\n  }\n\n  async launchTrigger(doc) {\n    const job = await cozy.client.fetchJSON(\n      'POST',\n      `/jobs/triggers/${doc._id}/launch`\n    )\n\n    const normalized = { ...job, ...job.attributes, id: job._id }\n    return { data: [normalized] }\n  }\n\n  async updateDocument(doc) {\n    const updated = await cozy.client.data.updateAttributes(\n      doc._type,\n      doc.id,\n      doc\n    )\n    // we forge a standard response with a 'data' property\n    return { data: [{ ...doc, _rev: updated._rev }] }\n  }\n\n  async deleteDocument(doc) {\n    /* const deleted = */ await cozy.client.data.delete(doc._type, doc)\n    // we forge a standard response with a 'data' property\n    return { data: [doc] }\n  }\n\n  async deleteTrigger(doc) {\n    await cozy.client.fetchJSON('DELETE', `/jobs/triggers/${doc._id}`)\n    return { data: [doc] }\n  }\n\n  createIndex(doctype, fields) {\n    return cozy.client.data.defineIndex(doctype, fields)\n  }\n\n  async fetchFileByPath(path) {\n    try {\n      const file = await cozy.client.files.statByPath(path)\n      // we forge a standard response with a 'data' property\n      return { data: [normalizeFile(file)] }\n    } catch (err) {\n      return null\n    }\n  }\n\n  async createFile(file, dirID) {\n    const created = await cozy.client.files.create(file, { dirID })\n    // we forge a standard response with a 'data' property\n    return { data: [normalizeFile(created)] }\n  }\n\n  async trashFile(file) {\n    /* const trashed = */ cozy.client.files.trashById(file.id)\n    // we forge a standard response with a 'data' property\n    return { data: [file] }\n  }\n\n  async fetchReferencedFiles(doc, skip = 0) {\n    // WARN: _type and _id are needed by cozy.client.data.fetchReferencedFiles\n    const normalized = { ...doc, _id: doc.id }\n    // WARN: the stack API is probably not ideal here: referencedFiles are in the 'included' property\n    // (that should be used when fetching an entity AND its relations) and the 'data' property\n    // only contains uplets { id, type }\n    const { included, meta } = await cozy.client.data.fetchReferencedFiles(\n      normalized,\n      {\n        skip,\n        limit: FETCH_LIMIT\n      }\n    )\n    // we forge a standard response with a 'data' property\n    return {\n      data: !included\n        ? []\n        : included.map(file => ({\n            ...file,\n            ...file.attributes,\n            _type: 'io.cozy.files'\n          })),\n      meta,\n      next: meta.count > skip + FETCH_LIMIT,\n      skip\n    }\n  }\n\n  async fetchKonnectors(skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON(\n      'GET',\n      `/konnectors/`,\n      null,\n      {\n        processJSONAPI: false\n      }\n    )\n\n    return {\n      data: data\n        ? data.map(konnector => ({\n            ...konnector,\n            ...konnector.attributes,\n            _type: 'io.cozy.konnectors'\n          }))\n        : [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async fetchTriggers(worker, skip = 0) {\n    const { data, meta } = await cozy.client.fetchJSON(\n      'GET',\n      `/jobs/triggers?Worker=${worker}`,\n      null,\n      {\n        processJSONAPI: false\n      }\n    )\n\n    return {\n      data: data\n        ? data.map(trigger => ({\n            ...trigger,\n            ...trigger.attributes,\n            _type: 'io.cozy.triggers'\n          }))\n        : [],\n      meta: meta,\n      skip,\n      next: !!meta && meta.count > skip + FETCH_LIMIT\n    }\n  }\n\n  async addReferencedFiles(doc, ids) {\n    await cozy.client.data.addReferencedFiles(doc, ids)\n    return ids\n  }\n\n  async removeReferencedFiles(doc, ids) {\n    // WARN: _type and _id are needed by cozy.client.data.removeReferencedFiles\n    const normalized = { ...doc, _id: doc.id }\n    await cozy.client.data.removeReferencedFiles(normalized, ids)\n    return ids\n  }\n\n  async fetchSharingPermissions(doctype) {\n    const fetchPermissions = (doctype, sharingType) =>\n      cozy.client.fetchJSON(\n        'GET',\n        `/permissions/doctype/${doctype}/${sharingType}`\n      )\n\n    const byMe = await fetchPermissions(doctype, SHARED_WITH_OTHERS)\n    const byLink = await fetchPermissions(doctype, SHARED_BY_LINK)\n    const withMe = await fetchPermissions(doctype, SHARED_WITH_ME)\n\n    return { byMe, byLink, withMe }\n  }\n\n  fetchSharing(id) {\n    return cozy.client.fetchJSON('GET', `/sharings/${id}`)\n  }\n\n  createSharing(permissions, contactIds, sharingType, description) {\n    return cozy.client.fetchJSON('POST', '/sharings/', {\n      desc: description,\n      permissions,\n      recipients: contactIds.map(contactId => ({\n        recipient: {\n          id: contactId,\n          type: 'io.cozy.contacts'\n        }\n      })),\n      sharing_type: sharingType\n    })\n  }\n\n  revokeSharing(sharingId) {\n    return cozy.client.fetchJSON('DELETE', `/sharings/${sharingId}`)\n  }\n\n  revokeSharingForClient(sharingId, clientId) {\n    return cozy.client.fetchJSON(\n      'DELETE',\n      `/sharings/${sharingId}/recipient/${clientId}`\n    )\n  }\n\n  createSharingLink(permissions) {\n    return cozy.client.fetchJSON('POST', `/permissions?codes=email`, {\n      data: {\n        type: 'io.cozy.permissions',\n        attributes: {\n          permissions\n        }\n      }\n    })\n  }\n\n  revokeSharingLink(permission) {\n    return cozy.client.fetchJSON('DELETE', `/permissions/${permission._id}`)\n  }\n}\n\nconst normalizeFile = file => ({ ...file, ...file.attributes, id: file._id })\n","/* (ignored) */","import { fetchCollection } from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.accounts'\nconst accountCollectionKey = 'accounts'\n\nexport const fetchAccounts = () =>\n  fetchCollection(accountCollectionKey, DOCTYPE)\n\n// selectors\nexport const getAccount = (state, id) => {\n  if (!state.documents || !state.documents[DOCTYPE]) {\n    return null\n  }\n\n  return state.documents[DOCTYPE][id]\n}\n\nexport const getIds = state =>\n  // state.collection is bugged, it does not update correctly id list on\n  // RECEIVE_DATA\n  // (state.collections &&\n  //   state.collections[accountCollectionKey] &&\n  //   state.collections[accountCollectionKey].ids) ||\n  // []\n  (state.documents &&\n    state.documents[DOCTYPE] &&\n    Object.keys(state.documents[DOCTYPE])) ||\n  []\n","/* (ignored) */","import React from 'react'\nimport ReactMarkdown from 'react-markdown'\n\nexport const reactMarkdownRendererOptions = {\n  // eslint-disable-next-line react/display-name\n  Link: props => (\n    <a href={props.href} rel=\"noopener noreferrer\" target=\"_blank\">\n      {props.children}\n    </a>\n  )\n}\n\nexport const ReactMarkdownWrapper = ({ source }) => (\n  <ReactMarkdown source={source} renderers={reactMarkdownRendererOptions} />\n)\n\nexport default ReactMarkdownWrapper\n","import { combineReducers } from 'redux'\nimport moment from 'moment'\nimport omit from 'lodash/omit'\nimport get from 'lodash/get'\nimport { buildKonnectorError, isKonnectorUserError } from 'lib/konnectors'\n\nimport { getTriggerLastJob } from 'ducks/jobs'\n\n// constant\nconst ACCOUNT_DOCTYPE = 'io.cozy.accounts'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\nconst JOBS_DOCTYPE = 'io.cozy.jobs'\n\nexport const ENQUEUE_CONNECTION = 'ENQUEUE_CONNECTION'\nexport const LAUNCH_TRIGGER = 'LAUNCH_TRIGGER'\nexport const PURGE_QUEUE = 'PURGE_QUEUE'\nexport const RECEIVE_DATA = 'RECEIVE_DATA'\nexport const RECEIVE_NEW_DOCUMENT = 'RECEIVE_NEW_DOCUMENT'\nexport const RECEIVE_DELETED_DOCUMENT = 'RECEIVE_DELETED_DOCUMENT'\nexport const UPDATE_CONNECTION_RUNNING_STATUS =\n  'UPDATE_CONNECTION_RUNNING_STATUS'\nexport const UPDATE_CONNECTION_ERROR = 'UPDATE_CONNECTION_ERROR'\nexport const START_CONNECTION_CREATION = 'START_CONNECTION_CREATION'\nexport const END_CONNECTION_CREATION = 'END_CONNECTION_CREATION'\n\n// Helpers\nconst getTriggerKonnectorSlug = trigger =>\n  (trigger && trigger.message && trigger.message.konnector) || null\n\nconst isKonnectorTrigger = doc =>\n  doc._type === TRIGGERS_DOCTYPE && !!doc.message && !!doc.message.konnector\n\nconst isKonnectorJob = doc =>\n  doc._type === JOBS_DOCTYPE && doc.worker === 'konnector'\n\n// reducers\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n    case UPDATE_CONNECTION_ERROR:\n    case UPDATE_CONNECTION_RUNNING_STATUS:\n    case LAUNCH_TRIGGER:\n      // Trigger is launched, connection should be running.\n      if (!action.trigger || !action.trigger._id)\n        throw new Error('Missing trigger id')\n      if (!action.trigger.message || !action.trigger.message.konnector)\n        throw new Error('Malformed trigger message')\n      return {\n        ...state,\n        [getTriggerKonnectorSlug(action.trigger)]: konnectorReducer(\n          state[getTriggerKonnectorSlug(action.trigger)],\n          action\n        )\n      }\n\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT:\n      if (\n        !action.response ||\n        !action.response.data ||\n        !action.response.data.length\n      ) {\n        return state\n      }\n\n      return action.response.data.reduce((newState, doc) => {\n        const isTrigger = isKonnectorTrigger(doc)\n        const isJob = isKonnectorJob(doc)\n        // Ignore non triggers or non jobs\n        if (!isTrigger && !isJob) return newState\n        const konnectorSlug = doc.message.konnector\n        const triggerId = (isTrigger && doc._id) || (isJob && doc.trigger_id)\n        if (!triggerId) return newState\n\n        const account = isTrigger && !!doc.message && doc.message.account\n\n        const currentStatus =\n          (isTrigger && (doc.current_state && doc.current_state.status)) ||\n          (isJob && doc.state)\n\n        const error =\n          (isTrigger &&\n            !!doc.current_state &&\n            doc.current_state.status !== 'done' &&\n            !!doc.current_state.last_error &&\n            buildKonnectorError(doc.current_state.last_error)) ||\n          (isJob && !!doc.error && buildKonnectorError(doc.error)) ||\n          null\n\n        const lastSyncDate =\n          (isTrigger &&\n            !!doc.current_state &&\n            doc.current_state.last_execution) ||\n          (isJob && doc.queued_at)\n        const existingTriggers = get(\n          newState,\n          [konnectorSlug, 'triggers', 'data'],\n          []\n        )\n        let rawTriggers = existingTriggers\n\n        if (isTrigger) {\n          rawTriggers = existingTriggers.filter(({ _id }) => _id !== doc._id)\n          rawTriggers.push(doc)\n        }\n        return {\n          ...newState,\n          [konnectorSlug]: {\n            triggers: {\n              ...get(newState, [konnectorSlug, 'triggers'], []),\n              data: rawTriggers,\n              [triggerId]: {\n                ...get(newState, [konnectorSlug, 'triggers', triggerId], {}),\n                account:\n                  account ||\n                  get(newState, [\n                    konnectorSlug,\n                    'triggers',\n                    triggerId,\n                    'account'\n                  ]),\n                error,\n                hasError: !!error || currentStatus === 'errored',\n                isRunning: ['queued', 'running'].includes(currentStatus),\n                isConnected: !error && currentStatus === 'done',\n                lastSyncDate: lastSyncDate\n              }\n            }\n          }\n        }\n      }, state)\n\n    case PURGE_QUEUE:\n    case RECEIVE_DELETED_DOCUMENT:\n      return Object.keys(state).reduce((konnectors, slug) => {\n        return {\n          ...konnectors,\n          [slug]: konnectorReducer(state[slug], action)\n        }\n      }, state)\n\n    default:\n      return state\n  }\n}\n\nconst creation = (state = null, action) => {\n  switch (action.type) {\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT: {\n      if (!state) return null\n      if (\n        !action.response ||\n        !action.response.data ||\n        action.response.data.length !== 1\n      ) {\n        return state\n      }\n\n      const doc = action.response.data[0]\n      const isAccount = doc._type === ACCOUNT_DOCTYPE\n\n      if (isAccount)\n        return {\n          ...state,\n          account: doc._id\n        }\n\n      const isTrigger = isKonnectorTrigger(doc)\n      if (isTrigger)\n        return {\n          ...state,\n          trigger: doc._id\n        }\n\n      return state\n    }\n    case START_CONNECTION_CREATION:\n      // Store all data related to the creation of a new connection in then\n      // property `creation`\n      // While a new connection is being configured, new trigger and account\n      // are store here\n      return {}\n    case END_CONNECTION_CREATION:\n      return null\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  creation,\n  konnectors: reducer\n})\n\n// sub(?) reducers\nconst konnectorReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n    case LAUNCH_TRIGGER:\n    case RECEIVE_DATA:\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_DELETED_DOCUMENT:\n    case PURGE_QUEUE:\n      // We assume that document being a trigger has already been validated.\n      return {\n        ...state,\n        triggers: triggersReducer(state.triggers, action)\n      }\n    default:\n      return state\n  }\n}\n\nconst triggersReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ENQUEUE_CONNECTION:\n      return {\n        ...state,\n        [action.trigger._id]: {\n          ...state[action.trigger._id],\n          isEnqueued: true\n        }\n      }\n    case LAUNCH_TRIGGER:\n      return {\n        ...state,\n        [action.trigger._id]: {\n          ...state[action.trigger._id],\n          account: action.trigger.message.account,\n          isRunning: true\n        }\n      }\n    case PURGE_QUEUE:\n      return state\n        ? Object.keys(state).reduce((newState, triggerId) => {\n            return {\n              ...newState,\n              [triggerId]: {\n                ...newState[triggerId],\n                isEnqueued: false\n              }\n            }\n          }, state)\n        : state\n    case RECEIVE_DELETED_DOCUMENT: {\n      const { data } = action.response\n      const { _id, _type } = data[0]\n      if (_type === TRIGGERS_DOCTYPE) {\n        return omit(state, _id)\n      } else return state\n    }\n    default:\n      return state\n  }\n}\n\n// action creators sync\nexport const enqueueConnection = trigger => ({\n  type: ENQUEUE_CONNECTION,\n  trigger\n})\n\nexport const purgeQueue = () => ({\n  type: PURGE_QUEUE\n})\n\nexport const updateConnectionError = (konnector, account, error) => ({\n  type: UPDATE_CONNECTION_ERROR,\n  konnector,\n  account,\n  error\n})\n\nexport const startConnectionCreation = konnector => ({\n  type: START_CONNECTION_CREATION,\n  konnector\n})\n\nexport const endConnectionCreation = () => ({\n  type: END_CONNECTION_CREATION\n})\n\n// selectors\nexport const getConnectionsByKonnector = (\n  state,\n  konnectorSlug,\n  validAccounts = [],\n  validKonnectors = []\n) => {\n  const konnectorIsValid =\n    !validKonnectors.length || validKonnectors.includes(konnectorSlug)\n  const konnectorHasConnections =\n    state.konnectors[konnectorSlug] &&\n    Object.keys(state.konnectors[konnectorSlug].triggers).length\n  if (!konnectorIsValid || !konnectorHasConnections) return []\n\n  return Object.values(state.konnectors[konnectorSlug].triggers).filter(\n    trigger => validAccounts.includes(trigger.account)\n  )\n}\n\nexport const getFirstError = (state, konnectorSlug) => {\n  const firstTriggerHavingError =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers).find(\n      trigger => !!trigger.error\n    )\n  return firstTriggerHavingError ? firstTriggerHavingError.error : null\n}\n\nexport const getFirstUserError = (state, konnectorSlug) => {\n  const firstTriggerHavingUserError =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers).find(trigger =>\n      isKonnectorUserError(trigger.error)\n    )\n  return firstTriggerHavingUserError ? firstTriggerHavingUserError.error : null\n}\n\nexport const getLastSyncDate = (state, konnectorSlug) => {\n  const lastExecutions =\n    !!state.konnectors &&\n    !!state.konnectors[konnectorSlug] &&\n    !!state.konnectors[konnectorSlug].triggers &&\n    Object.values(state.konnectors[konnectorSlug].triggers)\n      .map(trigger => trigger.lastSyncDate)\n      .sort((dateA, dateB) => {\n        const momentA = moment.utc(dateA)\n        const momentB = moment.utc(dateB)\n        return momentA.isAfter(momentB) ? -1 : momentA.isBefore(momentB) ? 1 : 0\n      })\n  return lastExecutions.length && lastExecutions[0]\n}\n\n// Map the trigger status to a status compatible with queue\nconst getTriggerQueueStatus = trigger => {\n  if (trigger.isRunning) return 'ongoing'\n  if (trigger.hasError) return 'error'\n  if (trigger.isConnected) return 'done'\n  return 'pending'\n}\n\nexport const getQueue = (state, konnectors) =>\n  // state is state.connections\n  state.konnectors\n    ? Object.keys(state.konnectors).reduce(\n        (queuedConnections, konnectorSlug) => {\n          const triggers = state.konnectors[konnectorSlug].triggers\n          if (!triggers) return queuedConnections\n          const konnector = konnectors[konnectorSlug]\n          return queuedConnections.concat(\n            Object.keys(triggers).reduce((queuedTriggers, triggerId) => {\n              if (triggers[triggerId].isEnqueued) {\n                const label = konnector.name\n                const status = getTriggerQueueStatus(triggers[triggerId])\n                return queuedTriggers.concat({\n                  konnector,\n                  label,\n                  status,\n                  triggerId\n                })\n              }\n\n              return queuedTriggers\n            }, [])\n          )\n        },\n        []\n      )\n    : []\n\nexport const getConnectionError = (state, trigger) =>\n  getTriggerState(state, trigger).error\n\nexport const getCreatedAccount = state =>\n  !!state.creation && state.creation.account\n\nexport const getTriggerIdByKonnectorAndAccount = (\n  state,\n  konnector,\n  account,\n  validAccounts = []\n) =>\n  !!konnector &&\n  !!account &&\n  validAccounts.includes(account._id) &&\n  !!state.konnectors[konnector.slug] &&\n  Object.keys(state.konnectors[konnector.slug].triggers).find(\n    triggerId =>\n      state.konnectors[konnector.slug].triggers[triggerId].account ===\n      account._id\n  )\n\nexport const getTriggerLastSuccess = (state, trigger) => {\n  const lastJob = getTriggerLastJob(state, trigger)\n  const lastJobIsSuccess = lastJob && lastJob.state === 'done'\n  if (lastJobIsSuccess) return lastJob.started_at\n  return (\n    !!trigger && !!trigger.current_state && trigger.current_state.last_success\n  )\n}\n\n// get trigger from state, in state.konnectors[konnectorSlug].triggers[triggerId]\nconst getTriggerState = (state, trigger) => {\n  const konnectorSlug = getTriggerKonnectorSlug(trigger)\n  if (!konnectorSlug || !state.konnectors || !state.konnectors[konnectorSlug])\n    return false\n  const triggers = state.konnectors[konnectorSlug].triggers\n  if (!triggers) return false\n  return (!!triggers && !!triggers[trigger._id] && triggers[trigger._id]) || {}\n}\n\nexport const isCreatingConnection = state => !!state.creation\n\nexport const isConnectionConnected = (state, trigger) =>\n  getTriggerState(state, trigger).isConnected\n\nexport const isConnectionEnqueued = (state, trigger) =>\n  getTriggerState(state, trigger).isEnqueued\n\nexport const isConnectionRunning = (state, trigger) =>\n  getTriggerState(state, trigger).isRunning\n","/* (ignored) */","import React from 'react'\n\nimport { Title, Text } from 'cozy-ui/react/Text'\nimport { Media, Img, Bd } from 'cozy-ui/transpiled/react/Media'\nimport { translate } from 'cozy-ui/react/I18n'\nimport ArrowIllustration from 'assets/images/drawing-arrow-up.svg'\n\nexport const EmptyServicesListTip = ({ t }) => (\n  <Media align=\"top\" className=\"EmptyServicesListTip\">\n    <Img>\n      <img src={ArrowIllustration} />\n    </Img>\n    <Bd className=\"EmptyServicesListTip-text\">\n      <Title>{t('connector.empty.title')}</Title>\n      <Text tag=\"p\" className=\"u-mv-half\">\n        {t('connector.empty.text')}\n      </Text>\n    </Bd>\n  </Media>\n)\n\nexport default translate()(EmptyServicesListTip)\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* konnector lib ready to be added to cozy-client-js */\nexport const ERROR_TYPES = {\n  CHALLENGE_ASKED: 'CHALLENGE_ASKED',\n  LOGIN_FAILED: 'LOGIN_FAILED',\n  MAINTENANCE: 'MAINTENANCE',\n  NOT_EXISTING_DIRECTORY: 'NOT_EXISTING_DIRECTORY',\n  USER_ACTION_NEEDED: 'USER_ACTION_NEEDED',\n  VENDOR_DOWN: 'VENDOR_DOWN',\n  DISK_QUOTA_EXCEEDED: 'DISK_QUOTA_EXCEEDED'\n}\n\nexport const UPDATE_NEEDED_ERRORS_TYPES = {\n  TERMS_VERSION_MISMATCH: 'TERMS_VERSION_MISMATCH'\n}\n\nexport const TWO_FA_ERRORS = [\n  'USER_ACTION_NEEDED.TWOFA_EXPIRED',\n  'USER_ACTION_NEEDED.WRONG_TWOFA_CODE'\n]\n\nfunction patchFolderPermission(cozy, konnector, folderId = null) {\n  const slug = konnector.attributes ? konnector.attributes.slug : konnector.slug\n  const saveFolder = folderId\n    ? { type: 'io.cozy.files', values: [folderId] }\n    : {}\n\n  return cozy.fetchJSON(\n    'PATCH',\n    `/permissions/konnectors/${encodeURIComponent(slug)}`,\n    {\n      data: {\n        attributes: {\n          permissions: {\n            saveFolder: saveFolder\n          }\n        }\n      }\n    }\n  )\n}\n\nexport function addFolderPermission(cozy, konnector, folderId) {\n  return patchFolderPermission(cozy, konnector, folderId)\n}\n\nexport function isKonnectorLoginError(error) {\n  return error && error.type && error.type === ERROR_TYPES.LOGIN_FAILED\n}\n\nexport function isKonnectorTwoFAError(error) {\n  return error && error.type && TWO_FA_ERRORS.includes(error.code)\n}\n\nexport function isKonnectorUserError(error) {\n  return (\n    error &&\n    error.type &&\n    [\n      ERROR_TYPES.CHALLENGE_ASKED,\n      ERROR_TYPES.DISK_QUOTA_EXCEEDED,\n      ERROR_TYPES.LOGIN_FAILED,\n      ERROR_TYPES.NOT_EXISTING_DIRECTORY,\n      ERROR_TYPES.USER_ACTION_NEEDED\n    ].includes(error.type)\n  )\n}\n\nexport function isKonnectorKnownError(error) {\n  return error && error.type && Object.keys(ERROR_TYPES).includes(error.type)\n}\n\nexport function isKonnectorUpdateNeededError(error) {\n  return (\n    error &&\n    error.type &&\n    Object.keys(UPDATE_NEEDED_ERRORS_TYPES).includes(error.type)\n  )\n}\n\nexport function buildKonnectorError(message) {\n  var error = new Error(message)\n  error.type = message.split('.')[0]\n  error.code = message\n  return error\n}\n\nconst checkLocale = (t, key) => {\n  return t(key) !== key\n}\n\nexport const hasPendingUpdate = konnector => {\n  return !!konnector.available_version\n}\n\nexport const getMostAccurateErrorKey = (t, error, getKey = key => key) => {\n  // Legacy. Kind of.\n  if (!error.code) return error.message\n\n  const errorSegments = error.code.split('.')\n\n  let tested = errorSegments\n  let fullKey = getKey(tested.join('.'))\n\n  while (tested.length && !checkLocale(t, fullKey)) {\n    tested = tested.slice(0, tested.length - 1)\n    fullKey = getKey(tested.join('.'))\n  }\n\n  return tested.length ? fullKey : getKey('UNKNOWN_ERROR')\n}\n\nconst legacyMessages = {\n  terms: 'connector'\n}\n\nexport const getKonnectorMessage = (t, konnector, message) => {\n  const { messages, hasDescriptions } = konnector\n\n  const providesMessage =\n    messages && messages.length && messages.includes(message)\n  if (providesMessage) return t(`${konnector.slug}.messages.${message}`)\n\n  const providesLegacyMessage =\n    hasDescriptions && hasDescriptions[legacyMessages[message] || message]\n  if (providesLegacyMessage)\n    return t(\n      `connector.${konnector.slug}.description.${legacyMessages[message] ||\n        message}`\n    )\n\n  return null\n}\n","module.exports = \"/img/drawing-arrow-up.svg\";","import React from 'react'\nimport { withClient } from 'cozy-client'\nimport Icon from 'cozy-ui/react/Icon'\nimport AppLinker, { generateWebLink } from 'cozy-ui/react/AppLinker'\nimport palette from 'cozy-ui/stylus/settings/palette.json'\n\nconst AddServiceTile = ({ label, client }) => {\n  const nativePath = '/discover/?type=konnector'\n  const slug = 'store'\n  const cozyURL = new URL(client.getStackClient().uri)\n  const { cozySubdomainType: subDomainType } = client.getInstanceOptions()\n\n  return (\n    <AppLinker\n      slug={'store'}\n      nativePath={nativePath}\n      href={generateWebLink({\n        cozyUrl: cozyURL.origin,\n        slug,\n        nativePath,\n        subDomainType\n      })}\n    >\n      {({ onClick, href }) => (\n        <a\n          onClick={onClick}\n          href={href}\n          className=\"item item--ghost item--add-service\"\n        >\n          <div className=\"item-icon\">\n            <Icon icon=\"plus\" size={16} color={palette['dodgerBlue']} />\n          </div>\n          <span className=\"item-title\">{label}</span>\n        </a>\n      )}\n    </AppLinker>\n  )\n}\n\nexport default withClient(AddServiceTile)\n","/* global prompt */\n\nconst hasCordovaPlugin = () => {\n  return (\n    window.cordova !== undefined && window.cordova.InAppBrowser !== undefined\n  )\n}\n\nconst REGISTRATION_ABORT = 'REGISTRATION_ABORT'\n\nexport const authenticateWithCordova = url => {\n  if (hasCordovaPlugin()) {\n    return new Promise((resolve, reject) => {\n      const target = '_blank'\n      const options = 'clearcache=yes,zoom=no'\n      const inAppBrowser = window.cordova.InAppBrowser.open(\n        url,\n        target,\n        options\n      )\n\n      const removeListener = () => {\n        inAppBrowser.removeEventListener('loadstart', onLoadStart)\n        inAppBrowser.removeEventListener('exit', onExit)\n      }\n\n      const onLoadStart = ({ url }) => {\n        const accessCode = /\\?access_code=(.+)$/.test(url)\n        const state = /\\?state=(.+)$/.test(url)\n\n        if (accessCode || state) {\n          resolve(url)\n          removeListener()\n          inAppBrowser.close()\n        }\n      }\n\n      const onExit = () => {\n        reject(new Error(REGISTRATION_ABORT))\n        removeListener()\n        inAppBrowser.close()\n      }\n\n      inAppBrowser.addEventListener('loadstart', onLoadStart)\n      inAppBrowser.addEventListener('exit', onExit)\n    })\n  } else {\n    /**\n     * for dev purpose:\n     * In oauth workflow, the server displays an authorization page\n     * User must accept to give permission then the server gives an url\n     * with query parameters used by cozy-client-js to initialize itself.\n     *\n     * This hack let developers open the authorization page in a new tab\n     * then get the \"access_code\" url and paste it in the prompt to let the\n     * application initialize and redirect to other pages.\n     */\n    return new Promise(resolve => {\n      setTimeout(() => {\n        const token = prompt('Paste the url here:')\n        resolve(token)\n      }, 10000)\n    })\n  }\n}\n","import { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class CozyProvider extends Component {\n  static propTypes = {\n    domain: PropTypes.string,\n    secure: PropTypes.bool,\n    store: PropTypes.shape({\n      subscribe: PropTypes.func.isRequired,\n      dispatch: PropTypes.func.isRequired,\n      getState: PropTypes.func.isRequired\n    }),\n    client: PropTypes.object.isRequired,\n    children: PropTypes.element.isRequired\n  }\n\n  static childContextTypes = {\n    domain: PropTypes.string,\n    secure: PropTypes.bool,\n    store: PropTypes.object,\n    client: PropTypes.object.isRequired\n  }\n\n  static contextTypes = {\n    store: PropTypes.object\n  }\n\n  getChildContext() {\n    return {\n      domain: this.props.domain,\n      secure: this.props.secure,\n      store: this.props.store || this.context.store,\n      client: this.props.client\n    }\n  }\n\n  render() {\n    return this.props.children || null\n  }\n}\n","import React from 'react'\nimport CozyUiAppIcon from 'cozy-ui/react/AppIcon'\nimport { withClient } from 'cozy-client'\n\n// TODO Update the component in cozy-ui to handle secure and domain natively\nconst AppIcon = ({ client, ...otherProps }) => {\n  const cozyURL = new URL(client.getStackClient().uri)\n  const domain = cozyURL.host\n  const secure = cozyURL.protocol === 'https:'\n  return <CozyUiAppIcon domain={domain} secure={secure} {...otherProps} />\n}\n\nexport default withClient(AppIcon)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { translate } from 'cozy-ui/react/I18n'\nimport IconGrid from 'cozy-ui/react/Labs/IconGrid'\nimport AppLinker, { generateWebLink } from 'cozy-ui/react/AppLinker'\nimport { withClient } from 'cozy-client'\nimport AppIcon from 'components/AppIcon'\n\nconst CandidateCategoryTile = ({ t, slugs, category, client }) => {\n  const cozyURL = new URL(client.getStackClient().uri)\n  const app = 'store'\n  const nativePath = `/discover?type=konnector&category=${category}`\n  const { cozySubdomainType: subDomainType } = client.getInstanceOptions()\n\n  return (\n    <AppLinker\n      slug={app}\n      nativePath={nativePath}\n      href={generateWebLink({\n        cozyUrl: cozyURL.origin,\n        slug: app,\n        nativePath,\n        subDomainType\n      })}\n    >\n      {({ onClick, href }) => (\n        <a onClick={onClick} href={href} className=\"item item--ghost\">\n          <div className=\"item-icon\">\n            <IconGrid>\n              {slugs.map(slug => (\n                <AppIcon\n                  alt={t('app.logo.alt', { name: category })}\n                  app={slug}\n                  key={slug}\n                  className=\"item-grid-icon\"\n                />\n              ))}\n            </IconGrid>\n          </div>\n          <span className=\"item-title\">{t(`category.${category}`)}</span>\n        </a>\n      )}\n    </AppLinker>\n  )\n}\n\nCandidateCategoryTile.propTypes = {\n  slugs: PropTypes.arrayOf(PropTypes.string).isRequired,\n  category: PropTypes.string.isRequired,\n  client: PropTypes.object.isRequired\n}\n\nexport default translate()(withClient(CandidateCategoryTile))\n","import React from 'react'\nimport Button, { ButtonLink } from 'cozy-ui/react/Button'\nimport { useBreakpoints } from 'cozy-ui/transpiled/react'\n\nconst CornerButton = props => {\n  const { isMobile } = useBreakpoints()\n  const { href } = props\n  const ButtonComp = href ? ButtonLink : Button\n\n  return (\n    <ButtonComp\n      size=\"small\"\n      theme=\"text\"\n      className=\"corner-button\"\n      iconOnly={isMobile}\n      extension={isMobile ? 'narrow' : null}\n      {...props}\n    />\n  )\n}\n\nexport default CornerButton\n","import React, { Component } from 'react'\nimport classNames from 'classnames'\nimport { connect } from 'react-redux'\nimport { NavLink, withRouter } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport get from 'lodash/get'\nimport flag from 'cozy-flags'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport Icon from 'cozy-ui/react/Icon'\nimport palette from 'cozy-ui/stylus/settings/palette.json'\n\nimport AppIcon from 'components/AppIcon'\nimport {\n  getFirstError,\n  getFirstUserError,\n  getLastSyncDate\n} from 'ducks/connections'\nimport { getKonnectorTriggersCount } from 'reducers'\nimport { getErrorLocaleBound, KonnectorJobError } from 'cozy-harvest-lib'\n\nconst getKonnectorError = ({ error, lang, konnector }) => {\n  if (!error || !error.message) {\n    return null\n  }\n  const konnError = new KonnectorJobError(error.message)\n  return getErrorLocaleBound(konnError, konnector, lang, 'title')\n}\n\nconst STATUS = {\n  OK: 0,\n  UPDATE: 1,\n  MAINTENANCE: 2,\n  ERROR: 3,\n  NO_ACCOUNT: 4\n}\n\nconst getKonnectorStatus = ({\n  konnector,\n  isInMaintenance,\n  error,\n  userError,\n  accountsCount\n}) => {\n  if (konnector.available_version) return STATUS.UPDATE\n  else if (isInMaintenance) return STATUS.MAINTENANCE\n  else if (error || userError) return STATUS.ERROR\n  else if (!accountsCount) return STATUS.NO_ACCOUNT\n  else return STATUS.OK\n}\n\nexport class KonnectorTile extends Component {\n  render() {\n    const {\n      accountsCount,\n      error,\n      isInMaintenance,\n      userError,\n      konnector,\n      route,\n      t,\n      lang\n    } = this.props\n\n    const statusThemes = {\n      [STATUS.NO_ACCOUNT]: {\n        className: 'item--ghost',\n        icon: null,\n        color: null\n      },\n      [STATUS.MAINTENANCE]: {\n        className: 'item--maintenance',\n        icon: 'wrench-circle',\n        color: palette.coolGrey\n      },\n      [STATUS.ERROR]: {\n        className: null,\n        icon: 'warning-circle',\n        color: palette.pomegranate\n      }\n    }\n    const hideKonnectorErrors = flag('home.konnectors.hide-errors') // flag used for some demo instances where we want to ignore all konnector errors\n\n    const status = hideKonnectorErrors\n      ? STATUS.OK\n      : getKonnectorStatus({\n          konnector,\n          isInMaintenance,\n          error,\n          userError,\n          accountsCount\n        })\n    const { className: statusClassName, icon, color } = get(\n      statusThemes,\n      status,\n      {}\n    )\n\n    return (\n      <NavLink\n        className={classNames('item', statusClassName)}\n        to={route}\n        title={getKonnectorError({ error, lang, konnector })}\n      >\n        <div className=\"item-icon\">\n          <AppIcon\n            alt={t('app.logo.alt', { name: konnector.name })}\n            app={konnector}\n          />\n          {icon && <Icon icon={icon} className=\"item-status\" color={color} />}\n        </div>\n        <h3 className=\"item-title\">{konnector.name}</h3>\n      </NavLink>\n    )\n  }\n}\n\nKonnectorTile.propTypes = {\n  accountsCount: PropTypes.number,\n  error: PropTypes.object,\n  isInMaintenance: PropTypes.bool.isRequired,\n  userError: PropTypes.object,\n  konnector: PropTypes.object,\n  route: PropTypes.string.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nconst mapStateToProps = (state, props) => {\n  const { konnector } = props\n  return {\n    // /!\\ error can also be a userError.\n    error: getFirstError(state.connections, konnector.slug),\n    userError: getFirstUserError(state.connections, konnector.slug),\n    lastSyncDate: getLastSyncDate(state.connections, konnector.slug),\n    accountsCount: getKonnectorTriggersCount(state, konnector)\n  }\n}\n\nexport default translate()(connect(mapStateToProps)(withRouter(KonnectorTile)))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"queue\":\"queue--E5doD\",\"queue--visible\":\"queue--visible--3kodM\",\"queue-header\":\"queue-header--1xuYz\",\"queue-header-inner\":\"queue-header-inner--2hQ34\",\"btn-close\":\"btn-close--1_NjM\",\"queue-progress\":\"queue-progress--3kjuG\",\"queue-content\":\"queue-content--3aNvV\",\"queue--collapsed\":\"queue--collapsed--aksIJ\",\"queue-list\":\"queue-list--3gpgx\",\"queue-item--error\":\"queue-item--error--11w-V\",\"queue-item--done\":\"queue-item--done--fE0KV\",\"queue-item\":\"queue-item--2nmo3\",\"queue-item-progress-bar\":\"queue-item-progress-bar--2-yvo\",\"item-label\":\"item-label--1Q26g\",\"item-ext\":\"item-ext--3RUut\",\"item-status\":\"item-status--qmrpq\",\"item-icon\":\"item-icon--2Q7Zb\",\"item-icon-img\":\"item-icon-img--7qiT6\",\"item-pending\":\"item-pending--1lCQW\"};","import { combineReducers } from 'redux'\nimport { removeObjectProperty, mapValues } from './utils'\nimport sharings, {\n  FETCH_SHARINGS,\n  getSharings,\n  getSharingDetails\n} from './slices/sharings'\nimport synchronization from './slices/synchronization'\n\nconst APPS_DOCTYPE = 'io.cozy.apps'\nconst FETCH_DOCUMENT = 'FETCH_DOCUMENT'\nconst FETCH_COLLECTION = 'FETCH_COLLECTION'\nconst LAUNCH_TRIGGER = 'LAUNCH_TRIGGER'\nconst RECEIVE_DATA = 'RECEIVE_DATA'\nconst RECEIVE_ERROR = 'RECEIVE_ERROR'\nexport const CREATE_DOCUMENT = 'CREATE_DOCUMENT'\nconst UPDATE_DOCUMENT = 'UPDATE_DOCUMENT'\nconst DELETE_DOCUMENT = 'DELETE_DOCUMENT'\nconst RECEIVE_APP = 'RECEIVE_APP'\nconst RECEIVE_NEW_DOCUMENT = 'RECEIVE_NEW_DOCUMENT'\nconst RECEIVE_UPDATED_DOCUMENT = 'RECEIVE_UPDATED_DOCUMENT'\nconst RECEIVE_DELETED_DOCUMENT = 'RECEIVE_DELETED_DOCUMENT'\nconst FETCH_REFERENCED_FILES = 'FETCH_REFERENCED_FILES'\nconst ADD_REFERENCED_FILES = 'ADD_REFERENCED_FILES'\nconst REMOVE_REFERENCED_FILES = 'REMOVE_REFERENCED_FILES'\n\nconst documents = (state = {}, action) => {\n  switch (action.type) {\n    case RECEIVE_APP: {\n      const apps = action.response && action.response.data\n      if (apps.length === 0) return state\n      return {\n        ...state,\n        [APPS_DOCTYPE]: {\n          ...state[APPS_DOCTYPE],\n          ...objectifyDocumentsArray(apps)\n        }\n      }\n    }\n    case RECEIVE_DATA: {\n      const { data } = action.response\n      if (data.length === 0) return state\n      const dataDoctype = getArrayDoctype(data)\n      return {\n        ...state,\n        [dataDoctype]: {\n          ...state[dataDoctype],\n          ...objectifyDocumentsArray(data)\n        }\n      }\n    }\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_UPDATED_DOCUMENT: {\n      const doc = action.response.data[0]\n      return {\n        ...state,\n        [doc._type]: {\n          ...state[doc._type],\n          [doc.id]: doc\n        }\n      }\n    }\n    case RECEIVE_DELETED_DOCUMENT: {\n      const deleted = action.response.data[0]\n      return {\n        ...state,\n        [deleted._type]: removeObjectProperty(state[deleted._type], deleted.id)\n      }\n    }\n    case ADD_REFERENCED_FILES:\n      return {\n        ...state,\n        'io.cozy.files': {\n          ...state['io.cozy.files'],\n          ...updateFilesReferences(\n            state['io.cozy.files'],\n            action.ids,\n            action.document\n          )\n        }\n      }\n    case REMOVE_REFERENCED_FILES:\n      return {\n        ...state,\n        'io.cozy.files': {\n          ...state['io.cozy.files'],\n          ...removeFilesReferences(\n            state['io.cozy.files'],\n            action.ids,\n            action.document\n          )\n        }\n      }\n    default:\n      return state\n  }\n}\n\nconst objectifyDocumentsArray = documents =>\n  documents.reduce((obj, doc) => ({ ...obj, [doc.id]: doc }), {})\n\nconst updateFileReference = (\n  /* eslint-disable-next-line casecamelcase */\n  { relationships: { referenced_by, ...relationships }, ...file },\n  doc\n) => ({\n  ...file,\n  relationships: {\n    ...relationships,\n    /* eslint-disable-next-line casecamelcase */\n    [referenced_by.data]:\n      /* eslint-disable-next-line casecamelcase */\n      referenced_by.data === null\n        ? [{ id: doc.id, type: doc.type }]\n        : /* eslint-disable-next-line casecamelcase */\n          [...referenced_by.data, { id: doc.id, type: doc.type }]\n  }\n})\n\nconst updateFilesReferences = (files, newlyReferencedIds, doc) =>\n  newlyReferencedIds.reduce(\n    (updated, id) => ({\n      ...updated,\n      [id]: updateFileReference(files[id], doc)\n    }),\n    {}\n  )\n\nconst removeFileReferences = (\n  /* eslint-disable-next-line casecamelcase */\n  { relationships: { referenced_by, ...relationships }, ...file },\n  doc\n) => ({\n  ...file,\n  relationships: {\n    ...relationships,\n    /* eslint-disable-next-line casecamelcase */\n    [referenced_by.data]: referenced_by.data.filter(\n      rel => rel.type !== doc.type && rel.id !== doc.id\n    )\n  }\n})\n\nconst removeFilesReferences = (files, removedIds, doc) =>\n  removedIds.reduce(\n    (updated, id) => ({\n      ...updated,\n      [id]: removeFileReferences(files[id], doc)\n    }),\n    {}\n  )\n\nconst getDoctype = ({ _type: doctype }) => {\n  // TODO: don't know why the stack returns 'file' here..\n  if (doctype === 'file') {\n    return 'io.cozy.files'\n  }\n  return doctype\n}\n\nconst getArrayDoctype = documents => getDoctype(documents[0])\n\n// collection reducers\nconst collectionInitialState = {\n  type: null,\n  options: {},\n  fetchStatus: 'pending',\n  lastFetch: null,\n  hasMore: false,\n  count: 0,\n  ids: []\n}\n\nconst collection = (state = collectionInitialState, action) => {\n  switch (action.type) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n      return {\n        ...state,\n        type: action.doctype || 'io.cozy.files',\n        options: action.options,\n        fetchStatus: action.skip > 0 ? 'loadingMore' : 'loading'\n      }\n    case RECEIVE_APP:\n    case RECEIVE_DATA: {\n      const response = action.response\n      return {\n        ...state,\n        fetchStatus: 'loaded',\n        lastFetch: Date.now(),\n        hasMore: response.next !== undefined ? response.next : state.hasMore,\n        count:\n          response.meta && response.meta.count\n            ? response.meta.count\n            : response.data.length,\n        ids: !action.skip\n          ? response.data.map(doc => doc.id)\n          : [...state.ids, ...response.data.map(doc => doc.id)]\n      }\n    }\n    case ADD_REFERENCED_FILES:\n      return {\n        ...state,\n        type: 'io.cozy.files',\n        count: state.count + action.ids.length,\n        ids: [...state.ids, ...action.ids]\n      }\n    case REMOVE_REFERENCED_FILES:\n      return {\n        ...state,\n        count: state.count - action.ids.length,\n        ids: state.ids.filter(id => action.ids.indexOf(id) === -1)\n      }\n    case RECEIVE_ERROR:\n      return {\n        ...state,\n        fetchStatus: 'failed'\n      }\n    case RECEIVE_NEW_DOCUMENT:\n      return {\n        ...state,\n        ids: [...state.ids, action.response.data[0].id]\n      }\n    case RECEIVE_DELETED_DOCUMENT:\n      return {\n        ...state,\n        ids: state.ids.filter(id => id !== action.response.data[0].id)\n      }\n    default:\n      return state\n  }\n}\n\nconst collections = (state = {}, action) => {\n  const applyUpdate = (collections, updateAction) =>\n    updateAction.updateCollections.reduce(\n      (updated, name) => ({\n        ...updated,\n        [name]: collection(collections[name], action)\n      }),\n      {}\n    )\n\n  switch (action.type) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n    case ADD_REFERENCED_FILES:\n    case REMOVE_REFERENCED_FILES:\n    case RECEIVE_APP:\n    case RECEIVE_DATA:\n    case RECEIVE_ERROR:\n      if (!action.collection) {\n        return state\n      }\n      return {\n        ...state,\n        [action.collection]: collection(state[action.collection], action)\n      }\n    case RECEIVE_NEW_DOCUMENT:\n    case RECEIVE_DELETED_DOCUMENT:\n      if (!action.updateCollections) {\n        return state\n      }\n      return {\n        ...state,\n        ...applyUpdate(state, action)\n      }\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  collections,\n  documents,\n  sharings,\n  synchronization\n})\n\nexport const fetchApps = (name, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_APP, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.apps',\n  options,\n  skip,\n  promise: client => client.fetchApps(name, options, skip)\n})\n\nexport const fetchCollection = (name, doctype, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype,\n  options,\n  skip,\n  promise: client => client.fetchCollection(name, doctype, options, skip)\n})\n\nexport const fetchDocument = (doctype, id, options = {}) => ({\n  types: [FETCH_DOCUMENT, RECEIVE_DATA, RECEIVE_ERROR],\n  doctype,\n  id,\n  options,\n  promise: client => client.fetchDocument(doctype, id)\n})\n\nexport const fetchReferencedFiles = (doc, skip = 0) => ({\n  types: [FETCH_REFERENCED_FILES, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: `${doc._type}/${doc.id}#files`,\n  document: doc,\n  options: {},\n  skip,\n  promise: client => client.fetchReferencedFiles(doc, skip)\n})\n\nexport const fetchTriggers = (name, worker, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.triggers',\n  options,\n  skip,\n  promise: client => client.fetchTriggers(name, worker, options, skip)\n})\n\nexport const fetchKonnectors = (name, options = {}, skip = 0) => ({\n  types: [FETCH_COLLECTION, RECEIVE_DATA, RECEIVE_ERROR],\n  collection: name,\n  doctype: 'io.cozy.konnectors',\n  options,\n  skip,\n  promise: client => client.fetchKonnectors(name, options, skip)\n})\n\nexport const createDocument = (doctype, doc, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  doctype,\n  document: doc,\n  promise: client => client.createDocument(doctype, doc),\n  ...actionOptions\n})\n\nexport const createTrigger = (doc, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.createTrigger(doc),\n  ...actionOptions\n})\n\nexport const launchTrigger = (trigger, actionOptions = {}) => ({\n  types: [LAUNCH_TRIGGER, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  trigger: trigger,\n  promise: client => client.launchTrigger(trigger),\n  ...actionOptions\n})\n\nexport const updateDocument = (doc, actionOptions = {}) => ({\n  types: [UPDATE_DOCUMENT, RECEIVE_UPDATED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.updateDocument(doc),\n  ...actionOptions\n})\n\nexport const deleteDocument = (doc, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.deleteDocument(doc),\n  ...actionOptions\n})\n\nexport const deleteTrigger = (doc, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: doc,\n  promise: client => client.deleteTrigger(doc),\n  ...actionOptions\n})\n\nexport const createFile = (file, dirID, actionOptions = {}) => ({\n  types: [CREATE_DOCUMENT, RECEIVE_NEW_DOCUMENT, RECEIVE_ERROR],\n  doctype: 'io.cozy.files',\n  promise: client => client.createFile(file, dirID),\n  ...actionOptions\n})\n\nexport const trashFile = (file, actionOptions = {}) => ({\n  types: [DELETE_DOCUMENT, RECEIVE_DELETED_DOCUMENT, RECEIVE_ERROR],\n  document: file,\n  promise: client => client.trashFile(file),\n  ...actionOptions\n})\n\nexport const addReferencedFiles = (doc, ids) => ({\n  type: ADD_REFERENCED_FILES,\n  collection: `${doc._type}/${doc._id}#files`,\n  document: doc,\n  ids,\n  promise: client => client.addReferencedFiles(doc, ids)\n})\n\nexport const removeReferencedFiles = (doc, ids) => ({\n  type: REMOVE_REFERENCED_FILES,\n  collection: `${doc._type}/${doc._id}#files`,\n  document: doc,\n  ids,\n  promise: client => client.removeReferencedFiles(doc, ids)\n})\n\nexport const makeActionCreator = promise => ({ promise })\n\nexport const makeFetchMoreAction = (\n  { types, collection, document, doctype, options },\n  skip\n) =>\n  types[0] === FETCH_REFERENCED_FILES\n    ? fetchReferencedFiles(document, skip)\n    : fetchCollection(collection, doctype, options, skip)\n\nexport const applySelectorForAction = (state, action) => {\n  switch (action.types[0]) {\n    case FETCH_COLLECTION:\n    case FETCH_REFERENCED_FILES:\n      return getCollection(state, action.collection)\n    case FETCH_DOCUMENT:\n      return getDocument(state, action.doctype, action.id)\n    case FETCH_SHARINGS:\n      return action.id\n        ? getSharingDetails(state, action.doctype, action.id, action.options)\n        : getSharings(state, action.doctype, action.options)\n    default:\n      return null\n  }\n}\n\nexport const enhancePropsForActions = (props, fetchActions, dispatch) =>\n  mapValues(fetchActions, (action, propName) => {\n    const dataObject = props[propName]\n    switch (action.types[0]) {\n      case FETCH_COLLECTION:\n      case FETCH_REFERENCED_FILES:\n        return {\n          ...dataObject,\n          fetchMore: dataObject.hasMore\n            ? () =>\n                dispatch(makeFetchMoreAction(action, dataObject.data.length))\n            : null\n        }\n      default:\n        return dataObject\n    }\n  })\n\n// selectors\nconst mapDocumentsToIds = (documents, doctype, ids) =>\n  ids.map(id => documents[doctype][id])\n\nexport const getCollection = (state, name) => {\n  const collection = state.cozy.collections[name]\n  if (!collection) {\n    return { ...collectionInitialState, data: null }\n  }\n  return {\n    ...collection,\n    data: mapDocumentsToIds(\n      state.cozy.documents,\n      collection.type,\n      collection.ids\n    )\n  }\n}\n\nexport const getDocument = (state, doctype, id) => {\n  const documents = state.cozy.documents[doctype]\n  if (!documents) {\n    return null\n  }\n  return documents[id]\n}\n\nexport const isCollectionFetched = (state, name) =>\n  state.cozy.collections[name] &&\n  state.cozy.collections[name].fetchStatus === 'loaded'\n","/* global cozy */\n\nconst slugify = text =>\n  text\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(/[^\\w-]+/g, '') // Remove all non-word chars\n    .replace(/--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, '') // Trim - from end of text\n\nconst forceFileDownload = (href, filename) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', href)\n  element.setAttribute('download', filename)\n  element.style.display = 'none'\n  document.body.appendChild(element)\n  element.click()\n  document.body.removeChild(element)\n}\n\n// async helpers: they interact with the stack but not with the store\nexport const downloadArchive = async (notSecureFilename, fileIds) => {\n  const filename = slugify(notSecureFilename)\n  const href = await cozy.client.files.getArchiveLinkByIds(fileIds, filename)\n  const fullpath = await cozy.client.fullpath(href)\n  forceFileDownload(fullpath, filename + '.zip')\n}\n\nexport const downloadFile = async file => {\n  const response = await cozy.client.files.downloadById(file.id)\n  const blob = await response.blob()\n  forceFileDownload(window.URL.createObjectURL(blob), file.name)\n}\n","import React from 'react'\nimport { queryConnect, Q, models, fetchPolicies } from 'cozy-client'\nimport AppLinker from 'cozy-ui/react/AppLinker'\nimport { useI18n } from 'cozy-ui/react/I18n'\nimport get from 'lodash/get'\nimport CornerButton from './CornerButton'\n\nconst { applications } = models\n\nconst SettingsButton = ({ settingsAppQuery: { data } }) => {\n  const { lang } = useI18n()\n  const app = get(data, '[0]')\n  const appHref = get(app, 'links.related')\n  const slug = get(app, 'slug')\n  const displayName = applications.getAppDisplayName(app, lang)\n\n  return slug && appHref ? (\n    <AppLinker slug={slug} href={appHref}>\n      {({ onClick, href }) => (\n        <CornerButton\n          label={displayName}\n          href={href}\n          onClick={onClick}\n          icon=\"gear\"\n        />\n      )}\n    </AppLinker>\n  ) : null\n}\n\nconst query = () => Q('io.cozy.apps').where({ slug: 'settings' })\nconst olderThan30s = fetchPolicies.olderThan(30 * 1000)\nexport default queryConnect({\n  settingsAppQuery: { query, fetchPolicy: olderThan30s, as: 'settingsAppQuery' }\n})(SettingsButton)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { models } from 'cozy-client'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport AppLinker from 'cozy-ui/react/AppLinker'\nimport AppIcon from 'components/AppIcon'\nconst { applications } = models\n\nexport class AppTile extends Component {\n  render() {\n    const { app, t, lang } = this.props\n    const displayName = applications.getAppDisplayName(app, lang)\n    const appHref = app.links && app.links.related\n    return (\n      <AppLinker slug={app.slug} href={appHref}>\n        {({ onClick, href }) => (\n          <a onClick={onClick} href={href} className=\"item\">\n            <div className=\"item-icon\">\n              <AppIcon\n                alt={t('app.logo.alt', { name: displayName })}\n                app={app}\n              />\n            </div>\n            <h3 className=\"item-title\">{displayName}</h3>\n          </a>\n        )}\n      </AppLinker>\n    )\n  }\n}\n\nAppTile.propTypes = {\n  app: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired\n}\n\nexport default translate()(AppTile)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport get from 'lodash/get'\nimport { translate } from 'cozy-ui/react/I18n'\nimport AppLinker, { generateWebLink } from 'cozy-ui/react/AppLinker'\nimport { withClient } from 'cozy-client'\nimport AppIcon from 'components/AppIcon'\nimport useRegistryInformation from 'hooks/useRegistryInformation'\n\nconst FallbackCandidateServiceTile = ({ t, slug, client }) => {\n  const cozyURL = new URL(client.getStackClient().uri)\n  const app = 'store'\n  const nativePath = `/discover/${slug}`\n  const { cozySubdomainType: subDomainType } = client.getInstanceOptions()\n  const registryData = useRegistryInformation(client, slug)\n  const name = registryData\n    ? get(registryData, 'latest_version.manifest.name', slug)\n    : ''\n\n  return (\n    <AppLinker\n      slug={app}\n      nativePath={nativePath}\n      href={generateWebLink({\n        cozyUrl: cozyURL.origin,\n        slug: app,\n        nativePath,\n        subDomainType\n      })}\n    >\n      {({ onClick, href }) => (\n        <a onClick={onClick} href={href} className=\"item item--ghost\">\n          <div className=\"item-icon\">\n            <AppIcon alt={t('app.logo.alt', { name })} app={slug} />\n          </div>\n          <span className=\"item-title\">{name}</span>\n        </a>\n      )}\n    </AppLinker>\n  )\n}\n\nFallbackCandidateServiceTile.propTypes = {\n  slug: PropTypes.string.isRequired,\n  client: PropTypes.object.isRequired\n}\n\nexport default translate()(withClient(FallbackCandidateServiceTile))\n","var map = {\n\t\"./en\": \"7dT6\",\n\t\"./en.json\": \"7dT6\",\n\t\"./es\": \"oway\",\n\t\"./es.json\": \"oway\",\n\t\"./fr\": \"9pOX\",\n\t\"./fr.json\": \"9pOX\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"KAKi\";","/* global cozy */\nimport * as triggers from 'lib/triggers'\n\nimport CozyRealtime from 'cozy-realtime'\n\nexport const CONNECTION_STATUS = {\n  ERRORED: 'errored',\n  RUNNING: 'running',\n  CONNECTED: 'connected'\n}\n\nconst ACCOUNTS_DOCTYPE = 'io.cozy.accounts'\nconst JOBS_DOCTYPE = 'io.cozy.jobs'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\n\nconst normalize = (dbObject, doctype) => {\n  return {\n    ...dbObject,\n    ...dbObject.attributes,\n    id: dbObject._id,\n    _type: doctype || dbObject._type\n  }\n}\n\nexport default class CollectStore {\n  constructor(context, client, options = {}) {\n    this.client = client\n    this.listener = null\n    this.options = options\n\n    this.categories = require('../config/categories')\n\n    this.updateUnfinishedJob = this.updateUnfinishedJob.bind(this)\n    this.onAccountCreated = this.onAccountCreated.bind(this)\n    this.onAccountUpdated = this.onAccountUpdated.bind(this)\n    this.onAccountDeleted = this.onAccountDeleted.bind(this)\n    this.onTriggerCreated = this.onTriggerCreated.bind(this)\n    this.onTriggerDeleted = this.onTriggerDeleted.bind(this)\n\n    this.initializeRealtime()\n  }\n\n  initializeRealtime() {\n    this.realtime = new CozyRealtime({ client: this.client })\n\n    this.realtime.subscribe('created', JOBS_DOCTYPE, this.updateUnfinishedJob)\n    this.realtime.subscribe('updated', JOBS_DOCTYPE, this.updateUnfinishedJob)\n\n    this.realtime.subscribe('created', ACCOUNTS_DOCTYPE, this.onAccountCreated)\n    this.realtime.subscribe('updated', ACCOUNTS_DOCTYPE, this.onAccountUpdated)\n    this.realtime.subscribe('deleted', ACCOUNTS_DOCTYPE, this.onAccountDeleted)\n\n    this.realtime.subscribe('created', TRIGGERS_DOCTYPE, this.onTriggerCreated)\n    this.realtime.subscribe('deleted', TRIGGERS_DOCTYPE, this.onTriggerDeleted)\n  }\n\n  async onAccountCreated(account) {\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onAccountUpdated(account) {\n    this.dispatch({\n      type: 'RECEIVE_UPDATED_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onAccountDeleted(account) {\n    this.dispatch({\n      type: 'RECEIVE_DELETED_DOCUMENT',\n      response: { data: [normalize(account, ACCOUNTS_DOCTYPE)] },\n      updateCollections: ['accounts']\n    })\n  }\n\n  async onTriggerCreated(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async onTriggerUpdated(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_UPDATED_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async onTriggerDeleted(trigger) {\n    this.dispatch({\n      type: 'RECEIVE_DELETED_DOCUMENT',\n      response: { data: [normalize(trigger, TRIGGERS_DOCTYPE)] },\n      updateCollections: ['triggers']\n    })\n  }\n\n  async updateUnfinishedJob(job) {\n    const normalizedJob = normalize(job, JOBS_DOCTYPE)\n    // TODO Filter by worker on the WebSocket when it will be available in the\n    // stack\n    const isKonnectorJob = normalizedJob.worker === 'konnector'\n    const isDeletedAccountHookJob = !!normalizedJob.account_deleted\n    const isKonnectorJobWithoutTrigger = !normalizedJob.trigger_id\n    if (\n      !isKonnectorJob ||\n      isDeletedAccountHookJob ||\n      isKonnectorJobWithoutTrigger\n    ) {\n      return\n    }\n\n    this.dispatch({\n      type: 'RECEIVE_NEW_DOCUMENT',\n      response: { data: [normalizedJob] },\n      updateCollections: ['jobs']\n    })\n    const trigger = await triggers.fetch(cozy.client, normalizedJob.trigger_id)\n    this.onTriggerUpdated(trigger)\n  }\n\n  createIntentService(intent, window) {\n    return cozy.client.intents.createService(intent, window)\n  }\n\n  // Get the drive and banks application url using the list of application\n  fetchUrls() {\n    return cozy.client\n      .fetchJSON('GET', '/apps/')\n      .then(body => {\n        body.forEach(item => {\n          if (!item.attributes || !item.attributes.slug || !item.links) return\n          switch (item.attributes.slug) {\n            case 'banks':\n              this.banksUrl = `${item.links.related}`\n              break\n            default:\n              break\n          }\n        })\n      })\n      .catch(err => {\n        // eslint-disable-next-line no-console\n        console.warn(err.message)\n        return false\n      })\n  }\n}\n","/* global __DEVELOPMENT__ */\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { CozyClient, CozyProvider } from 'redux-cozy-client'\nimport 'url-search-params-polyfill'\nimport MostRecentCozyClient, {\n  CozyProvider as MostRecentCozyClientProvider\n} from 'cozy-client'\nimport { Application } from 'cozy-doctypes'\nimport { handleOAuthResponse } from 'cozy-harvest-lib'\nimport I18n from 'cozy-ui/react/I18n'\nimport { BreakpointsProvider } from 'cozy-ui/react/hooks/useBreakpoints'\nimport flag from 'cozy-flags'\n\nimport collectConfig from 'config/collect'\nimport PiwikHashRouter from 'lib/PiwikHashRouter'\nimport configureStore from 'store/configureStore'\n\nimport 'cozy-ui/transpiled/react/stylesheet.css'\nimport 'cozy-ui/dist/cozy-ui.min.css'\nimport 'intro.js-fix-cozy/minified/introjs.min.css'\nimport 'styles/index.styl'\n\nconst lang = document.documentElement.getAttribute('lang') || 'en'\nconst context = window.context || 'cozy'\n\nconst ACCOUNTS_DOCTYPE = 'io.cozy.accounts'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (handleOAuthResponse()) return\n\n  const root = document.querySelector('[role=application]')\n  const data = root.dataset\n\n  const legacyClient = new CozyClient({\n    cozyURL: `//${data.cozyDomain}`,\n    token: data.cozyToken\n  })\n\n  // New improvements must be done with CozyClient\n  const cozyClient = new MostRecentCozyClient({\n    uri: `${window.location.protocol}//${data.cozyDomain}`,\n    schema: {\n      app: Application.schema,\n      accounts: {\n        doctype: ACCOUNTS_DOCTYPE,\n        attributes: {},\n        relationships: {\n          master: {\n            type: 'has-one',\n            doctype: ACCOUNTS_DOCTYPE\n          }\n        }\n      },\n      permissions: {\n        doctype: 'io.cozy.permissions',\n        attributes: {}\n      },\n      triggers: {\n        doctype: 'io.cozy.triggers'\n      },\n      jobs: {\n        doctype: 'io.cozy.jobs'\n      }\n    },\n    token: data.cozyToken\n  })\n\n  cozyClient.registerPlugin(flag.plugin)\n\n  // store\n  const store = configureStore(legacyClient, cozyClient, context, {\n    lang,\n    ...collectConfig\n  })\n\n  const dictRequire = lang => require(`locales/${lang}`)\n  const App = require('containers/App').default\n  render(\n    <MostRecentCozyClientProvider client={cozyClient}>\n      <CozyProvider\n        store={store}\n        client={cozyClient}\n        domain={data.cozyDomain}\n        secure={!__DEVELOPMENT__}\n      >\n        <I18n lang={lang} dictRequire={dictRequire} context={context}>\n          <BreakpointsProvider>\n            <PiwikHashRouter>\n              <App {...collectConfig} />\n            </PiwikHashRouter>\n          </BreakpointsProvider>\n        </I18n>\n      </CozyProvider>\n    </MostRecentCozyClientProvider>,\n    document.querySelector('[role=application]')\n  )\n})\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coz-loading-placeholder\":\"coz-loading-placeholder--iKREi\",\"placeHolderShimmer\":\"placeHolderShimmer--25Y66\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withClient, models } from 'cozy-client'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport keyBy from 'lodash/keyBy'\nimport flow from 'lodash/flow'\nimport Infos from 'cozy-ui/transpiled/react/Infos'\nimport InfosCarrousel from 'cozy-ui/transpiled/react/InfosCarrousel'\nimport Button from 'cozy-ui/transpiled/react/Button'\nimport Text, { SubTitle } from 'cozy-ui/transpiled/react/Text'\nimport { translate } from 'cozy-ui/transpiled/react/I18n'\nimport { withBreakpoints } from 'cozy-ui/transpiled/react'\nimport {\n  getTriggersInError,\n  getAccountsWithErrors,\n  getInstalledKonnectors\n} from 'reducers/index'\nimport ReactMarkdownWrapper from 'components/ReactMarkdownWrapper'\nimport AppIcon from 'components/AppIcon'\nimport homeConfig from 'config/collect'\nimport { getErrorLocaleBound, KonnectorJobError } from 'cozy-harvest-lib'\n\nconst {\n  triggers: { triggers: triggersModel, triggerStates: triggerStatesModel },\n  accounts: accountsModel\n} = models\n\nconst muteTrigger = async (client, trigger, accountsById) => {\n  const accountId = triggersModel.getAccountId(trigger)\n  const initialAccount = accountsById[accountId]\n  const errorType = triggerStatesModel.getLastErrorType(trigger)\n  const account = accountsModel.muteError(initialAccount, errorType)\n\n  await client.save(account)\n}\n\nconst getKonnectorSlug = konnector => konnector.slug\n\nexport const KonnectorErrors = ({\n  t,\n  lang,\n  triggersInError,\n  accountsWithErrors,\n  installedKonnectors,\n  history,\n  client,\n  breakpoints: { isMobile }\n}) => {\n  const accountsWithErrorsById = keyBy(accountsWithErrors, '_id')\n  const installedKonnectorsBySlug = keyBy(installedKonnectors, getKonnectorSlug)\n  const nonMutedTriggerErrors = triggersInError.filter(trigger => {\n    const errorType = triggerStatesModel.getLastErrorType(trigger)\n    const accountId = triggersModel.getAccountId(trigger)\n    const account = accountsWithErrorsById[accountId]\n    const konnectorSlug = triggersModel.getKonnector(trigger)\n    const hasInstalledKonnector = installedKonnectors.some(\n      ({ slug }) => slug === konnectorSlug\n    )\n\n    return (\n      homeConfig.displayedErrorTypes.includes(errorType) &&\n      hasInstalledKonnector &&\n      account &&\n      !triggersModel.isLatestErrorMuted(trigger, account)\n    )\n  })\n\n  return nonMutedTriggerErrors.length > 0 ? (\n    <div className=\"KonnectorErrors\">\n      <InfosCarrousel theme=\"danger\">\n        {nonMutedTriggerErrors.map((trigger, index) => {\n          const errorType = triggerStatesModel.getLastErrorType(trigger)\n          const konnError = new KonnectorJobError(errorType)\n          const konnectorSlug = triggersModel.getKonnector(trigger)\n          const konnectorAccount = triggersModel.getAccountId(trigger)\n          const konnector = installedKonnectorsBySlug[konnectorSlug]\n\n          const errorTitle = getErrorLocaleBound(\n            konnError,\n            konnector,\n            lang,\n            'title'\n          )\n\n          const errorDescription = getErrorLocaleBound(\n            konnError,\n            konnector,\n            lang,\n            'description'\n          )\n\n          return (\n            <Infos\n              key={trigger._id}\n              description={\n                <>\n                  <div className=\"u-pomegranate u-flex u-flex-row u-flex-items-center\">\n                    <AppIcon\n                      alt={t('app.logo.alt', { name: konnectorSlug })}\n                      app={konnectorSlug}\n                      className=\"u-w-2 u-h-2 u-w-1-half-s u-h-1-half-s u-mr-1\"\n                    />\n                    <div>\n                      <span className=\"u-fz-tiny\">{konnector.name}</span>\n                      <SubTitle className=\"u-pomegranate u-fz-medium u-fz-small-m\">\n                        {nonMutedTriggerErrors.length > 1\n                          ? `(${index + 1}/${nonMutedTriggerErrors.length}) `\n                          : null}\n                        {errorTitle}\n                      </SubTitle>\n                    </div>\n                  </div>\n                  <Text className=\"u-fz-small-m\">\n                    <ReactMarkdownWrapper source={errorDescription} />\n                  </Text>\n                </>\n              }\n              action={\n                <Button\n                  theme=\"secondary\"\n                  label={t('fix_konnector_error')}\n                  className=\"u-mh-0\"\n                  size={isMobile ? 'small' : 'normal'}\n                  onClick={() =>\n                    history.push(\n                      `/connected/${konnectorSlug}/accounts/${konnectorAccount}`\n                    )\n                  }\n                />\n              }\n              dismissAction={() =>\n                muteTrigger(client, trigger, accountsWithErrorsById)\n              }\n            />\n          )\n        })}\n      </InfosCarrousel>\n    </div>\n  ) : null\n}\n\nKonnectorErrors.propTypes = {\n  t: PropTypes.func.isRequired,\n  triggersInError: PropTypes.array.isRequired,\n  accountsWithErrors: PropTypes.array.isRequired,\n  installedKonnectors: PropTypes.array.isRequired,\n  history: PropTypes.object.isRequired,\n  client: PropTypes.object.isRequired,\n  breakpoints: PropTypes.shape({ isMobile: PropTypes.bool.isRequired })\n    .isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    triggersInError: getTriggersInError(state),\n    accountsWithErrors: getAccountsWithErrors(state),\n    installedKonnectors: getInstalledKonnectors(state)\n  }\n}\n\nexport default flow(\n  connect(mapStateToProps),\n  withRouter,\n  withClient,\n  translate(),\n  withBreakpoints()\n)(KonnectorErrors)\n","/* global cozy */\nimport DataAccessFacade from './DataAccessFacade'\nimport { authenticateWithCordova } from './authentication/mobile'\n\nconst APPS_DOCTYPE = 'io.cozy.apps'\nconst FILES_DOCTYPE = 'io.cozy.files'\nconst TRIGGERS_DOCTYPE = 'io.cozy.triggers'\nconst KONNECTORS_DOCTYPE = 'io.cozy.konnectors'\nconst SHARINGS_DOCTYPE = 'io.cozy.sharings'\n\nexport default class CozyClient {\n  constructor(config) {\n    const { cozyURL, ...options } = config\n    this.options = options\n    this.indexes = {}\n    this.specialDirectories = {}\n    this.facade = new DataAccessFacade()\n    if (cozyURL) {\n      this.facade.setup(cozyURL, options)\n    }\n  }\n\n  register(cozyUrl) {\n    this.facade.setup(cozyUrl, {\n      ...this.options,\n      oauth: {\n        ...this.options.oauth,\n        onRegistered: (client, url) => authenticateWithCordova(url)\n      }\n    })\n    return cozy.client.authorize(true)\n  }\n\n  async isRegistered(clientInfos) {\n    if (!clientInfos) return false\n    try {\n      await cozy.client.auth.getClient(clientInfos)\n      return true\n    } catch (err) {\n      // this is the error sent if we are offline\n      if (err.message === 'Failed to fetch') {\n        return true\n      } else {\n        console.warn(err) // eslint-disable-line no-console\n        return false\n      }\n    }\n  }\n\n  startSync(dispatch) {\n    return this.facade.startSync(dispatch)\n  }\n\n  startReplicationTo(dispatch) {\n    return this.facade.startReplicationTo(dispatch)\n  }\n\n  startReplicationFrom(dispatch) {\n    return this.facade.startReplicationFrom(dispatch)\n  }\n\n  getAdapter(doctype) {\n    return this.facade.getAdapter(doctype)\n  }\n\n  async fetchApps() {\n    return this.getAdapter(APPS_DOCTYPE).fetchApps()\n  }\n\n  async fetchCollection(name, doctype, options = {}, skip = 0) {\n    if (options.selector) {\n      const index = await this.getCollectionIndex(name, doctype, options)\n      return this.getAdapter(doctype).queryDocuments(doctype, index, {\n        ...options,\n        skip\n      })\n    }\n    return this.getAdapter(doctype).fetchDocuments(doctype)\n  }\n\n  fetchDocument(doctype, id) {\n    return this.getAdapter(doctype).fetchDocument(doctype, id)\n  }\n\n  fetchFile(id) {\n    return this.getAdapter(FILES_DOCTYPE).fetchFile(id)\n  }\n\n  fetchReferencedFiles(doc, skip = 0) {\n    return this.getAdapter(doc._type).fetchReferencedFiles(doc, skip)\n  }\n\n  fetchTriggers(name, worker) {\n    return this.getAdapter(TRIGGERS_DOCTYPE).fetchTriggers(worker)\n  }\n\n  fetchKonnectors() {\n    return this.getAdapter(KONNECTORS_DOCTYPE).fetchKonnectors()\n  }\n\n  addReferencedFiles(doc, ids) {\n    return this.getAdapter(doc._type).addReferencedFiles(doc, ids)\n  }\n\n  removeReferencedFiles(doc, ids) {\n    return this.getAdapter(doc._type).removeReferencedFiles(doc, ids)\n  }\n\n  createDocument(doctype, doc) {\n    return this.getAdapter(doctype).createDocument(doctype, doc)\n  }\n\n  createTrigger(doc) {\n    return this.getAdapter(doc._type).createTrigger(doc)\n  }\n\n  launchTrigger(doc) {\n    return this.getAdapter(doc._type).launchTrigger(doc)\n  }\n\n  updateDocument(doc) {\n    return this.getAdapter(doc._type).updateDocument(doc)\n  }\n\n  deleteDocument(doc) {\n    return this.getAdapter(doc._type).deleteDocument(doc)\n  }\n\n  deleteTrigger(doc) {\n    return this.getAdapter(doc._type).deleteTrigger(doc)\n  }\n\n  async fetchSharings(doctype) {\n    const permissions = await this.getAdapter(doctype).fetchSharingPermissions(\n      doctype\n    )\n    const sharingIds = [\n      ...permissions.byMe.map(p => p.attributes.source_id),\n      ...permissions.withMe.map(p => p.attributes.source_id)\n    ]\n    const sharings = await Promise.all(\n      sharingIds.map(id => this.getAdapter(SHARINGS_DOCTYPE).fetchSharing(id))\n    )\n    return { permissions, sharings }\n  }\n\n  createSharing(permissions, contactIds, sharingType, description) {\n    return this.getAdapter(SHARINGS_DOCTYPE).createSharing(\n      permissions,\n      contactIds,\n      sharingType,\n      description\n    )\n  }\n\n  revokeSharing(sharingId) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharing(sharingId)\n  }\n\n  revokeSharingForClient(sharingId, clientId) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharingForClient(\n      sharingId,\n      clientId\n    )\n  }\n\n  createSharingLink(permissions) {\n    return this.getAdapter(SHARINGS_DOCTYPE).createSharingLink(permissions)\n  }\n\n  revokeSharingLink(permission) {\n    return this.getAdapter(SHARINGS_DOCTYPE).revokeSharingLink(permission)\n  }\n\n  createFile(file, dirID) {\n    return this.getAdapter(FILES_DOCTYPE).createFile(file, dirID)\n  }\n\n  trashFile(file) {\n    return this.getAdapter(FILES_DOCTYPE).trashFile(file)\n  }\n\n  async ensureDirectoryExists(path) {\n    if (!this.specialDirectories[path]) {\n      const dir = await cozy.client.files.createDirectoryByPath(path)\n      this.specialDirectories[path] = dir._id\n    }\n    return this.specialDirectories[path]\n  }\n\n  async checkUniquenessOf(doctype, property, value) {\n    const index = await this.getUniqueIndex(doctype, property)\n    const existingDocs = await cozy.client.data.query(index, {\n      selector: { [property]: value },\n      fields: ['_id']\n    })\n    return existingDocs.length === 0\n  }\n\n  async getCollectionIndex(name, doctype, options) {\n    if (!this.indexes[name]) {\n      this.indexes[name] = await this.getAdapter(doctype).createIndex(\n        doctype,\n        this.getIndexFields(options)\n      )\n    }\n    return this.indexes[name]\n  }\n\n  async getUniqueIndex(doctype, property) {\n    const name = `${doctype}/${property}`\n    if (!this.indexes[name]) {\n      this.indexes[name] = await this.getAdapter(doctype).createIndex(doctype, [\n        property\n      ])\n    }\n    return this.indexes[name]\n  }\n\n  getIndexFields(options) {\n    const { selector, sort } = options\n    if (sort) {\n      // We filter possible duplicated fields\n      return [...Object.keys(selector), ...Object.keys(sort)].filter(\n        (f, i, arr) => arr.indexOf(f) === i\n      )\n    }\n    return Object.keys(selector)\n  }\n}\n","import { useState, useEffect } from 'react'\nimport { Q, useClient } from 'cozy-client'\nimport { useI18n } from 'cozy-ui/react/I18n'\nimport get from 'lodash/get'\n\nconst useHomeShortcuts = () => {\n  const client = useClient()\n  const { t } = useI18n()\n  const [files, setFiles] = useState([])\n\n  useEffect(() => {\n    const load = async () => {\n      const folder = await client.query(\n        Q('io.cozy.files').where({ path: t('magic_folder_path') })\n      )\n      const folderId = get(folder, 'data[0]._id')\n\n      if (folderId) {\n        const { data } = await client.query(\n          Q('io.cozy.files').where({ dir_id: folderId, class: 'shortcut' })\n        )\n        setFiles(data)\n      }\n    }\n    load()\n  }, [])\n\n  return files\n}\n\nexport default useHomeShortcuts\n","import React from 'react'\nimport { useI18n } from 'cozy-ui/react/I18n'\nimport CornerButton from './CornerButton'\n\nconst HelpButton = () => {\n  const { t } = useI18n()\n  return <CornerButton label={t('help')} href={t('help_link')} icon=\"help\" />\n}\n\nexport default HelpButton\n","import React, { Component } from 'react'\nimport { Route, withRouter } from 'react-router'\n\nimport { translate } from 'cozy-ui/react/I18n'\nimport { Main, Content } from 'cozy-ui/react/Layout'\n\nimport Konnector from 'components/Konnector'\nimport Applications from 'components/Applications'\nimport ScrollToTopOnMount from 'components/ScrollToTopOnMount'\nimport Services from 'components/Services'\nimport KonnectorErrors from 'components/KonnectorErrors'\nimport FooterLogo from 'components/FooterLogo'\n\nclass Home extends Component {\n  render() {\n    const { wrapper } = this.props\n    return (\n      <Main className=\"main-content\">\n        <ScrollToTopOnMount target={wrapper} />\n        <Content className=\"lists-wrapper\">\n          <Applications />\n          <KonnectorErrors />\n          <Services />\n          <FooterLogo />\n        </Content>\n        <Route path=\"/connected/:konnectorSlug\" component={Konnector} />\n      </Main>\n    )\n  }\n}\n\nexport default withRouter(translate()(Home))\n","import { extend as extendI18n } from 'cozy-ui/react/I18n'\n\nconst KONNECTORS_DOCTYPE = 'io.cozy.konnectors'\n\nconst extendI18nWithKonnector = lang => konnector => {\n  const { langs, locales } = konnector\n\n  const hasLangs = langs && langs.length\n  if (!hasLangs) {\n    // eslint-disable-next-line no-console\n    console.warn(`Konnector ${konnector.name} does not specify any lang`)\n    return konnector\n  }\n\n  const providesLang = hasLangs && langs.includes(lang)\n  const actualLang = providesLang ? lang : langs[0]\n\n  const localeKeys = locales && Object.keys(locales)\n  const providesLocales =\n    localeKeys && localeKeys.length && localeKeys.includes(actualLang)\n\n  if (!providesLocales) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Konnector ${\n        konnector.name\n      } does not specify any locale for lang ${actualLang}`\n    )\n    return konnector\n  }\n\n  extendI18n({ [konnector.slug]: locales[actualLang] })\n  return konnector\n}\n\nexport const konnectorsI18nMiddleware = lang => () => next => action => {\n  const { response } = action\n  switch (action.type) {\n    case 'RECEIVE_DATA':\n    case 'RECEIVE_NEW_DOCUMENT':\n      if (response && action.doctype === KONNECTORS_DOCTYPE) {\n        const konnectors = response.data\n        konnectors &&\n          konnectors.length &&\n          konnectors.forEach(extendI18nWithKonnector(lang))\n      }\n      break\n  }\n\n  return next(action)\n}\n\nexport default konnectorsI18nMiddleware\n","export async function fetch(cozy, triggerId) {\n  return cozy.fetchJSON('GET', `/jobs/triggers/${triggerId}`)\n}\n","import React, { Component } from 'react'\nimport { connect as reduxConnect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport { applySelectorForAction, enhancePropsForActions } from '.'\nimport { mapValues, filterValues } from './utils'\n\nconst connect = (\n  mapDocumentsToProps,\n  mapActionsToProps = null\n) => WrappedComponent => {\n  class Wrapper extends Component {\n    componentDidMount() {\n      const { fetchActions } = this.props\n      const dispatch = this.context.store.dispatch\n      for (const propName in fetchActions) {\n        dispatch(fetchActions[propName])\n      }\n    }\n\n    static contextTypes = {\n      store: PropTypes.object\n    }\n\n    render() {\n      const { store } = this.context\n      const { fetchActions } = this.props\n      const props = {\n        ...this.props,\n        ...enhancePropsForActions(this.props, fetchActions, store.dispatch)\n      }\n      return <WrappedComponent {...props} />\n    }\n  }\n\n  const makeMapStateToProps = (initialState, initialOwnProps) => {\n    const initialProps = mapDocumentsToProps(initialOwnProps)\n\n    const isAction = action => action && action.types && action.promise\n    const fetchActions = filterValues(initialProps, prop => isAction(prop))\n    const otherProps = filterValues(initialProps, prop => !isAction(prop))\n\n    const mapStateToProps = state => ({\n      ...mapValues(\n        fetchActions,\n        action =>\n          isAction(action) ? applySelectorForAction(state, action) : action\n      ),\n      fetchActions,\n      ...otherProps\n    })\n    return mapStateToProps\n  }\n\n  return reduxConnect(makeMapStateToProps, mapActionsToProps)(Wrapper)\n}\n\nexport default connect\n","import { Component } from 'react'\n\n// a component to automatically reset the scroll\n// on mount (see https://reacttraining.com/react-router/web/guides/scroll-restoration/scroll-to-top)\nexport class ScrollToTopOnMount extends Component {\n  componentDidMount() {\n    const target = this.props && this.props.target\n    target && typeof target.scrollTo === 'function' && target.scrollTo(0, 0)\n  }\n\n  render() {\n    return null\n  }\n}\n\nexport default ScrollToTopOnMount\n","import React, { useCallback } from 'react'\nimport { useI18n } from 'cozy-ui/react/I18n'\nimport { useClient } from 'cozy-client'\n\nimport CornerButton from './CornerButton'\n\nconst LogoutButton = () => {\n  const { t } = useI18n()\n  const client = useClient()\n  const logout = useCallback(\n    async () => {\n      await client.logout()\n      window.location.reload()\n    },\n    [client]\n  )\n  return <CornerButton label={t('logout')} icon=\"logout\" onClick={logout} />\n}\n\nexport default LogoutButton\n","import { useState, useEffect } from 'react'\nimport { Registry } from 'cozy-client'\n\nconst useAppsInMaintenance = client => {\n  const [appsInMaintenance, setAppsInMaintenance] = useState([])\n  const registry = new Registry({\n    client\n  })\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const newAppsInMaintenance = await registry.fetchAppsInMaintenance()\n      setAppsInMaintenance(newAppsInMaintenance)\n    }\n    fetchData()\n  }, [])\n\n  return appsInMaintenance\n}\n\nexport default useAppsInMaintenance\n","import React, { useCallback } from 'react'\nimport Icon from 'cozy-ui/react/Icon'\nimport { useI18n } from 'cozy-ui/react/I18n'\nimport { useClient } from 'cozy-client'\nimport useBreakpoints from 'cozy-ui/transpiled/react/hooks/useBreakpoints'\n\nconst LogoutTile = () => {\n  const { t } = useI18n()\n  const client = useClient()\n\n  const logout = useCallback(\n    async () => {\n      await client.logout()\n      window.location.reload()\n    },\n    [client]\n  )\n  const { isMobile } = useBreakpoints()\n\n  return (\n    <button onClick={logout} className=\"item\">\n      <div className=\"item-icon\">\n        <Icon icon=\"logout-large\" size={isMobile ? 32 : 40} />\n      </div>\n      <h3 className=\"item-title\">{t('logout')}</h3>\n    </button>\n  )\n}\n\nexport default LogoutTile\n","/* global cozy */\nimport React, { Component } from 'react'\nimport PropTypes from 'react-proptypes'\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom'\nimport isObjectLike from 'lodash/isObjectLike'\nimport isArray from 'lodash/isArray'\nimport keys from 'lodash/keys'\nimport flatten from 'lodash/flatten'\n\nimport flag, { enable as enableFlags } from 'cozy-flags'\nimport minilog from 'minilog'\n\nimport Alerter from 'cozy-ui/react/Alerter'\nimport { Sprite as IconSprite } from 'cozy-ui/react/Icon'\nimport { Main } from 'cozy-ui/react/Layout'\nimport Spinner from 'cozy-ui/react/Spinner'\n\nimport appEntryPoint from 'components/appEntryPoint'\nimport HeroHeader from 'components/HeroHeader'\nimport Failure from 'components/Failure'\nimport Home from 'components/Home'\nimport IntentRedirect from 'components/IntentRedirect'\nimport StoreRedirection from 'components/StoreRedirection'\nimport ConnectionsQueue from 'ducks/connections/components/queue/index'\nimport DemoTimeline from 'assets/images/timeline.png'\n\nconst IDLE = 'idle'\nconst FETCHING_CONTEXT = 'FETCHING_CONTEXT'\n\nwindow.flag = window.flag || flag\nwindow.minilog = minilog\n\n// TODO add this to cozy-flags ?\nexport const toFlagNames = (flagName, prefix = '') => {\n  if (typeof flagName === 'string') return `${prefix}${flagName}`\n  else if (isArray(flagName))\n    return flatten(flagName.map(flagName => toFlagNames(flagName, prefix)))\n  else if (isObjectLike(flagName))\n    return flatten(\n      keys(flagName).map(key => toFlagNames(flagName[key], `${prefix}${key}.`))\n    )\n}\n\nclass App extends Component {\n  state = {\n    error: null,\n    status: IDLE\n  }\n\n  constructor(props, context) {\n    super(props, context)\n    this.store = context.store\n  }\n\n  componentDidMount() {\n    this.fetchContext()\n  }\n\n  async fetchContext() {\n    this.setState({\n      status: FETCHING_CONTEXT\n    })\n\n    const context = await cozy.client\n      .fetchJSON('GET', '/settings/context')\n      .catch(error => {\n        this.setState({\n          error,\n          status: IDLE\n        })\n      })\n\n    if (context && context.attributes && context.attributes.features) {\n      const flags = toFlagNames(context.attributes.features)\n      enableFlags(flags)\n    }\n\n    this.setState({\n      status: IDLE\n    })\n  }\n\n  render() {\n    const { accounts, konnectors, triggers } = this.props\n    const isFetching = [accounts, konnectors, triggers].find(collection =>\n      ['pending', 'loading'].includes(collection.fetchStatus)\n    )\n\n    const hasError = [accounts, konnectors, triggers].find(\n      collection => collection.fetchStatus === 'failed'\n    )\n\n    const { status } = this.state\n    const isFetchingContext = status === FETCHING_CONTEXT\n\n    const isReady = !hasError && !isFetching && !isFetchingContext\n    const showTimeline = flag('home.timeline.show') // used in demo envs\n\n    return (\n      <div className=\"App\">\n        <div\n          className=\"App-MainCol\"\n          ref={\n            isReady\n              ? div => {\n                  this.contentWrapper = div\n                }\n              : null\n          }\n        >\n          <Alerter />\n          <HeroHeader />\n          {hasError && (\n            <Main className=\"main-loader\">\n              <Failure errorType=\"initial\" />\n            </Main>\n          )}\n          {isFetching && (\n            <Main className=\"main-loader\">\n              <Spinner size=\"xxlarge\" />\n            </Main>\n          )}\n          {isReady && (\n            <Switch>\n              <Route path=\"/redirect\" component={IntentRedirect} />\n              <Route\n                path=\"/connected\"\n                render={() => (\n                  <Home base=\"/connected\" wrapper={this.contentWrapper} />\n                )}\n              />\n              <Route exact path=\"/providers\" component={StoreRedirection} />\n              <Route path=\"/providers/:category\" component={StoreRedirection} />\n              <Redirect exact from=\"/\" to=\"/connected\" />\n              <Redirect from=\"*\" to=\"/connected\" />\n            </Switch>\n          )}\n          <ConnectionsQueue />\n          <IconSprite />\n        </div>\n        {showTimeline && (\n          <div className=\"Timeline\">\n            <img src={DemoTimeline} width=\"420px\" />\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nApp.contextTypes = {\n  store: PropTypes.object\n}\n\n/*\nwithRouter is necessary here to deal with redux\nhttps://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/guides/blocked-updates.md\n*/\nexport default withRouter(appEntryPoint(App))\n","import { compose, createStore, applyMiddleware } from 'redux'\nimport { cozyMiddleware } from 'redux-cozy-client'\nimport { createLogger } from 'redux-logger'\nimport konnectorsI18nMiddleware from 'lib/middlewares/konnectorsI18n'\nimport thunkMiddleware from 'redux-thunk'\n\nimport CollectStore from 'lib/CollectStore'\nimport flag from 'cozy-flags'\nimport getReducers from 'reducers'\n\nconst configureStore = (legacyClient, cozyClient, context, options = {}) => {\n  // Enable Redux dev tools\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE || compose\n\n  const reduxStore = createStore(\n    getReducers(),\n    composeEnhancers(\n      applyMiddleware.apply(\n        this,\n        [\n          cozyMiddleware(legacyClient),\n          konnectorsI18nMiddleware(options.lang),\n          thunkMiddleware,\n          flag('redux-logger') ? createLogger() : null\n        ].filter(Boolean)\n      )\n    )\n  )\n\n  return Object.assign(\n    new CollectStore(context, cozyClient, options),\n    reduxStore\n  )\n}\n\nexport default configureStore\n","import { combineReducers } from 'redux'\nimport get from 'lodash/get'\n\nimport { reducer } from 'redux-cozy-client'\nimport apps from 'ducks/apps'\nimport * as fromAccounts from 'ducks/accounts'\nimport * as fromKonnectors from 'ducks/konnectors'\nimport * as fromTriggers from 'ducks/triggers'\nimport connections, * as fromConnections from 'ducks/connections'\n\nexport default () =>\n  combineReducers({\n    apps,\n    connections,\n    cozy: reducer\n  })\n\n// selectors\nexport const getInstalledKonnectors = state =>\n  fromKonnectors.getInstalledKonnectors(state.cozy)\n\nexport const getConnectionsByKonnector = (state, konnectorSlug) =>\n  fromConnections.getConnectionsByKonnector(\n    state.connections,\n    konnectorSlug,\n    fromAccounts.getIds(state.cozy),\n    fromKonnectors.getSlugs(state.cozy)\n  )\n\nexport const getConnectionsQueue = state =>\n  fromConnections.getQueue(\n    state.connections,\n    fromKonnectors.getIndexedKonnectors(state.cozy)\n  )\n\nexport const getCreatedConnectionAccount = state =>\n  fromAccounts.getAccount(\n    state.cozy,\n    fromConnections.getCreatedAccount(state.connections)\n  )\n\nexport const getKonnectorTriggersCount = (state, konnector) =>\n  fromTriggers.getKonnectorTriggers(\n    state.cozy,\n    konnector,\n    fromAccounts.getIds(state.cozy)\n  ).length\n\nexport const getTriggerByKonnectorAndAccount = (state, konnector, account) => {\n  const triggerId = fromConnections.getTriggerIdByKonnectorAndAccount(\n    state.connections,\n    konnector,\n    account,\n    fromAccounts.getIds(state.cozy)\n  )\n  return fromTriggers.getTrigger(state.cozy, triggerId)\n}\n\nexport const getTriggersByKonnector = (state, konnectorSlug) => {\n  const triggersInState = state.cozy.documents['io.cozy.triggers'] || {}\n  const triggers = Object.keys(triggersInState).reduce((acc, key) => {\n    const document = state.cozy.documents['io.cozy.triggers'][key]\n    if (\n      document.worker === 'konnector' &&\n      get(document, 'message.konnector') === konnectorSlug\n    ) {\n      acc.push(document)\n    }\n    return acc\n  }, [])\n  return triggers\n}\n\nexport const getTriggersInError = state => {\n  const triggers = get(state, ['cozy', 'documents', 'io.cozy.triggers'], {})\n\n  return Object.values(triggers).filter(trigger => {\n    const isInError = get(trigger, 'current_state.status') === 'errored'\n\n    return isInError\n  })\n}\n\nexport const getAccountsWithErrors = state => {\n  const accountsWithErrorsIds = getTriggersInError(state).map(trigger =>\n    get(trigger, 'message.account')\n  )\n  const accounts = get(state, ['cozy', 'documents', 'io.cozy.accounts'], {})\n\n  return Object.values(accounts).filter(({ _id }) =>\n    accountsWithErrorsIds.includes(_id)\n  )\n}\n","/* global cozy */\nimport React from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport { getInstalledKonnectors } from 'reducers'\n\nconst IntentRedirect = ({ installedKonnectors, location }) => {\n  const queryString = !!location && location.search\n  const query =\n    queryString &&\n    queryString\n      .substring(1)\n      .split('&')\n      .reduce((accumulator, keyValue) => {\n        const splitted = keyValue.split('=')\n        accumulator[splitted[0]] = splitted[1] || true\n        return accumulator\n      }, {})\n\n  if (!query.konnector) {\n    return <Redirect to={`/connected`} />\n  }\n\n  if (\n    !installedKonnectors.find(konnector => konnector.slug === query.konnector)\n  ) {\n    return cozy.client.intents.redirect('io.cozy.apps', {\n      slug: query.konnector\n    })\n  }\n\n  let redirectRoute = `/connected/${query.konnector}`\n\n  if (query.account) {\n    redirectRoute = `${redirectRoute}/accounts/${query.account}`\n  }\n\n  return <Redirect to={redirectRoute} />\n}\n\nconst mapStateToProps = state => ({\n  installedKonnectors: getInstalledKonnectors(state)\n})\n\nexport default connect(mapStateToProps)(IntentRedirect)\n","import { useState, useEffect } from 'react'\nimport { Registry } from 'cozy-client'\n\nconst useRegistryInformation = (client, slug) => {\n  const [appData, setAppData] = useState(null)\n  const registry = new Registry({\n    client\n  })\n\n  useEffect(\n    () => {\n      const fetchData = async () => {\n        const app = await registry.fetchApp(slug)\n        setAppData(app)\n      }\n      fetchData()\n    },\n    [slug]\n  )\n\n  return appData\n}\n\nexport default useRegistryInformation\n","import React from 'react'\n\nimport styles from 'styles/placeholder.styl'\n\nexport const LoadingPlaceholder = () => {\n  return <span className={styles['coz-loading-placeholder']} />\n}\n\nexport default LoadingPlaceholder\n","import { useState, useEffect } from 'react'\nimport homeConfig from 'config/collect'\n\nconst useCustomWallpaper = client => {\n  const [wallpaperLink, setWallpaperLink] = useState(null)\n  const [fetchStatus, setFetchStatus] = useState('idle')\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setFetchStatus('loading')\n        const response = await client\n          .collection('io.cozy.files')\n          .getDownloadLinkByPath(homeConfig.customWallpaperPath)\n        setWallpaperLink(response)\n        setFetchStatus('loaded')\n      } catch (error) {\n        setFetchStatus('failed')\n      }\n    }\n    fetchData()\n  }, [])\n\n  return {\n    data: { wallpaperLink },\n    fetchStatus\n  }\n}\n\nexport default useCustomWallpaper\n","import React from 'react'\nimport { useClient, useFetchShortcut } from 'cozy-client'\nimport get from 'lodash/get'\nimport Icon from 'cozy-ui/transpiled/react/Icon'\nimport useBreakpoints from 'cozy-ui/transpiled/react/hooks/useBreakpoints'\n\nconst ShortcutTile = ({ file }) => {\n  const client = useClient()\n  const { shortcutInfos } = useFetchShortcut(client, file._id)\n  const url = get(shortcutInfos, 'data.attributes.url', '#')\n  const shortcurtIcon = get(shortcutInfos, 'data.attributes.metadata.icon')\n  const label = file.name.substr(0, file.name.lastIndexOf('.'))\n  const { isMobile } = useBreakpoints()\n\n  return (\n    <a href={url} className=\"item\">\n      <div className=\"item-icon\">\n        {shortcurtIcon ? (\n          <img\n            src={`data:image/svg+xml;base64,${btoa(shortcurtIcon)}`}\n            width=\"100%\"\n            alt=\"\"\n          />\n        ) : (\n          <Icon\n            icon=\"device-browser\"\n            size={isMobile ? 32 : 40}\n            color=\"var(--charcoalGrey)\"\n          />\n        )}\n      </div>\n      <h3 className=\"item-title\">{label}</h3>\n    </a>\n  )\n}\n\nexport default ShortcutTile\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withClient } from 'cozy-client'\nimport get from 'lodash/get'\nimport useInstanceSettings from 'hooks/useInstanceSettings'\nimport useCustomWallpaper from 'hooks/useCustomWallpaper'\nimport flag from 'cozy-flags'\n\nimport LogoutButton from './LogoutButton'\nimport SettingsButton from './SettingsButton'\nimport HelpButton from './HelpButton'\n\nconst cornerButtons = [\n  {\n    flagName: 'help-is-displayed',\n    isDisplayedByDefault: true,\n    Button: HelpButton\n  },\n  {\n    flagName: 'settings-is-displayed',\n    isDisplayedByDefault: false,\n    Button: SettingsButton\n  },\n  {\n    flagName: 'logout-is-displayed',\n    isDisplayedByDefault: true,\n    Button: LogoutButton\n  }\n]\n\nconst flagWithFallbackValue = (flagName, fallback) =>\n  flag(flagName) === null ? fallback : flag(flagName)\n\nexport const HeroHeader = ({ client }) => {\n  const {\n    fetchStatus,\n    data: { wallpaperLink }\n  } = useCustomWallpaper(client)\n  const rootURL = client.getStackClient().uri\n  const { host } = new URL(rootURL)\n  const { cozyDefaultWallpaper } = client.getInstanceOptions()\n\n  let backgroundURL = null\n  if (fetchStatus !== 'loading')\n    backgroundURL = wallpaperLink || cozyDefaultWallpaper\n\n  const { data: instanceSettings } = useInstanceSettings(client)\n  const publicName = get(instanceSettings, 'public_name', '')\n\n  return (\n    <header\n      className=\"hero-header\"\n      style={{ backgroundImage: `url(${backgroundURL})` }}\n    >\n      <div className=\"corner\">\n        {cornerButtons.map(\n          ({ flagName, isDisplayedByDefault, Button }) =>\n            flagWithFallbackValue(\n              `home.corner.${flagName}`,\n              isDisplayedByDefault\n            ) ? (\n              <Button key={flagName} />\n            ) : null\n        )}\n      </div>\n      <div>\n        <img className=\"hero-avatar\" src={`${rootURL}/public/avatar`} />\n      </div>\n      <h1 className=\"hero-title\">{publicName}</h1>\n      <h2 className=\"hero-subtitle\">{host}</h2>\n    </header>\n  )\n}\n\nHeroHeader.propTypes = {\n  client: PropTypes.object.isRequired\n}\n\nexport default withClient(HeroHeader)\n","var map = {\n\t\"./en-SG\": \"zavE\",\n\t\"./en-SG.js\": \"zavE\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"iUaz\";","/* global cozy, PouchDB, pouchdbFind */\nimport {\n  startDoctypeSync,\n  syncDoctypeOk,\n  syncDoctypeError\n} from '../slices/synchronization'\n\nconst REPLICATION_INTERVAL = 30000\nexport const SYNC_BIDIRECTIONAL = 'SYNC_BIDIRECTIONAL'\nexport const SYNC_TO = 'SYNC_TO'\nexport const SYNC_FROM = 'SYNC_FROM'\n\nexport default class PouchdbAdapter {\n  constructor() {\n    PouchDB.plugin(pouchdbFind)\n    this.instances = {}\n    this.doctypes = []\n  }\n\n  registerDoctypes(doctypes) {\n    this.doctypes = doctypes\n  }\n\n  getDatabase(doctype) {\n    return cozy.client.offline.getDatabase(doctype) // For now we let cozy-client-js creates PouchDB instances\n  }\n\n  getReplicationBaseUrl() {\n    return cozy.client.authorize().then(credentials => {\n      const basic = credentials.token.toBasicAuth()\n      return `${cozy.client._url}/data/`.replace('//', `//${basic}`)\n    })\n  }\n\n  getSeqNumber(doctype) {\n    return this.getDatabase(doctype)\n      .info()\n      .then(result => result.update_seq)\n  }\n\n  async sync(dispatch, direction = SYNC_BIDIRECTIONAL) {\n    const baseUrl = await this.getReplicationBaseUrl()\n    for (let doctype of this.doctypes) {\n      const seqNumber = await this.getSeqNumber(doctype)\n      await dispatch(startDoctypeSync(doctype, seqNumber))\n      this.syncDoctype(doctype, `${baseUrl}${doctype}`, dispatch, direction)\n    }\n  }\n\n  syncDoctype(\n    doctype,\n    replicationUrl,\n    dispatch,\n    direction = SYNC_BIDIRECTIONAL\n  ) {\n    return new Promise((resolve, reject) => {\n      const db = this.getDatabase(doctype)\n\n      let syncHandler\n      if (direction === SYNC_TO) syncHandler = db.replicate.to(replicationUrl)\n      else if (direction === SYNC_FROM)\n        syncHandler = db.replicate.from(replicationUrl)\n      else syncHandler = db.sync(replicationUrl)\n\n      syncHandler\n        .on('complete', info => {\n          dispatch(syncDoctypeOk(doctype, info))\n          this.scheduleNextSync(doctype, replicationUrl, dispatch, direction)\n          resolve(info)\n        })\n        .on('error', err => {\n          if (err.error === 'code=400, message=Expired token') {\n            return cozy.client.authorize().then(({ client, token }) => {\n              cozy.client.auth\n                .refreshToken(cozy, client, token)\n                .then(newToken => cozy.client.saveCredentials(client, newToken))\n                .then(() => this.syncDoctype(doctype, replicationUrl))\n            })\n          } else if (err.status !== 404) {\n            // A 404 error on some doctypes is perfectly normal when there is no data\n            dispatch(syncDoctypeError(doctype, err))\n            this.scheduleNextSync(doctype, replicationUrl, dispatch)\n            reject(err)\n          }\n        })\n    })\n  }\n\n  scheduleNextSync(doctype, replicationUrl, dispatch, direction) {\n    setTimeout(() => {\n      this.syncDoctype(doctype, replicationUrl, dispatch, direction)\n    }, REPLICATION_INTERVAL)\n  }\n\n  async fetchDocuments(doctype) {\n    const resp = await this.getDatabase(doctype).allDocs({ include_docs: true })\n    return {\n      data: resp.rows\n        .filter(row => !row.doc.hasOwnProperty('views'))\n        .map(row => ({ ...row.doc, id: row.id, _type: doctype })),\n      meta: { count: resp.total_rows },\n      skip: resp.offset,\n      next: false\n    }\n  }\n\n  async queryDocuments(doctype, index, options) {\n    const queryOptions = {\n      ...options,\n      fields: [...options.fields, '_id'],\n      sort: options.sort\n        ? Object.keys(options.sort).map(k => ({ [k]: options.sort[k] }))\n        : undefined\n    }\n    const resp = await this.getDatabase(doctype).find(queryOptions)\n\n    return {\n      data: resp.docs.map(doc => ({ ...doc, id: doc._id, _type: doctype })),\n      meta: { count: resp.docs.length },\n      skip: 0,\n      next: false\n    }\n  }\n\n  async fetchDocument(doctype, id) {\n    const resp = await this.getDatabase(doctype).get(id, { revs_info: true }) // We need the revs_info option to get the _rev property\n    return { data: [{ ...resp, id: resp.id, _id: resp.id, _type: doctype }] }\n  }\n\n  async createDocument(doctype, doc) {\n    const resp = await this.getDatabase(doctype).post(doc)\n    return {\n      data: [\n        { ...doc, id: resp.id, _id: resp.id, _type: doctype, _rev: resp.rev }\n      ]\n    }\n  }\n\n  async updateDocument(doc) {\n    // TODO: _* properties are reserved by CouchDB, so we can't send the doc with its _type property...\n    const { _type, ...safeDoc } = doc\n    const resp = await this.getDatabase(_type).put(safeDoc)\n    return { data: [{ ...doc, _rev: resp.rev }] }\n  }\n\n  async deleteDocument(doc) {\n    await this.getDatabase(doc._type).remove(doc)\n    return { data: [doc] }\n  }\n\n  createIndex(doctype, fields) {\n    return this.getDatabase(doctype).createIndex({ index: { fields } })\n  }\n\n  fetchFileByPath() {\n    throw new Error('Not implemented')\n  }\n\n  createFile() {\n    throw new Error('Not implemented')\n  }\n\n  trashFile() {\n    throw new Error('Not implemented')\n  }\n\n  fetchReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n\n  addReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n\n  removeReferencedFiles() {\n    throw new Error('Not implemented')\n  }\n}\n","var map = {\n\t\"./en.json\": \"8WAw\",\n\t\"./fr.json\": \"H488\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"kGy0\";","export { default as CozyProvider } from './CozyProvider'\nexport { default as CozyClient } from './CozyClient'\nexport { default as cozyConnect } from './connect'\nexport { default as cozyMiddleware } from './middleware'\nexport {\n  default as reducer,\n  makeActionCreator,\n  fetchApps,\n  fetchCollection,\n  fetchDocument,\n  fetchReferencedFiles,\n  fetchKonnectors,\n  fetchTriggers,\n  addReferencedFiles,\n  removeReferencedFiles,\n  applySelectorForAction,\n  enhancePropsForActions,\n  getCollection,\n  getDocument,\n  createDocument,\n  createTrigger,\n  launchTrigger,\n  updateDocument,\n  deleteDocument,\n  deleteTrigger,\n  createFile,\n  trashFile,\n  CREATE_DOCUMENT\n} from './reducer'\nexport {\n  fetchSharings,\n  fetchContacts,\n  getSharingDetails,\n  share,\n  unshare,\n  leave,\n  shareByLink,\n  revokeLink\n} from './slices/sharings'\nexport { startSync, isFirstSync, isSynced } from './slices/synchronization'\n\nexport { downloadArchive, downloadFile } from './helpers'\n","import { cozyConnect } from 'redux-cozy-client'\n\nimport { fetchAccounts } from 'ducks/accounts'\nimport { fetchKonnectors } from 'ducks/konnectors'\nimport { fetchKonnectorJobs } from 'ducks/jobs'\nimport { fetchTriggers } from 'ducks/triggers'\nimport '../flags'\n\nconst mapDocumentsToProps = () => ({\n  accounts: fetchAccounts(),\n  jobs: fetchKonnectorJobs(),\n  konnectors: fetchKonnectors(),\n  triggers: fetchTriggers()\n})\n\nconst appEntryPoint = (WrappedComponent, selectData) =>\n  cozyConnect(mapDocumentsToProps)(WrappedComponent, selectData)\n\nexport default appEntryPoint\n","/* global cozy */\nimport React, { Component } from 'react'\n\nimport Spinner from 'cozy-ui/react/Spinner'\n\nexport class StoreRedirection extends Component {\n  constructor(props) {\n    super(props)\n    const category = props.match && props.match.params.category\n    const options = { type: 'konnector' }\n    if (category && category !== 'all') {\n      options.category = props.match.params.category\n    }\n    cozy.client.intents.redirect('io.cozy.apps', options)\n  }\n\n  render() {\n    return <Spinner size=\"xxlarge\" middle />\n  }\n}\n\nexport default StoreRedirection\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport get from 'lodash/get'\nimport { withClient } from 'cozy-client'\n\nconst fetchHomeLogos = async client => {\n  try {\n    const rootURL = client.getStackClient().uri\n    const context = await client\n      .getStackClient()\n      .fetchJSON('GET', '/settings/context')\n    const logos = get(context, 'data.attributes.home_logos', {})\n\n    return Object.keys(logos).reduce((acc, logoSrc) => {\n      acc[`${rootURL}/assets${logoSrc}`] = logos[logoSrc]\n      return acc\n    }, {})\n  } catch (error) {\n    return {}\n  }\n}\n\nexport class FooterLogo extends React.Component {\n  state = {\n    logos: {}\n  }\n\n  async componentDidMount() {\n    const logos = await fetchHomeLogos(this.props.client)\n    this.setState({ logos })\n  }\n\n  render() {\n    const { logos } = this.state\n    return Object.keys(logos).length === 0 ? (\n      false\n    ) : (\n      <div className=\"u-maw-7 u-mh-auto u-mt-1 u-pv-1 u-flex u-flex-row u-flex-items-center u-flex-justify-center u-flex-wrap\">\n        {Object.entries(logos).map(([logoSrc, logoAlt]) => (\n          <img\n            key={logoSrc}\n            src={logoSrc}\n            alt={logoAlt}\n            className=\"u-ph-1 u-pv-half u-mah-5\"\n          />\n        ))}\n      </div>\n    )\n  }\n}\n\nPropTypes.propTypes = {\n  client: PropTypes.object\n}\n\nexport default withClient(FooterLogo)\n","import flag from 'cozy-flags'\n\nflag('harvest.bi-konnector-policy', true)\n","export const mapValues = (object, transform) => {\n  let result = {}\n  for (const key in object) {\n    result[key] = transform(object[key], key)\n  }\n  return result\n}\n\nexport const filterValues = (object, filter) => {\n  let result = {}\n  for (const key in object) {\n    if (filter(object[key], key)) {\n      result[key] = object[key]\n    }\n  }\n  return result\n}\n\nexport const removeObjectProperty = (obj, prop) => {\n  return Object.keys(obj).reduce((result, key) => {\n    if (key !== prop) {\n      result[key] = obj[key]\n    }\n    return result\n  }, {})\n}\n","import { combineReducers } from 'redux'\nimport { getTracker } from 'cozy-ui/react/helpers/tracker'\nimport { getDocument, createDocument, fetchCollection } from '../reducer'\n\nexport const FETCH_SHARINGS = 'FETCH_SHARINGS'\nconst RECEIVE_SHARINGS_DATA = 'RECEIVE_SHARINGS_DATA'\nconst RECEIVE_FETCH_SHARINGS_ERROR = 'RECEIVE_FETCH_SHARINGS_ERROR'\nconst CREATE_SHARING = 'CREATE_SHARING'\nconst RECEIVE_NEW_SHARING = 'RECEIVE_NEW_SHARING'\nconst CREATE_SHARING_LINK = 'CREATE_SHARING_LINK'\nconst RECEIVE_NEW_SHARING_LINK = 'RECEIVE_NEW_SHARING_LINK'\nconst REVOKE_SHARING_LINK = 'REVOKE_SHARING_LINK'\nconst RECEIVE_SHARING_LINK_REVOKE = 'RECEIVE_SHARING_LINK_REVOKE'\nconst REVOKE_SHARING = 'REVOKE_SHARING'\nconst RECEIVE_SHARING_REVOKE = 'RECEIVE_SHARING_REVOKE'\nconst RECEIVE_ERROR = 'RECEIVE_ERROR'\n\nconst removeRecipient = (recipients, recipientId) => {\n  const idx = recipients.findIndex(r => r.recipient.id === recipientId)\n  return [...recipients.slice(0, idx), ...recipients.slice(idx + 1)]\n}\n\nconst documents = (state = [], action) => {\n  switch (action.type) {\n    case RECEIVE_SHARINGS_DATA:\n      return action.response.sharings\n    case RECEIVE_NEW_SHARING:\n      return [...state, action.response]\n    case RECEIVE_SHARING_REVOKE: {\n      const idx = state.findIndex(\n        s => s.attributes.sharing_id === action.sharingId\n      )\n      if (idx === -1) return state\n      const sharing = state[idx]\n      const loneRecipient =\n        sharing.attributes.recipients === undefined || // for recipient-side revocation\n        sharing.attributes.recipients.length === 1\n      const newState = loneRecipient\n        ? { ...sharing, attributes: { ...sharing.attributes, revoked: true } }\n        : {\n            ...sharing,\n            attributes: {\n              ...sharing.attributes,\n              recipients: removeRecipient(\n                sharing.attributes.recipients,\n                action.recipientId\n              )\n            }\n          }\n      return [...state.slice(0, idx), newState, ...state.slice(idx + 1)]\n    }\n    default:\n      return state\n  }\n}\n\nconst doctypePermsetInitialState = {\n  fetchStatus: 'loading',\n  byMe: [],\n  byLink: [],\n  withMe: []\n}\n\nconst permissions = (state = {}, action) => {\n  let idx\n  switch (action.type) {\n    case FETCH_SHARINGS:\n      if (state[action.doctype]) {\n        return {\n          ...state,\n          [action.doctype]: { ...state[action.doctype], fetchStatus: 'loading' }\n        }\n      }\n      return { ...state, [action.doctype]: doctypePermsetInitialState }\n    case RECEIVE_SHARINGS_DATA:\n      return {\n        ...state,\n        [action.doctype]: {\n          fetchStatus: 'loaded',\n          ...action.response.permissions\n        }\n      }\n    case RECEIVE_FETCH_SHARINGS_ERROR:\n      return { ...state, [action.doctype]: { fetchStatus: 'error' } }\n    case RECEIVE_NEW_SHARING:\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byMe: [\n            ...state[action.doctype].byMe,\n            {\n              attributes: {\n                permissions: {\n                  rule0: { type: action.doctype, values: [action.id] }\n                },\n                source_id: action.response.attributes.sharing_id,\n                type: 'io.cozy.sharings'\n              }\n            }\n          ]\n        }\n      }\n    case RECEIVE_NEW_SHARING_LINK:\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byLink: [...state[action.doctype].byLink, action.response]\n        }\n      }\n    case REVOKE_SHARING_LINK:\n      idx = state[action.doctype].byLink.findIndex(\n        p => action.permission._id === p._id\n      )\n      if (idx === -1) return state\n      return {\n        ...state,\n        [action.doctype]: {\n          ...state[action.doctype],\n          byLink: [\n            ...state[action.doctype].byLink.slice(0, idx),\n            ...state[action.doctype].byLink.slice(idx + 1)\n          ]\n        }\n      }\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({ documents, permissions })\n\n// actions\nexport const fetchSharings = (doctype, id = null, options = {}) => ({\n  types: [FETCH_SHARINGS, RECEIVE_SHARINGS_DATA, RECEIVE_FETCH_SHARINGS_ERROR],\n  doctype,\n  id,\n  options,\n  promise: client => client.fetchSharings(doctype)\n})\n\nexport const share = (\n  document,\n  recipients,\n  sharingType,\n  sharingDesc\n) => async dispatch => {\n  const recipientIds = await Promise.all(\n    recipients.map(\n      recipient =>\n        recipient.id ||\n        dispatch(createContact(recipient)).then(c => c.data[0].id)\n    )\n  )\n  trackSharingByEmail(document)\n  return dispatch(\n    createSharing(document, recipientIds, sharingType, sharingDesc)\n  )\n}\n\nexport const unshare = (document, recipient) => async (dispatch, getState) => {\n  const sharing = getSharingForRecipient(getState(), document, recipient)\n  const loneRecipient = sharing.attributes.recipients.length === 1\n  return dispatch({\n    types: [REVOKE_SHARING, RECEIVE_SHARING_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    sharingId: sharing.attributes.sharing_id,\n    recipientId: recipient._id,\n    promise: client =>\n      loneRecipient\n        ? client.revokeSharing(sharing.attributes.sharing_id)\n        : client.revokeSharingForClient(\n            sharing.attributes.sharing_id,\n            sharing.attributes.recipients.find(\n              r => r.recipient.id === recipient._id\n            ).Client.client_id\n          )\n  })\n}\n\nexport const leave = document => async (dispatch, getState) => {\n  const sharings = getDocumentActiveSharings(\n    getState(),\n    document._type,\n    document._id\n  )\n  const sharing = sharings.find(s => s.attributes.owner === false)\n  return dispatch({\n    types: [REVOKE_SHARING, RECEIVE_SHARING_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    sharingId: sharing.attributes.sharing_id,\n    promise: client => client.revokeSharing(sharing.attributes.sharing_id)\n  })\n}\n\nexport const shareByLink = document => {\n  trackSharingByLink(document)\n  return createSharingLink(document)\n}\n\nexport const revokeLink = document => async (dispatch, getState) => {\n  const perm = getSharingLinkPermission(\n    getState(),\n    document._type,\n    document._id\n  )\n  return dispatch({\n    types: [REVOKE_SHARING_LINK, RECEIVE_SHARING_LINK_REVOKE, RECEIVE_ERROR],\n    doctype: document._type,\n    id: document._id,\n    permission: perm,\n    promise: client => client.revokeSharingLink(perm)\n  })\n}\n\nconst createSharing = (\n  document,\n  contactIds,\n  sharingType = 'master-slave',\n  description = ''\n) => ({\n  types: [CREATE_SHARING, RECEIVE_NEW_SHARING, RECEIVE_ERROR],\n  doctype: document._type,\n  id: document._id,\n  promise: client =>\n    client.createSharing(\n      getPermissionsFor(document),\n      contactIds,\n      sharingType,\n      description\n    )\n})\n\nconst createSharingLink = document => ({\n  types: [CREATE_SHARING_LINK, RECEIVE_NEW_SHARING_LINK, RECEIVE_ERROR],\n  doctype: document._type,\n  id: document._id,\n  promise: client => client.createSharingLink(getPermissionsFor(document, true))\n})\n\n// TODO: this is a poor man's migration in order to normalize contacts\n// and should be removed after a few weeks in prod\n// Note for future-self: If you have no idea of what it means, please, erase this code.\n// Note for time-travelers: please travel a little more back in time in order to advise us\n// to get contacts right the first time\nexport const fetchContacts = () => {\n  const action = fetchCollection('contacts', 'io.cozy.contacts')\n  action.promise = async client => {\n    const response = await client.fetchCollection(\n      'contacts',\n      'io.cozy.contacts'\n    )\n    const data = await Promise.all(\n      response.data.map(contact => {\n        return typeof contact.email !== 'string'\n          ? contact\n          : client\n              .updateDocument({\n                ...contact,\n                email: [\n                  {\n                    address: contact.email,\n                    primary: true\n                  }\n                ]\n              })\n              .then(resp => resp.data[0])\n      })\n    )\n\n    return { ...response, data }\n  }\n  return action\n}\n\nconst createContact = ({ email }) =>\n  createDocument('io.cozy.contacts', {\n    email: [{ address: email, primary: true }]\n  })\n\nconst getPermissionsFor = (document, publicLink = false) => {\n  const { _id, _type } = document\n  const verbs = publicLink ? ['GET'] : ['ALL']\n  // TODO: this works for albums, but it needs to be generalized and integrated\n  // with cozy-client ; some sort of doctype \"schema\" will be needed here\n  return isFile(document)\n    ? {\n        files: {\n          type: 'io.cozy.files',\n          verbs,\n          values: [_id]\n        }\n      }\n    : {\n        collection: {\n          type: _type,\n          verbs,\n          values: [_id]\n        },\n        files: {\n          type: 'io.cozy.files',\n          verbs,\n          values: [`${_type}/${_id}`],\n          selector: 'referenced_by'\n        }\n      }\n}\n\n// selectors\nconst getSharing = (state, id) =>\n  state.cozy.sharings.documents.find(s => s.attributes.sharing_id === id)\nconst getContact = (state, id) => getDocument(state, 'io.cozy.contacts', id)\nconst getDoctypePermissions = (state, doctype) => {\n  if (state.cozy.sharings.permissions[doctype]) {\n    return state.cozy.sharings.permissions[doctype]\n  }\n  return doctypePermsetInitialState\n}\n\nconst getSharingLink = (state, doctype, id) => {\n  const perm = getSharingLinkPermission(state, doctype, id)\n  return perm\n    ? buildSharingLink(id, doctype, perm.attributes.codes.email)\n    : null\n}\n\nconst getSharingLinkPermission = (state, doctype, id) => {\n  const perms = getDoctypePermissions(state, doctype)\n  const type = isFile({ _type: doctype }) ? 'files' : 'collection'\n  return perms.byLink.find(\n    p => p.attributes.permissions[type].values.indexOf(id) !== -1\n  )\n}\n\nconst getSharingForRecipient = (state, document, recipient) => {\n  const sharings = getDocumentActiveSharings(\n    state,\n    document._type,\n    document._id\n  )\n  return sharings.find(s =>\n    s.attributes.recipients.find(r => r.recipient.id === recipient._id)\n  )\n}\n\nconst getDocumentActiveSharings = (state, doctype, id) => {\n  const perms = getDoctypePermissions(state, doctype)\n  return [\n    ...perms.byMe.filter(\n      perm => perm.attributes.permissions['rule0'].values.indexOf(id) !== -1\n    ),\n    ...perms.withMe.filter(\n      perm => perm.attributes.permissions['rule0'].values.indexOf(id) !== -1\n    )\n  ]\n    .map(p => getSharing(state, p.attributes.source_id))\n    .filter(s => !s.attributes.revoked)\n}\n\nexport const getSharings = (state, doctype) => {\n  const perms = getDoctypePermissions(state, doctype)\n  const type = doctype === 'io.cozy.files' ? 'files' : 'collection'\n  return {\n    byMe: perms.byMe.map(p => p.attributes.permissions['rule0'].values[0]),\n    withMe: perms.withMe.map(p => p.attributes.permissions['rule0'].values[0]),\n    byLink: perms.byLink.map(p => p.attributes.permissions[type].values[0])\n  }\n}\n\nexport const getSharingStatus = (state, doctype, id) => {\n  const sharings = getDocumentActiveSharings(state, doctype, id)\n  return {\n    shared: sharings.length !== 0,\n    owner:\n      sharings.length === 0 || sharings.some(s => s.attributes.owner === true),\n    sharingType: sharings.some(\n      s => s.attributes.sharing_type === 'master-master'\n    )\n      ? 'master-master'\n      : 'master-slave',\n    sharings\n  }\n}\n\nexport const getSharingDetails = (state, doctype, id) => {\n  const { shared, owner, sharingType, sharings } = getSharingStatus(\n    state,\n    doctype,\n    id\n  )\n  const sharingLink = getSharingLink(state, doctype, id)\n  return {\n    shared,\n    owner,\n    sharingType,\n    sharingLink,\n    sharer:\n      shared && !owner\n        ? { name: 'John Doe', url: sharings[0].attributes.sharer.url }\n        : null,\n    readOnly: !owner && sharingType === 'master-slave',\n    recipients: shared && owner ? getSharingRecipients(state, sharings) : [],\n    byMe: shared && owner === true,\n    withMe: shared && !owner,\n    byLink: !!sharingLink\n  }\n}\n\nconst getSharingRecipients = (state, sharings) =>\n  sharings\n    .filter(sharing => sharing.attributes.recipients)\n    .map(sharing =>\n      sharing.attributes.recipients.map(info => ({\n        contact: getContact(state, info.recipient.id),\n        status: info.status,\n        type: sharing.attributes.sharing_type\n      }))\n    )\n    .reduce((a, b) => a.concat(b), [])\n\nconst buildSharingLink = (id, doctype, sharecode) =>\n  `${window.location.origin}/public?sharecode=${sharecode}&id=${id}${\n    doctype === 'file' ? '&directdownload' : ''\n  }`\n\n// helpers\nconst isFile = ({ _type, type }) =>\n  _type === 'io.cozy.files' || type === 'directory' || type === 'file'\n\nconst track = (document, action) => {\n  const tracker = getTracker()\n  if (!tracker) {\n    return\n  }\n  tracker.push([\n    'trackEvent',\n    isFile(document) ? 'Drive' : 'Photos',\n    action,\n    `${action}${isFile(document) ? 'File' : 'Album'}`\n  ])\n}\nconst trackSharingByLink = document => track(document, 'shareByLink')\nconst trackSharingByEmail = document => track(document, 'shareByEmail')\n","import { useState, useEffect } from 'react'\nimport get from 'lodash/get'\n\nimport { Q } from 'cozy-client'\n\nconst useInstanceSettings = client => {\n  const [settings, setSettings] = useState({})\n  const [fetchStatus, setFetchStatus] = useState('idle')\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setFetchStatus('loading')\n        const response = await client.query(\n          Q('io.cozy.settings').getById('instance')\n        )\n        setSettings(get(response, 'data.attributes'), {})\n        setFetchStatus('loaded')\n      } catch (error) {\n        setFetchStatus('failed')\n      }\n    }\n    fetchData()\n  }, [])\n\n  return {\n    data: settings,\n    fetchStatus\n  }\n}\n\nexport default useInstanceSettings\n","import * as fromCozyClient from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.triggers'\n\nconst triggersCollectionKey = 'triggers'\n\n// CRUD action creators\n\nexport const fetchTriggers = () =>\n  fromCozyClient.fetchTriggers(triggersCollectionKey, 'konnector')\n\n// selectors\nexport const getKonnectorTriggers = (\n  state,\n  konnector,\n  existingAccountIds = []\n) => {\n  return (\n    (!!state.documents[DOCTYPE] &&\n      Object.values(state.documents[DOCTYPE]).filter(trigger => {\n        return (\n          trigger.worker === 'konnector' &&\n          trigger.message &&\n          trigger.message.konnector === konnector.slug &&\n          trigger.message.account &&\n          existingAccountIds.includes(trigger.message.account)\n        )\n      })) ||\n    []\n  )\n}\n\nexport const getTrigger = (state, id) =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  state.documents[DOCTYPE][id]\n","import Queue from './queue'\nimport { connect } from 'react-redux'\n\nimport { getConnectionsQueue } from 'reducers'\n\nimport { purgeQueue } from 'ducks/connections'\n\nconst mapStateToProps = state => {\n  const queue = getConnectionsQueue(state)\n  return {\n    queue: queue,\n    visible: !!queue.length\n  }\n}\nconst mapDispatchToProps = dispatch => ({\n  purgeQueue: () => dispatch(purgeQueue())\n})\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Queue)\n","import DateFns from 'date-fns'\nconst DOCTYPE = 'io.cozy.jobs'\n\n// CRUD\n\nexport const fetchKonnectorJobs = () => {}\n\n// selectors\n\nexport const getTriggerLastJob = (state, trigger) => {\n  // state is state.cozy\n  if (!state.documents || !state.documents[DOCTYPE] || !trigger) return null\n  return Object.values(state.documents[DOCTYPE]).reduce(\n    (lastestJob, currentJob) => {\n      if (currentJob.trigger_id !== trigger._id) return lastestJob\n      if (!lastestJob) return currentJob\n      return DateFns.isAfter(currentJob.started_at, lastestJob.started_at)\n        ? currentJob\n        : lastestJob\n    },\n    null\n  )\n}\n\nexport const isJobRunning = (state, job) =>\n  !!job && ['queued', 'running'].includes(job.state)\n","const START_SYNC = 'START_SYNC'\nconst START_DOCTYPE_SYNC = 'START_DOCTYPE_SYNC'\nconst SYNC_DOCTYPE_OK = 'SYNC_DOCTYPE_OK'\nconst SYNC_DOCTYPE_ERROR = 'SYNC_DOCTYPE_ERROR'\n\nconst doctypeSyncInitialState = {\n  syncStatus: 'pending',\n  lastSync: null,\n  seqNumber: 0\n}\n\nconst doctypeSync = (state = doctypeSyncInitialState, action) => {\n  switch (action.type) {\n    case START_DOCTYPE_SYNC:\n      return {\n        ...state,\n        syncStatus: 'syncing',\n        seqNumber: action.seqNumber\n      }\n    case SYNC_DOCTYPE_OK:\n      return {\n        ...state,\n        syncStatus: 'done',\n        lastSync: Date.now()\n      }\n    case SYNC_DOCTYPE_ERROR:\n      return {\n        ...state,\n        syncStatus: 'error',\n        lastSync: Date.now()\n      }\n    default:\n      return state\n  }\n}\n\nconst synchronization = (state = {}, action) => {\n  switch (action.type) {\n    case START_DOCTYPE_SYNC:\n    case SYNC_DOCTYPE_OK:\n    case SYNC_DOCTYPE_ERROR:\n      return {\n        ...state,\n        [action.doctype]: doctypeSync(state[action.doctype], action)\n      }\n    default:\n      return state\n  }\n}\n\nexport default synchronization\n\nexport const startSync = () => async dispatch => {\n  return dispatch({\n    type: START_SYNC,\n    promise: client => client.startSync(dispatch)\n  })\n}\n\nexport const startDoctypeSync = (doctype, seqNumber = 0) => ({\n  type: START_DOCTYPE_SYNC,\n  doctype,\n  seqNumber\n})\n\nexport const syncDoctypeOk = (doctype, infos) => ({\n  type: SYNC_DOCTYPE_OK,\n  doctype,\n  infos\n})\n\nexport const syncDoctypeError = (doctype, error) => ({\n  type: SYNC_DOCTYPE_ERROR,\n  doctype,\n  error\n})\n\nexport const isFirstSync = state => {\n  const seqNumbers = Object.keys(state.cozy.synchronization).map(\n    doctype => state.cozy.synchronization[doctype].seqNumber\n  )\n  return seqNumbers.every(number => number === 0)\n}\n\nexport const isSynced = state => {\n  const timestamps = Object.keys(state.cozy.synchronization).map(\n    doctype => state.cozy.synchronization[doctype].lastSync\n  )\n  return timestamps.every(ts => ts !== null)\n}\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport flow from 'lodash/flow'\n\nimport { Routes as HarvestRoutes } from 'cozy-harvest-lib'\nimport { getKonnector } from 'ducks/konnectors'\n\nimport { getTriggersByKonnector } from 'reducers'\nimport { withClient } from 'cozy-client/dist/hoc'\n\nclass Konnector extends Component {\n  render() {\n    const { konnector, history, triggers } = this.props\n    const konnectorWithtriggers = { ...konnector, triggers: { data: triggers } }\n\n    return (\n      <HarvestRoutes\n        konnectorRoot={`/connected/${konnector.slug}`}\n        konnector={konnectorWithtriggers}\n        onDismiss={() => history.push('/connected')}\n      />\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const { konnectorSlug } = ownProps.match.params\n  return {\n    konnector: getKonnector(state.cozy, konnectorSlug),\n    triggers: getTriggersByKonnector(state, konnectorSlug)\n  }\n}\n\nexport default flow(\n  connect(mapStateToProps),\n  withClient,\n  withRouter\n)(Konnector)\n","import * as fromCozyClient from 'redux-cozy-client'\n\nexport const DOCTYPE = 'io.cozy.konnectors'\nconst konnectorsCollectionKey = 'konnectors'\n\n// CRUD\n\nexport const fetchKonnectors = () =>\n  fromCozyClient.fetchKonnectors(konnectorsCollectionKey)\n\n// Action creators\nexport const receiveInstalledKonnector = konnector => {\n  const normalized = {\n    ...konnector,\n    ...konnector.attributes,\n    id: `${DOCTYPE}/${konnector.slug}`,\n    _type: DOCTYPE\n  }\n\n  return {\n    doctype: DOCTYPE,\n    type: 'RECEIVE_NEW_DOCUMENT',\n    response: { data: [normalized] },\n    updateCollections: ['konnectors']\n  }\n}\n\n// Selectors\nexport const getKonnector = (state, slug) => {\n  return (\n    !!state.documents &&\n    !!state.documents[DOCTYPE] &&\n    state.documents[DOCTYPE][`${DOCTYPE}/${slug}`]\n  )\n}\n\nexport const getInstalledKonnectors = state =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.values(state.documents[DOCTYPE])\n\nexport const getIndexedKonnectors = state =>\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.keys(state.documents[DOCTYPE]).reduce((indexed, key) => {\n    const konnector = state.documents[DOCTYPE][key]\n    indexed[konnector.slug] = konnector\n    return indexed\n  }, {})\n\nexport const getSlugs = state =>\n  !!state &&\n  !!state.documents &&\n  !!state.documents[DOCTYPE] &&\n  Object.values(state.documents[DOCTYPE]).map(konnector => konnector.slug)\n","import SpriteSymbol from \"svg-baker-runtime/browser-symbol\";\nimport sprite from \"svg-sprite-loader/runtime/browser-sprite.build\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"default_e8acf04a531f51e2591973ab13ba63d7\",\n  \"use\": \"default_e8acf04a531f51e2591973ab13ba63d7-usage\",\n  \"viewBox\": \"0 0 64 64\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\" id=\\\"default_e8acf04a531f51e2591973ab13ba63d7\\\">\\n  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n    <path fill=\\\"#855CEA\\\" fill-rule=\\\"nonzero\\\" d=\\\"M32,17.3818748 C38.4788008,17.3818748 43.7310547,22.7384047 43.7310547,29.3455954 C43.7310547,35.9527861 38.4788008,41.3093161 32,41.3093161 C25.5211992,41.3093161 20.2689453,35.9527861 20.2689453,29.3455954 C20.2689453,22.7384047 25.5211992,17.3818748 32,17.3818748 Z M32,58.9450016 C24.97375,58.9450016 18.6050907,56.0787139 14,51.4547232 C17.8412687,47.7235961 24.4673594,45.2587711 32,45.2587711 C39.5326406,45.2587711 46.1587313,47.7235961 50,51.4547232 C45.3949093,56.0787139 39.02625,58.9450016 32,58.9450016 Z\\\" />\\n    <g transform=\\\"translate(3)\\\">\\n      <circle cx=\\\"29\\\" cy=\\\"32\\\" r=\\\"27\\\" stroke=\\\"#C2ADF4\\\" stroke-width=\\\"4\\\" />\\n      <circle cx=\\\"29\\\" cy=\\\"6\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n      <circle cx=\\\"29\\\" cy=\\\"58\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n      <circle cx=\\\"52\\\" cy=\\\"47\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n      <circle cx=\\\"6\\\" cy=\\\"47\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n      <circle cx=\\\"52\\\" cy=\\\"18\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n      <circle cx=\\\"6\\\" cy=\\\"18\\\" r=\\\"6\\\" fill=\\\"#C2ADF4\\\" />\\n    </g>\\n  </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","const cozyMiddleware = client => ({ dispatch }) => {\n  return next => action => {\n    const { promise, type, types, ...rest } = action\n    if (!promise) {\n      return next(action)\n    }\n\n    if (!type && !types) {\n      return promise(client).then(action => dispatch(action))\n    }\n\n    if (type) {\n      return promise(client).then(response => {\n        next({ ...rest, response, type })\n        return response\n      })\n    }\n\n    const [REQUEST, SUCCESS, FAILURE] = types\n    next({ ...rest, type: REQUEST })\n\n    return promise(client)\n      .then(\n        response => {\n          next({ ...rest, response, type: SUCCESS })\n          return response\n        },\n        error => {\n          console.log(error) // eslint-disable-line no-console\n          next({ ...rest, error, type: FAILURE })\n        }\n      )\n      .catch(error => {\n        console.error('MIDDLEWARE ERROR:', error) // eslint-disable-line no-console\n        next({ ...rest, error, type: FAILURE })\n      })\n  }\n}\n\nexport default cozyMiddleware\n","var map = {\n\t\"./en\": \"Us+F\",\n\t\"./en/\": \"Us+F\",\n\t\"./en/build_distance_in_words_locale\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/index\": \"LZbM\",\n\t\"./en/build_distance_in_words_locale/index.js\": \"LZbM\",\n\t\"./en/build_format_locale\": \"6DAA\",\n\t\"./en/build_format_locale/\": \"6DAA\",\n\t\"./en/build_format_locale/index\": \"6DAA\",\n\t\"./en/build_format_locale/index.js\": \"6DAA\",\n\t\"./en/index\": \"Us+F\",\n\t\"./en/index.d.ts\": \"DYsx\",\n\t\"./en/index.js\": \"Us+F\",\n\t\"./en/package\": \"EJIZ\",\n\t\"./en/package.json\": \"EJIZ\",\n\t\"./es\": \"/S0t\",\n\t\"./es/\": \"/S0t\",\n\t\"./es/build_distance_in_words_locale\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/index\": \"GEfZ\",\n\t\"./es/build_distance_in_words_locale/index.js\": \"GEfZ\",\n\t\"./es/build_format_locale\": \"O+zC\",\n\t\"./es/build_format_locale/\": \"O+zC\",\n\t\"./es/build_format_locale/index\": \"O+zC\",\n\t\"./es/build_format_locale/index.js\": \"O+zC\",\n\t\"./es/index\": \"/S0t\",\n\t\"./es/index.d.ts\": \"gbHe\",\n\t\"./es/index.js\": \"/S0t\",\n\t\"./es/package\": \"Vizl\",\n\t\"./es/package.json\": \"Vizl\",\n\t\"./fr\": \"LKA2\",\n\t\"./fr/\": \"LKA2\",\n\t\"./fr/build_distance_in_words_locale\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/index\": \"IzMR\",\n\t\"./fr/build_distance_in_words_locale/index.js\": \"IzMR\",\n\t\"./fr/build_format_locale\": \"I3Zg\",\n\t\"./fr/build_format_locale/\": \"I3Zg\",\n\t\"./fr/build_format_locale/index\": \"I3Zg\",\n\t\"./fr/build_format_locale/index.js\": \"I3Zg\",\n\t\"./fr/index\": \"LKA2\",\n\t\"./fr/index.d.ts\": \"hE7Q\",\n\t\"./fr/index.js\": \"LKA2\",\n\t\"./fr/package\": \"herc\",\n\t\"./fr/package.json\": \"herc\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"yMTE\";","import { HashRouter } from 'react-router-dom'\nimport { shouldEnableTracking, getTracker } from 'cozy-ui/react/helpers/tracker'\n\nconst addPiwik = function(history) {\n  if (shouldEnableTracking() && getTracker()) {\n    let trackerInstance = getTracker()\n    history = trackerInstance.connectToHistory(history)\n    // when using a hash history, the initial visit is not tracked by piwik react router\n    trackerInstance.track(history.location)\n  }\n  return history\n}\n\nexport default class PiwikHashRouter extends HashRouter {\n  constructor(props) {\n    super(props)\n    this.history = addPiwik(this.history)\n  }\n}\n","import React, { Component } from 'react'\nimport classNames from 'classnames'\n\nimport { Icon, Spinner } from 'cozy-ui/react'\nimport palette from 'cozy-ui/stylus/settings/palette.json'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport styles from 'ducks/connections/components/queue/styles.styl'\nimport AppIcon from 'components/AppIcon'\n\nconst Pending = translate()(props => (\n  <span className={styles['item-pending']}>\n    {props.t('Queue.item.pending')}\n  </span>\n))\n\nclass ProgressBar extends Component {\n  state = {\n    progress: 0\n  }\n\n  componentDidMount() {\n    let elapsedTime = 0\n    this.progressInterval = setInterval(() => {\n      elapsedTime += 10\n      let progress = (Math.atan(elapsedTime / 3e3) / (Math.PI / 2)) * 90\n      this.setState({\n        progress: progress\n      })\n    }, 25)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.progressInterval)\n  }\n\n  render() {\n    const { progress } = this.state\n    return (\n      <div\n        role=\"progressbar\"\n        aria-valuenow={progress}\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        className={classNames(styles['queue-item-progress-bar'])}\n        style={{ width: `${progress}%` }}\n        ref={progressBar => (this.progressBar = progressBar)}\n      />\n    )\n  }\n}\n\nclass Item extends Component {\n  render() {\n    const { konnector, label, status, t } = this.props\n    const isOngoing = status === 'ongoing'\n    let statusIcon\n    switch (status) {\n      case 'ongoing':\n        statusIcon = (\n          <Spinner\n            noMargin\n            className=\"u-ml-half\"\n            color={palette['dodgerBlue']}\n          />\n        )\n        break\n      case 'canceled':\n        statusIcon = (\n          <Icon className=\"u-ml-half\" icon=\"cross\" color={palette['monza']} />\n        )\n        break\n      case 'error':\n      case 'conflict':\n        statusIcon = (\n          <Icon className=\"u-ml-half\" icon=\"warning\" color={palette['monza']} />\n        )\n        break\n      case 'done':\n        statusIcon = (\n          <Icon\n            className=\"u-ml-half\"\n            icon=\"check-circleless\"\n            color={palette['emerald']}\n          />\n        )\n        break\n      case 'pending':\n      default:\n        statusIcon = <Pending />\n        break\n    }\n    return (\n      <div\n        className={classNames(styles['queue-item'], {\n          [styles['queue-item--done']]: status === 'done',\n          [styles['queue-item--error']]: status === 'error'\n        })}\n      >\n        <div className={classNames(styles['item-icon'])}>\n          <AppIcon\n            alt={t('app.logo.alt', { name: konnector.name })}\n            className=\"c-\"\n            app={konnector}\n          />\n        </div>\n        <div className={classNames(styles['item-label'])}>{label}</div>\n        <div className={styles['item-status']}>{statusIcon}</div>\n        {isOngoing && <ProgressBar />}\n      </div>\n    )\n  }\n}\n\nexport class Queue extends Component {\n  state = {\n    collapsed: false\n  }\n\n  toggleCollapsed = () => {\n    this.setState(state => ({ collapsed: !state.collapsed }))\n  }\n\n  render() {\n    const { t, visible = false, queue = [], purgeQueue } = this.props\n    const { collapsed } = this.state\n    const doneCount = queue.filter(\n      connection => connection.status !== 'ongoing'\n    ).length\n    const successCount = queue.filter(\n      connection => connection.status === 'done'\n    ).length\n    return (\n      <div\n        className={classNames(styles['queue'], {\n          [styles['queue--visible']]: visible,\n          [styles['queue--collapsed']]: collapsed\n        })}\n      >\n        <h4\n          className={styles['queue-header']}\n          onDoubleClick={this.toggleCollapsed}\n        >\n          {doneCount < queue.length && (\n            <div className={styles['queue-header-inner']}>\n              <span className=\"coz-desktop\">{t('Queue.header')}</span>\n              <span className=\"coz-mobile\">\n                {t('Queue.header_mobile', {\n                  done: doneCount,\n                  total: queue.length\n                })}\n              </span>\n            </div>\n          )}\n          {doneCount >= queue.length && (\n            <div className={styles['queue-header-inner']}>\n              <span>\n                {t('Queue.header_done', {\n                  done: successCount,\n                  total: queue.length\n                })}\n              </span>\n              <button\n                className={classNames(styles['btn-close'])}\n                onClick={purgeQueue}\n              >\n                {t('Queue.close')}\n              </button>\n            </div>\n          )}\n        </h4>\n        <progress\n          className={styles['queue-progress']}\n          value={doneCount}\n          max={queue.length}\n        />\n        <div className={styles['queue-content']}>\n          <div className={styles['queue-list']}>\n            {queue.map(item => (\n              <Item\n                key={item.triggerId}\n                konnector={item.konnector}\n                label={item.label}\n                status={item.status}\n                t={t}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default translate()(Queue)\n","module.exports = \"/img/timeline.png\";","import React, { memo } from 'react'\nimport { connect } from 'react-redux'\n\nimport { Query, Q } from 'cozy-client'\nimport flag from 'cozy-flags'\n\nimport AppTile from 'components/AppTile'\nimport LogoutTile from 'components/LogoutTile'\nimport ShortcutTile from 'components/ShortcutTile'\nimport LoadingPlaceholder from 'components/LoadingPlaceholder'\nimport homeConfig from 'config/collect'\nimport { receiveApps } from 'ducks/apps'\nimport useHomeShortcuts from 'hooks/useHomeShortcuts'\n\nconst LoadingAppTiles = memo(({ num }) => {\n  const tiles = []\n  for (let i = 0; i < num; i++) {\n    tiles.push(\n      <div className=\"item-wrapper\" key={i}>\n        <header className=\"item-header\">\n          <div className=\"item-icon\">\n            <LoadingPlaceholder />\n          </div>\n        </header>\n        <h3 className=\"item-title\">\n          <LoadingPlaceholder />\n        </h3>\n      </div>\n    )\n  }\n  return <>{tiles}</>\n})\nLoadingAppTiles.displayName = LoadingAppTiles\n\nconst Applications = memo(({ receiveApps }) => {\n  const showLogout = !!flag('home.mainlist.show-logout')\n  const shortcuts = useHomeShortcuts()\n  return (\n    <div className=\"app-list\">\n      <Query query={() => Q('io.cozy.apps')}>\n        {({ data, fetchStatus }) => {\n          if (fetchStatus === 'loaded') {\n            receiveApps(data)\n          }\n          return fetchStatus !== 'loaded' ? (\n            <LoadingAppTiles num=\"3\" />\n          ) : (\n            data\n              .filter(\n                app =>\n                  app.state !== 'hidden' &&\n                  !homeConfig.filteredApps.includes(app.slug) &&\n                  !flag(`home_hidden_apps.${app.slug.toLowerCase()}`) // can be set in the context with `home_hidden_apps: - drive - banks`for example\n              )\n              .map((app, index) => <AppTile key={index} app={app} />)\n          )\n        }}\n      </Query>\n      {shortcuts.map((shortcut, index) => (\n        <ShortcutTile key={index} file={shortcut} />\n      ))}\n      {showLogout && <LogoutTile />}\n    </div>\n  )\n})\nApplications.displayName = 'Applications'\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    receiveApps: apps => dispatch(receiveApps(apps))\n  }\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Applications)\n"],"sourceRoot":""}